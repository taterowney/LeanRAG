{"name":"Convex.addHaar_frontier","module":"Mathlib.Analysis.Convex.Measure","initialProofState":"E : Type u_1\ninst✝⁵ : NormedAddCommGroup E\ninst✝⁴ : NormedSpace Real E\ninst✝³ : MeasurableSpace E\ninst✝² : BorelSpace E\ninst✝¹ : FiniteDimensional Real E\nμ : MeasureTheory.Measure E\ninst✝ : μ.IsAddHaarMeasure\ns : Set E\nhs : Convex Real s\n⊢ Eq (μ (frontier s)) 0","decl":"/-- Haar measure of the frontier of a convex set is zero. -/\ntheorem addHaar_frontier (hs : Convex ℝ s) : μ (frontier s) = 0 := by\n  /- If `s` is included in a hyperplane, then `frontier s ⊆ closure s` is included in the same\n    hyperplane, hence it has measure zero. -/\n  cases' ne_or_eq (affineSpan ℝ s) ⊤ with hspan hspan\n  · refine measure_mono_null ?_ (addHaar_affineSubspace _ _ hspan)\n    exact frontier_subset_closure.trans\n      (closure_minimal (subset_affineSpan _ _) (affineSpan ℝ s).closed_of_finiteDimensional)\n  rw [← hs.interior_nonempty_iff_affineSpan_eq_top] at hspan\n  rcases hspan with ⟨x, hx⟩\n  /- Without loss of generality, `s` is bounded. Indeed, `∂s ⊆ ⋃ n, ∂(s ∩ ball x (n + 1))`, hence it\n    suffices to prove that `∀ n, μ (s ∩ ball x (n + 1)) = 0`; the latter set is bounded.\n    -/\n  suffices H : ∀ t : Set E, Convex ℝ t → x ∈ interior t → IsBounded t → μ (frontier t) = 0 by\n    let B : ℕ → Set E := fun n => ball x (n + 1)\n    have : μ (⋃ n : ℕ, frontier (s ∩ B n)) = 0 := by\n      refine measure_iUnion_null fun n =>\n        H _ (hs.inter (convex_ball _ _)) ?_ (isBounded_ball.subset inter_subset_right)\n      rw [interior_inter, isOpen_ball.interior_eq]\n      exact ⟨hx, mem_ball_self (add_pos_of_nonneg_of_pos n.cast_nonneg zero_lt_one)⟩\n    refine measure_mono_null (fun y hy => ?_) this; clear this\n    set N : ℕ := ⌊dist y x⌋₊\n    refine mem_iUnion.2 ⟨N, ?_⟩\n    have hN : y ∈ B N := by simp [B, N, Nat.lt_floor_add_one]\n    suffices y ∈ frontier (s ∩ B N) ∩ B N from this.1\n    rw [frontier_inter_open_inter isOpen_ball]\n    exact ⟨hy, hN⟩\n  intro s hs hx hb\n  /- Since `s` is bounded, we have `μ (interior s) ≠ ∞`, hence it suffices to prove\n    `μ (closure s) ≤ μ (interior s)`. -/\n  replace hb : μ (interior s) ≠ ∞ := (hb.subset interior_subset).measure_lt_top.ne\n  suffices μ (closure s) ≤ μ (interior s) by\n    rwa [frontier, measure_diff interior_subset_closure isOpen_interior.nullMeasurableSet hb,\n      tsub_eq_zero_iff_le]\n  /- Due to `Convex.closure_subset_image_homothety_interior_of_one_lt`, for any `r > 1` we have\n    `closure s ⊆ homothety x r '' interior s`, hence `μ (closure s) ≤ r ^ d * μ (interior s)`,\n    where `d = finrank ℝ E`. -/\n  set d : ℕ := Module.finrank ℝ E\n  have : ∀ r : ℝ≥0, 1 < r → μ (closure s) ≤ ↑(r ^ d) * μ (interior s) := fun r hr ↦ by\n    refine (measure_mono <|\n      hs.closure_subset_image_homothety_interior_of_one_lt hx r hr).trans_eq ?_\n    rw [addHaar_image_homothety, ← NNReal.coe_pow, NNReal.abs_eq, ENNReal.ofReal_coe_nnreal]\n  have : ∀ᶠ (r : ℝ≥0) in 𝓝[>] 1, μ (closure s) ≤ ↑(r ^ d) * μ (interior s) :=\n    mem_of_superset self_mem_nhdsWithin this\n  -- Taking the limit as `r → 1`, we get `μ (closure s) ≤ μ (interior s)`.\n  refine ge_of_tendsto ?_ this\n  refine (((ENNReal.continuous_mul_const hb).comp\n    (ENNReal.continuous_coe.comp (continuous_pow d))).tendsto' _ _ ?_).mono_left nhdsWithin_le_nhds\n  simp\n\n"}
{"name":"Convex.nullMeasurableSet","module":"Mathlib.Analysis.Convex.Measure","initialProofState":"E : Type u_1\ninst✝⁵ : NormedAddCommGroup E\ninst✝⁴ : NormedSpace Real E\ninst✝³ : MeasurableSpace E\ninst✝² : BorelSpace E\ninst✝¹ : FiniteDimensional Real E\nμ : MeasureTheory.Measure E\ninst✝ : μ.IsAddHaarMeasure\ns : Set E\nhs : Convex Real s\n⊢ MeasureTheory.NullMeasurableSet s μ","decl":"/-- A convex set in a finite dimensional real vector space is null measurable with respect to an\nadditive Haar measure on this space. -/\nprotected theorem nullMeasurableSet (hs : Convex ℝ s) : NullMeasurableSet s μ :=\n  nullMeasurableSet_of_null_frontier (hs.addHaar_frontier μ)\n\n"}
