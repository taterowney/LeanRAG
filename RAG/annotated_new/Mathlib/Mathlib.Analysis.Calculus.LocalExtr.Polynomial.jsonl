{"name":"Polynomial.card_roots_toFinset_le_card_roots_derivative_diff_roots_succ","module":"Mathlib.Analysis.Calculus.LocalExtr.Polynomial","initialProofState":"p : Polynomial Real\n⊢ LE.le p.roots.toFinset.card (HAdd.hAdd (SDiff.sdiff (Polynomial.derivative p).roots.toFinset p.roots.toFinset).card 1)","decl":"/-- The number of roots of a real polynomial `p` is at most the number of roots of its derivative\nthat are not roots of `p` plus one. -/\ntheorem card_roots_toFinset_le_card_roots_derivative_diff_roots_succ (p : ℝ[X]) :\n    p.roots.toFinset.card ≤ (p.derivative.roots.toFinset \\ p.roots.toFinset).card + 1 := by\n  rcases eq_or_ne (derivative p) 0 with hp' | hp'\n  · rw [eq_C_of_derivative_eq_zero hp', roots_C, Multiset.toFinset_zero, Finset.card_empty]\n    exact zero_le _\n  have hp : p ≠ 0 := ne_of_apply_ne derivative (by rwa [derivative_zero])\n  refine Finset.card_le_diff_of_interleaved fun x hx y hy hxy hxy' => ?_\n  rw [Multiset.mem_toFinset, mem_roots hp] at hx hy\n  obtain ⟨z, hz1, hz2⟩ := exists_deriv_eq_zero hxy p.continuousOn (hx.trans hy.symm)\n  refine ⟨z, ?_, hz1⟩\n  rwa [Multiset.mem_toFinset, mem_roots hp', IsRoot, ← p.deriv]\n\n"}
{"name":"Polynomial.card_roots_toFinset_le_derivative","module":"Mathlib.Analysis.Calculus.LocalExtr.Polynomial","initialProofState":"p : Polynomial Real\n⊢ LE.le p.roots.toFinset.card (HAdd.hAdd (Polynomial.derivative p).roots.toFinset.card 1)","decl":"/-- The number of roots of a real polynomial is at most the number of roots of its derivative plus\none. -/\ntheorem card_roots_toFinset_le_derivative (p : ℝ[X]) :\n    p.roots.toFinset.card ≤ p.derivative.roots.toFinset.card + 1 :=\n  p.card_roots_toFinset_le_card_roots_derivative_diff_roots_succ.trans <|\n    add_le_add_right (Finset.card_mono Finset.sdiff_subset) _\n\n"}
{"name":"Polynomial.card_roots_le_derivative","module":"Mathlib.Analysis.Calculus.LocalExtr.Polynomial","initialProofState":"p : Polynomial Real\n⊢ LE.le p.roots.card (HAdd.hAdd (Polynomial.derivative p).roots.card 1)","decl":"/-- The number of roots of a real polynomial (counted with multiplicities) is at most the number of\nroots of its derivative (counted with multiplicities) plus one. -/\ntheorem card_roots_le_derivative (p : ℝ[X]) :\n    Multiset.card p.roots ≤ Multiset.card (derivative p).roots + 1 :=\n  calc\n    Multiset.card p.roots = ∑ x ∈ p.roots.toFinset, p.roots.count x :=\n      (Multiset.toFinset_sum_count_eq _).symm\n    _ = ∑ x ∈ p.roots.toFinset, (p.roots.count x - 1 + 1) :=\n      (Eq.symm <| Finset.sum_congr rfl fun _ hx => tsub_add_cancel_of_le <|\n        Nat.succ_le_iff.2 <| Multiset.count_pos.2 <| Multiset.mem_toFinset.1 hx)\n    _ = (∑ x ∈ p.roots.toFinset, (p.rootMultiplicity x - 1)) + p.roots.toFinset.card := by\n      simp only [Finset.sum_add_distrib, Finset.card_eq_sum_ones, count_roots]\n    _ ≤ (∑ x ∈ p.roots.toFinset, p.derivative.rootMultiplicity x) +\n          ((p.derivative.roots.toFinset \\ p.roots.toFinset).card + 1) :=\n      (add_le_add\n        (Finset.sum_le_sum fun _ _ => rootMultiplicity_sub_one_le_derivative_rootMultiplicity _ _)\n        p.card_roots_toFinset_le_card_roots_derivative_diff_roots_succ)\n    _ ≤ (∑ x ∈ p.roots.toFinset, p.derivative.roots.count x) +\n          ((∑ x ∈ p.derivative.roots.toFinset \\ p.roots.toFinset,\n            p.derivative.roots.count x) + 1) := by\n      simp only [← count_roots]\n      refine add_le_add_left (add_le_add_right ((Finset.card_eq_sum_ones _).trans_le ?_) _) _\n      refine Finset.sum_le_sum fun x hx => Nat.succ_le_iff.2 <| ?_\n      rw [Multiset.count_pos, ← Multiset.mem_toFinset]\n      exact (Finset.mem_sdiff.1 hx).1\n    _ = Multiset.card (derivative p).roots + 1 := by\n      rw [← add_assoc, ← Finset.sum_union Finset.disjoint_sdiff, Finset.union_sdiff_self_eq_union, ←\n        Multiset.toFinset_sum_count_eq, ← Finset.sum_subset Finset.subset_union_right]\n      intro x _ hx₂\n      simpa only [Multiset.mem_toFinset, Multiset.count_eq_zero] using hx₂\n\n"}
{"name":"Polynomial.card_rootSet_le_derivative","module":"Mathlib.Analysis.Calculus.LocalExtr.Polynomial","initialProofState":"F : Type u_1\ninst✝¹ : CommRing F\ninst✝ : Algebra F Real\np : Polynomial F\n⊢ LE.le (Fintype.card ↑(p.rootSet Real)) (HAdd.hAdd (Fintype.card ↑((Polynomial.derivative p).rootSet Real)) 1)","decl":"/-- The number of real roots of a polynomial is at most the number of roots of its derivative plus\none. -/\ntheorem card_rootSet_le_derivative {F : Type*} [CommRing F] [Algebra F ℝ] (p : F[X]) :\n    Fintype.card (p.rootSet ℝ) ≤ Fintype.card (p.derivative.rootSet ℝ) + 1 := by\n  simpa only [rootSet_def, Finset.coe_sort_coe, Fintype.card_coe, derivative_map] using\n    card_roots_toFinset_le_derivative (p.map (algebraMap F ℝ))\n\n"}
