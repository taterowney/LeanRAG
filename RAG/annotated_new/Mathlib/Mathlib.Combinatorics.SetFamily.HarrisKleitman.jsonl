{"name":"IsLowerSet.nonMemberSubfamily","module":"Mathlib.Combinatorics.SetFamily.HarrisKleitman","initialProofState":"α : Type u_1\ninst✝ : DecidableEq α\n𝒜 : Finset (Finset α)\na : α\nh : IsLowerSet ↑𝒜\n⊢ IsLowerSet ↑(Finset.nonMemberSubfamily a 𝒜)","decl":"theorem IsLowerSet.nonMemberSubfamily (h : IsLowerSet (𝒜 : Set (Finset α))) :\n    IsLowerSet (𝒜.nonMemberSubfamily a : Set (Finset α)) := fun s t hts => by\n  simp_rw [mem_coe, mem_nonMemberSubfamily]\n  exact And.imp (h hts) (mt <| @hts _)\n\n"}
{"name":"IsLowerSet.memberSubfamily","module":"Mathlib.Combinatorics.SetFamily.HarrisKleitman","initialProofState":"α : Type u_1\ninst✝ : DecidableEq α\n𝒜 : Finset (Finset α)\na : α\nh : IsLowerSet ↑𝒜\n⊢ IsLowerSet ↑(Finset.memberSubfamily a 𝒜)","decl":"theorem IsLowerSet.memberSubfamily (h : IsLowerSet (𝒜 : Set (Finset α))) :\n    IsLowerSet (𝒜.memberSubfamily a : Set (Finset α)) := by\n  rintro s t hts\n  simp_rw [mem_coe, mem_memberSubfamily]\n  exact And.imp (h <| insert_subset_insert _ hts) (mt <| @hts _)\n\n"}
{"name":"IsLowerSet.memberSubfamily_subset_nonMemberSubfamily","module":"Mathlib.Combinatorics.SetFamily.HarrisKleitman","initialProofState":"α : Type u_1\ninst✝ : DecidableEq α\n𝒜 : Finset (Finset α)\na : α\nh : IsLowerSet ↑𝒜\n⊢ HasSubset.Subset (Finset.memberSubfamily a 𝒜) (Finset.nonMemberSubfamily a 𝒜)","decl":"theorem IsLowerSet.memberSubfamily_subset_nonMemberSubfamily (h : IsLowerSet (𝒜 : Set (Finset α))) :\n    𝒜.memberSubfamily a ⊆ 𝒜.nonMemberSubfamily a := fun s => by\n  rw [mem_memberSubfamily, mem_nonMemberSubfamily]\n  exact And.imp_left (h <| subset_insert _ _)\n\n"}
{"name":"IsLowerSet.le_card_inter_finset'","module":"Mathlib.Combinatorics.SetFamily.HarrisKleitman","initialProofState":"α : Type u_1\ninst✝ : DecidableEq α\n𝒜 ℬ : Finset (Finset α)\ns : Finset α\nh𝒜 : IsLowerSet ↑𝒜\nhℬ : IsLowerSet ↑ℬ\nh𝒜s : ∀ (t : Finset α), Membership.mem 𝒜 t → HasSubset.Subset t s\nhℬs : ∀ (t : Finset α), Membership.mem ℬ t → HasSubset.Subset t s\n⊢ LE.le (HMul.hMul 𝒜.card ℬ.card) (HMul.hMul (HPow.hPow 2 s.card) (Inter.inter 𝒜 ℬ).card)","decl":"/-- **Harris-Kleitman inequality**: Any two lower sets of finsets correlate. -/\ntheorem IsLowerSet.le_card_inter_finset' (h𝒜 : IsLowerSet (𝒜 : Set (Finset α)))\n    (hℬ : IsLowerSet (ℬ : Set (Finset α))) (h𝒜s : ∀ t ∈ 𝒜, t ⊆ s) (hℬs : ∀ t ∈ ℬ, t ⊆ s) :\n    #𝒜 * #ℬ ≤ 2 ^ #s * #(𝒜 ∩ ℬ) := by\n  induction' s using Finset.induction with a s hs ih generalizing 𝒜 ℬ\n  · simp_rw [subset_empty, ← subset_singleton_iff', subset_singleton_iff] at h𝒜s hℬs\n    obtain rfl | rfl := h𝒜s\n    · simp only [card_empty, zero_mul, empty_inter, mul_zero, le_refl]\n    obtain rfl | rfl := hℬs\n    · simp only [card_empty, inter_empty, mul_zero, zero_mul, le_refl]\n    · simp only [card_empty, pow_zero, inter_singleton_of_mem, mem_singleton, card_singleton,\n        le_refl]\n  rw [card_insert_of_not_mem hs, ← card_memberSubfamily_add_card_nonMemberSubfamily a 𝒜, ←\n    card_memberSubfamily_add_card_nonMemberSubfamily a ℬ, add_mul, mul_add, mul_add,\n    add_comm (_ * _), add_add_add_comm]\n  refine\n    (add_le_add_right\n          (mul_add_mul_le_mul_add_mul\n              (card_le_card h𝒜.memberSubfamily_subset_nonMemberSubfamily) <|\n            card_le_card hℬ.memberSubfamily_subset_nonMemberSubfamily)\n          _).trans\n      ?_\n  rw [← two_mul, pow_succ', mul_assoc]\n  have h₀ : ∀ 𝒞 : Finset (Finset α), (∀ t ∈ 𝒞, t ⊆ insert a s) →\n      ∀ t ∈ 𝒞.nonMemberSubfamily a, t ⊆ s := by\n    rintro 𝒞 h𝒞 t ht\n    rw [mem_nonMemberSubfamily] at ht\n    exact (subset_insert_iff_of_not_mem ht.2).1 (h𝒞 _ ht.1)\n  have h₁ : ∀ 𝒞 : Finset (Finset α), (∀ t ∈ 𝒞, t ⊆ insert a s) →\n      ∀ t ∈ 𝒞.memberSubfamily a, t ⊆ s := by\n    rintro 𝒞 h𝒞 t ht\n    rw [mem_memberSubfamily] at ht\n    exact (subset_insert_iff_of_not_mem ht.2).1 ((subset_insert _ _).trans <| h𝒞 _ ht.1)\n  refine mul_le_mul_left' ?_ _\n  refine (add_le_add (ih h𝒜.memberSubfamily hℬ.memberSubfamily (h₁ _ h𝒜s) <| h₁ _ hℬs) <|\n    ih h𝒜.nonMemberSubfamily hℬ.nonMemberSubfamily (h₀ _ h𝒜s) <| h₀ _ hℬs).trans_eq ?_\n  rw [← mul_add, ← memberSubfamily_inter, ← nonMemberSubfamily_inter,\n    card_memberSubfamily_add_card_nonMemberSubfamily]\n\n"}
{"name":"IsLowerSet.le_card_inter_finset","module":"Mathlib.Combinatorics.SetFamily.HarrisKleitman","initialProofState":"α : Type u_1\ninst✝¹ : DecidableEq α\n𝒜 ℬ : Finset (Finset α)\ninst✝ : Fintype α\nh𝒜 : IsLowerSet ↑𝒜\nhℬ : IsLowerSet ↑ℬ\n⊢ LE.le (HMul.hMul 𝒜.card ℬ.card) (HMul.hMul (HPow.hPow 2 (Fintype.card α)) (Inter.inter 𝒜 ℬ).card)","decl":"/-- **Harris-Kleitman inequality**: Any two lower sets of finsets correlate. -/\ntheorem IsLowerSet.le_card_inter_finset (h𝒜 : IsLowerSet (𝒜 : Set (Finset α)))\n    (hℬ : IsLowerSet (ℬ : Set (Finset α))) : #𝒜 * #ℬ ≤ 2 ^ Fintype.card α * #(𝒜 ∩ ℬ) :=\nh𝒜.le_card_inter_finset' hℬ (fun _ _ => subset_univ _) fun _ _ => subset_univ _\n\n"}
{"name":"IsUpperSet.card_inter_le_finset","module":"Mathlib.Combinatorics.SetFamily.HarrisKleitman","initialProofState":"α : Type u_1\ninst✝¹ : DecidableEq α\n𝒜 ℬ : Finset (Finset α)\ninst✝ : Fintype α\nh𝒜 : IsUpperSet ↑𝒜\nhℬ : IsLowerSet ↑ℬ\n⊢ LE.le (HMul.hMul (HPow.hPow 2 (Fintype.card α)) (Inter.inter 𝒜 ℬ).card) (HMul.hMul 𝒜.card ℬ.card)","decl":"/-- **Harris-Kleitman inequality**: Upper sets and lower sets of finsets anticorrelate. -/\ntheorem IsUpperSet.card_inter_le_finset (h𝒜 : IsUpperSet (𝒜 : Set (Finset α)))\n    (hℬ : IsLowerSet (ℬ : Set (Finset α))) :\n    2 ^ Fintype.card α * #(𝒜 ∩ ℬ) ≤ #𝒜 * #ℬ := by\n  rw [← isLowerSet_compl, ← coe_compl] at h𝒜\n  have := h𝒜.le_card_inter_finset hℬ\n  rwa [card_compl, Fintype.card_finset, tsub_mul, tsub_le_iff_tsub_le, ← mul_tsub, ←\n    card_sdiff inter_subset_right, sdiff_inter_self_right, sdiff_compl,\n    _root_.inf_comm] at this\n\n"}
{"name":"IsLowerSet.card_inter_le_finset","module":"Mathlib.Combinatorics.SetFamily.HarrisKleitman","initialProofState":"α : Type u_1\ninst✝¹ : DecidableEq α\n𝒜 ℬ : Finset (Finset α)\ninst✝ : Fintype α\nh𝒜 : IsLowerSet ↑𝒜\nhℬ : IsUpperSet ↑ℬ\n⊢ LE.le (HMul.hMul (HPow.hPow 2 (Fintype.card α)) (Inter.inter 𝒜 ℬ).card) (HMul.hMul 𝒜.card ℬ.card)","decl":"/-- **Harris-Kleitman inequality**: Lower sets and upper sets of finsets anticorrelate. -/\ntheorem IsLowerSet.card_inter_le_finset (h𝒜 : IsLowerSet (𝒜 : Set (Finset α)))\n    (hℬ : IsUpperSet (ℬ : Set (Finset α))) :\n    2 ^ Fintype.card α * #(𝒜 ∩ ℬ) ≤ #𝒜 * #ℬ := by\n  rw [inter_comm, mul_comm #𝒜]\n  exact hℬ.card_inter_le_finset h𝒜\n\n"}
{"name":"IsUpperSet.le_card_inter_finset","module":"Mathlib.Combinatorics.SetFamily.HarrisKleitman","initialProofState":"α : Type u_1\ninst✝¹ : DecidableEq α\n𝒜 ℬ : Finset (Finset α)\ninst✝ : Fintype α\nh𝒜 : IsUpperSet ↑𝒜\nhℬ : IsUpperSet ↑ℬ\n⊢ LE.le (HMul.hMul 𝒜.card ℬ.card) (HMul.hMul (HPow.hPow 2 (Fintype.card α)) (Inter.inter 𝒜 ℬ).card)","decl":"/-- **Harris-Kleitman inequality**: Any two upper sets of finsets correlate. -/\ntheorem IsUpperSet.le_card_inter_finset (h𝒜 : IsUpperSet (𝒜 : Set (Finset α)))\n    (hℬ : IsUpperSet (ℬ : Set (Finset α))) :\n    #𝒜 * #ℬ ≤ 2 ^ Fintype.card α * #(𝒜 ∩ ℬ) := by\n  rw [← isLowerSet_compl, ← coe_compl] at h𝒜\n  have := h𝒜.card_inter_le_finset hℬ\n  rwa [card_compl, Fintype.card_finset, tsub_mul, le_tsub_iff_le_tsub, ← mul_tsub, ←\n    card_sdiff inter_subset_right, sdiff_inter_self_right, sdiff_compl,\n    _root_.inf_comm] at this\n  · exact mul_le_mul_left' (card_le_card inter_subset_right) _\n  · rw [← Fintype.card_finset]\n    exact mul_le_mul_right' (card_le_univ _) _\n"}
