{"name":"StructureGroupoid.LocalInvariantProp.left_invariance'","module":"Mathlib.Geometry.Manifold.LocalInvariantProperties","initialProofState":"H : Type u_1\nH' : Type u_3\ninst✝¹ : TopologicalSpace H\ninst✝ : TopologicalSpace H'\nG : StructureGroupoid H\nG' : StructureGroupoid H'\nP : (H → H') → Set H → H → Prop\nself : G.LocalInvariantProp G' P\ns : Set H\nx : H\nf : H → H'\ne' : PartialHomeomorph H' H'\na✝³ : Membership.mem G' e'\na✝² : HasSubset.Subset s (Set.preimage f e'.source)\na✝¹ : Membership.mem e'.source (f x)\na✝ : P f s x\n⊢ P (Function.comp (↑e') f) s x","decl":"/-- Structure recording good behavior of a property of a triple `(f, s, x)` where `f` is a function,\n`s` a set and `x` a point. Good behavior here means locality and invariance under given groupoids\n(both in the source and in the target). Given such a good behavior, the lift of this property\nto charted spaces admitting these groupoids will inherit the good behavior. -/\nstructure LocalInvariantProp (P : (H → H') → Set H → H → Prop) : Prop where\n  is_local : ∀ {s x u} {f : H → H'}, IsOpen u → x ∈ u → (P f s x ↔ P f (s ∩ u) x)\n  right_invariance' : ∀ {s x f} {e : PartialHomeomorph H H},\n    e ∈ G → x ∈ e.source → P f s x → P (f ∘ e.symm) (e.symm ⁻¹' s) (e x)\n  congr_of_forall : ∀ {s x} {f g : H → H'}, (∀ y ∈ s, f y = g y) → f x = g x → P f s x → P g s x\n  left_invariance' : ∀ {s x f} {e' : PartialHomeomorph H' H'},\n    e' ∈ G' → s ⊆ f ⁻¹' e'.source → f x ∈ e'.source → P f s x → P (e' ∘ f) s x\n\n"}
{"name":"StructureGroupoid.LocalInvariantProp.right_invariance'","module":"Mathlib.Geometry.Manifold.LocalInvariantProperties","initialProofState":"H : Type u_1\nH' : Type u_3\ninst✝¹ : TopologicalSpace H\ninst✝ : TopologicalSpace H'\nG : StructureGroupoid H\nG' : StructureGroupoid H'\nP : (H → H') → Set H → H → Prop\nself : G.LocalInvariantProp G' P\ns : Set H\nx : H\nf : H → H'\ne : PartialHomeomorph H H\na✝² : Membership.mem G e\na✝¹ : Membership.mem e.source x\na✝ : P f s x\n⊢ P (Function.comp f ↑e.symm) (Set.preimage (↑e.symm) s) (↑e x)","decl":"/-- Structure recording good behavior of a property of a triple `(f, s, x)` where `f` is a function,\n`s` a set and `x` a point. Good behavior here means locality and invariance under given groupoids\n(both in the source and in the target). Given such a good behavior, the lift of this property\nto charted spaces admitting these groupoids will inherit the good behavior. -/\nstructure LocalInvariantProp (P : (H → H') → Set H → H → Prop) : Prop where\n  is_local : ∀ {s x u} {f : H → H'}, IsOpen u → x ∈ u → (P f s x ↔ P f (s ∩ u) x)\n  right_invariance' : ∀ {s x f} {e : PartialHomeomorph H H},\n    e ∈ G → x ∈ e.source → P f s x → P (f ∘ e.symm) (e.symm ⁻¹' s) (e x)\n  congr_of_forall : ∀ {s x} {f g : H → H'}, (∀ y ∈ s, f y = g y) → f x = g x → P f s x → P g s x\n  left_invariance' : ∀ {s x f} {e' : PartialHomeomorph H' H'},\n    e' ∈ G' → s ⊆ f ⁻¹' e'.source → f x ∈ e'.source → P f s x → P (e' ∘ f) s x\n\n"}
{"name":"StructureGroupoid.LocalInvariantProp.is_local","module":"Mathlib.Geometry.Manifold.LocalInvariantProperties","initialProofState":"H : Type u_1\nH' : Type u_3\ninst✝¹ : TopologicalSpace H\ninst✝ : TopologicalSpace H'\nG : StructureGroupoid H\nG' : StructureGroupoid H'\nP : (H → H') → Set H → H → Prop\nself : G.LocalInvariantProp G' P\ns : Set H\nx : H\nu : Set H\nf : H → H'\na✝¹ : IsOpen u\na✝ : Membership.mem u x\n⊢ Iff (P f s x) (P f (Inter.inter s u) x)","decl":"/-- Structure recording good behavior of a property of a triple `(f, s, x)` where `f` is a function,\n`s` a set and `x` a point. Good behavior here means locality and invariance under given groupoids\n(both in the source and in the target). Given such a good behavior, the lift of this property\nto charted spaces admitting these groupoids will inherit the good behavior. -/\nstructure LocalInvariantProp (P : (H → H') → Set H → H → Prop) : Prop where\n  is_local : ∀ {s x u} {f : H → H'}, IsOpen u → x ∈ u → (P f s x ↔ P f (s ∩ u) x)\n  right_invariance' : ∀ {s x f} {e : PartialHomeomorph H H},\n    e ∈ G → x ∈ e.source → P f s x → P (f ∘ e.symm) (e.symm ⁻¹' s) (e x)\n  congr_of_forall : ∀ {s x} {f g : H → H'}, (∀ y ∈ s, f y = g y) → f x = g x → P f s x → P g s x\n  left_invariance' : ∀ {s x f} {e' : PartialHomeomorph H' H'},\n    e' ∈ G' → s ⊆ f ⁻¹' e'.source → f x ∈ e'.source → P f s x → P (e' ∘ f) s x\n\n"}
{"name":"StructureGroupoid.LocalInvariantProp.congr_of_forall","module":"Mathlib.Geometry.Manifold.LocalInvariantProperties","initialProofState":"H : Type u_1\nH' : Type u_3\ninst✝¹ : TopologicalSpace H\ninst✝ : TopologicalSpace H'\nG : StructureGroupoid H\nG' : StructureGroupoid H'\nP : (H → H') → Set H → H → Prop\nself : G.LocalInvariantProp G' P\ns : Set H\nx : H\nf g : H → H'\na✝² : ∀ (y : H), Membership.mem s y → Eq (f y) (g y)\na✝¹ : Eq (f x) (g x)\na✝ : P f s x\n⊢ P g s x","decl":"/-- Structure recording good behavior of a property of a triple `(f, s, x)` where `f` is a function,\n`s` a set and `x` a point. Good behavior here means locality and invariance under given groupoids\n(both in the source and in the target). Given such a good behavior, the lift of this property\nto charted spaces admitting these groupoids will inherit the good behavior. -/\nstructure LocalInvariantProp (P : (H → H') → Set H → H → Prop) : Prop where\n  is_local : ∀ {s x u} {f : H → H'}, IsOpen u → x ∈ u → (P f s x ↔ P f (s ∩ u) x)\n  right_invariance' : ∀ {s x f} {e : PartialHomeomorph H H},\n    e ∈ G → x ∈ e.source → P f s x → P (f ∘ e.symm) (e.symm ⁻¹' s) (e x)\n  congr_of_forall : ∀ {s x} {f g : H → H'}, (∀ y ∈ s, f y = g y) → f x = g x → P f s x → P g s x\n  left_invariance' : ∀ {s x f} {e' : PartialHomeomorph H' H'},\n    e' ∈ G' → s ⊆ f ⁻¹' e'.source → f x ∈ e'.source → P f s x → P (e' ∘ f) s x\n\n"}
{"name":"StructureGroupoid.LocalInvariantProp.congr_set","module":"Mathlib.Geometry.Manifold.LocalInvariantProperties","initialProofState":"H : Type u_1\nH' : Type u_3\ninst✝¹ : TopologicalSpace H\ninst✝ : TopologicalSpace H'\nG : StructureGroupoid H\nG' : StructureGroupoid H'\nP : (H → H') → Set H → H → Prop\nhG : G.LocalInvariantProp G' P\ns t : Set H\nx : H\nf : H → H'\nhu : (nhds x).EventuallyEq s t\n⊢ Iff (P f s x) (P f t x)","decl":"theorem congr_set {s t : Set H} {x : H} {f : H → H'} (hu : s =ᶠ[𝓝 x] t) : P f s x ↔ P f t x := by\n  obtain ⟨o, host, ho, hxo⟩ := mem_nhds_iff.mp hu.mem_iff\n  simp_rw [subset_def, mem_setOf, ← and_congr_left_iff, ← mem_inter_iff, ← Set.ext_iff] at host\n  rw [hG.is_local ho hxo, host, ← hG.is_local ho hxo]\n\n"}
{"name":"StructureGroupoid.LocalInvariantProp.is_local_nhds","module":"Mathlib.Geometry.Manifold.LocalInvariantProperties","initialProofState":"H : Type u_1\nH' : Type u_3\ninst✝¹ : TopologicalSpace H\ninst✝ : TopologicalSpace H'\nG : StructureGroupoid H\nG' : StructureGroupoid H'\nP : (H → H') → Set H → H → Prop\nhG : G.LocalInvariantProp G' P\ns u : Set H\nx : H\nf : H → H'\nhu : Membership.mem (nhdsWithin x s) u\n⊢ Iff (P f s x) (P f (Inter.inter s u) x)","decl":"theorem is_local_nhds {s u : Set H} {x : H} {f : H → H'} (hu : u ∈ 𝓝[s] x) :\n    P f s x ↔ P f (s ∩ u) x :=\n  hG.congr_set <| mem_nhdsWithin_iff_eventuallyEq.mp hu\n\n"}
{"name":"StructureGroupoid.LocalInvariantProp.congr_iff_nhdsWithin","module":"Mathlib.Geometry.Manifold.LocalInvariantProperties","initialProofState":"H : Type u_1\nH' : Type u_3\ninst✝¹ : TopologicalSpace H\ninst✝ : TopologicalSpace H'\nG : StructureGroupoid H\nG' : StructureGroupoid H'\nP : (H → H') → Set H → H → Prop\nhG : G.LocalInvariantProp G' P\ns : Set H\nx : H\nf g : H → H'\nh1 : (nhdsWithin x s).EventuallyEq f g\nh2 : Eq (f x) (g x)\n⊢ Iff (P f s x) (P g s x)","decl":"theorem congr_iff_nhdsWithin {s : Set H} {x : H} {f g : H → H'} (h1 : f =ᶠ[𝓝[s] x] g)\n    (h2 : f x = g x) : P f s x ↔ P g s x := by\n  simp_rw [hG.is_local_nhds h1]\n  exact ⟨hG.congr_of_forall (fun y hy ↦ hy.2) h2, hG.congr_of_forall (fun y hy ↦ hy.2.symm) h2.symm⟩\n\n"}
{"name":"StructureGroupoid.LocalInvariantProp.congr_nhdsWithin","module":"Mathlib.Geometry.Manifold.LocalInvariantProperties","initialProofState":"H : Type u_1\nH' : Type u_3\ninst✝¹ : TopologicalSpace H\ninst✝ : TopologicalSpace H'\nG : StructureGroupoid H\nG' : StructureGroupoid H'\nP : (H → H') → Set H → H → Prop\nhG : G.LocalInvariantProp G' P\ns : Set H\nx : H\nf g : H → H'\nh1 : (nhdsWithin x s).EventuallyEq f g\nh2 : Eq (f x) (g x)\nhP : P f s x\n⊢ P g s x","decl":"theorem congr_nhdsWithin {s : Set H} {x : H} {f g : H → H'} (h1 : f =ᶠ[𝓝[s] x] g) (h2 : f x = g x)\n    (hP : P f s x) : P g s x :=\n  (hG.congr_iff_nhdsWithin h1 h2).mp hP\n\n"}
{"name":"StructureGroupoid.LocalInvariantProp.congr_nhdsWithin'","module":"Mathlib.Geometry.Manifold.LocalInvariantProperties","initialProofState":"H : Type u_1\nH' : Type u_3\ninst✝¹ : TopologicalSpace H\ninst✝ : TopologicalSpace H'\nG : StructureGroupoid H\nG' : StructureGroupoid H'\nP : (H → H') → Set H → H → Prop\nhG : G.LocalInvariantProp G' P\ns : Set H\nx : H\nf g : H → H'\nh1 : (nhdsWithin x s).EventuallyEq f g\nh2 : Eq (f x) (g x)\nhP : P g s x\n⊢ P f s x","decl":"theorem congr_nhdsWithin' {s : Set H} {x : H} {f g : H → H'} (h1 : f =ᶠ[𝓝[s] x] g) (h2 : f x = g x)\n    (hP : P g s x) : P f s x :=\n  (hG.congr_iff_nhdsWithin h1 h2).mpr hP\n\n"}
{"name":"StructureGroupoid.LocalInvariantProp.congr_iff","module":"Mathlib.Geometry.Manifold.LocalInvariantProperties","initialProofState":"H : Type u_1\nH' : Type u_3\ninst✝¹ : TopologicalSpace H\ninst✝ : TopologicalSpace H'\nG : StructureGroupoid H\nG' : StructureGroupoid H'\nP : (H → H') → Set H → H → Prop\nhG : G.LocalInvariantProp G' P\ns : Set H\nx : H\nf g : H → H'\nh : (nhds x).EventuallyEq f g\n⊢ Iff (P f s x) (P g s x)","decl":"theorem congr_iff {s : Set H} {x : H} {f g : H → H'} (h : f =ᶠ[𝓝 x] g) : P f s x ↔ P g s x :=\n  hG.congr_iff_nhdsWithin (mem_nhdsWithin_of_mem_nhds h) (mem_of_mem_nhds h :)\n\n"}
{"name":"StructureGroupoid.LocalInvariantProp.congr","module":"Mathlib.Geometry.Manifold.LocalInvariantProperties","initialProofState":"H : Type u_1\nH' : Type u_3\ninst✝¹ : TopologicalSpace H\ninst✝ : TopologicalSpace H'\nG : StructureGroupoid H\nG' : StructureGroupoid H'\nP : (H → H') → Set H → H → Prop\nhG : G.LocalInvariantProp G' P\ns : Set H\nx : H\nf g : H → H'\nh : (nhds x).EventuallyEq f g\nhP : P f s x\n⊢ P g s x","decl":"theorem congr {s : Set H} {x : H} {f g : H → H'} (h : f =ᶠ[𝓝 x] g) (hP : P f s x) : P g s x :=\n  (hG.congr_iff h).mp hP\n\n"}
{"name":"StructureGroupoid.LocalInvariantProp.congr'","module":"Mathlib.Geometry.Manifold.LocalInvariantProperties","initialProofState":"H : Type u_1\nH' : Type u_3\ninst✝¹ : TopologicalSpace H\ninst✝ : TopologicalSpace H'\nG : StructureGroupoid H\nG' : StructureGroupoid H'\nP : (H → H') → Set H → H → Prop\nhG : G.LocalInvariantProp G' P\ns : Set H\nx : H\nf g : H → H'\nh : (nhds x).EventuallyEq f g\nhP : P g s x\n⊢ P f s x","decl":"theorem congr' {s : Set H} {x : H} {f g : H → H'} (h : f =ᶠ[𝓝 x] g) (hP : P g s x) : P f s x :=\n  hG.congr h.symm hP\n\n"}
{"name":"StructureGroupoid.LocalInvariantProp.left_invariance","module":"Mathlib.Geometry.Manifold.LocalInvariantProperties","initialProofState":"H : Type u_1\nH' : Type u_3\ninst✝¹ : TopologicalSpace H\ninst✝ : TopologicalSpace H'\nG : StructureGroupoid H\nG' : StructureGroupoid H'\nP : (H → H') → Set H → H → Prop\nhG : G.LocalInvariantProp G' P\ns : Set H\nx : H\nf : H → H'\ne' : PartialHomeomorph H' H'\nhe' : Membership.mem G' e'\nhfs : ContinuousWithinAt f s x\nhxe' : Membership.mem e'.source (f x)\n⊢ Iff (P (Function.comp (↑e') f) s x) (P f s x)","decl":"theorem left_invariance {s : Set H} {x : H} {f : H → H'} {e' : PartialHomeomorph H' H'}\n    (he' : e' ∈ G') (hfs : ContinuousWithinAt f s x) (hxe' : f x ∈ e'.source) :\n    P (e' ∘ f) s x ↔ P f s x := by\n  have h2f := hfs.preimage_mem_nhdsWithin (e'.open_source.mem_nhds hxe')\n  have h3f :=\n    ((e'.continuousAt hxe').comp_continuousWithinAt hfs).preimage_mem_nhdsWithin <|\n      e'.symm.open_source.mem_nhds <| e'.mapsTo hxe'\n  constructor\n  · intro h\n    rw [hG.is_local_nhds h3f] at h\n    have h2 := hG.left_invariance' (G'.symm he') inter_subset_right (e'.mapsTo hxe') h\n    rw [← hG.is_local_nhds h3f] at h2\n    refine hG.congr_nhdsWithin ?_ (e'.left_inv hxe') h2\n    exact eventually_of_mem h2f fun x' ↦ e'.left_inv\n  · simp_rw [hG.is_local_nhds h2f]\n    exact hG.left_invariance' he' inter_subset_right hxe'\n\n"}
{"name":"StructureGroupoid.LocalInvariantProp.right_invariance","module":"Mathlib.Geometry.Manifold.LocalInvariantProperties","initialProofState":"H : Type u_1\nH' : Type u_3\ninst✝¹ : TopologicalSpace H\ninst✝ : TopologicalSpace H'\nG : StructureGroupoid H\nG' : StructureGroupoid H'\nP : (H → H') → Set H → H → Prop\nhG : G.LocalInvariantProp G' P\ns : Set H\nx : H\nf : H → H'\ne : PartialHomeomorph H H\nhe : Membership.mem G e\nhxe : Membership.mem e.source x\n⊢ Iff (P (Function.comp f ↑e.symm) (Set.preimage (↑e.symm) s) (↑e x)) (P f s x)","decl":"theorem right_invariance {s : Set H} {x : H} {f : H → H'} {e : PartialHomeomorph H H} (he : e ∈ G)\n    (hxe : x ∈ e.source) : P (f ∘ e.symm) (e.symm ⁻¹' s) (e x) ↔ P f s x := by\n  refine ⟨fun h ↦ ?_, hG.right_invariance' he hxe⟩\n  have := hG.right_invariance' (G.symm he) (e.mapsTo hxe) h\n  rw [e.symm_symm, e.left_inv hxe] at this\n  refine hG.congr ?_ ((hG.congr_set ?_).mp this)\n  · refine eventually_of_mem (e.open_source.mem_nhds hxe) fun x' hx' ↦ ?_\n    simp_rw [Function.comp_apply, e.left_inv hx']\n  · rw [eventuallyEq_set]\n    refine eventually_of_mem (e.open_source.mem_nhds hxe) fun x' hx' ↦ ?_\n    simp_rw [mem_preimage, e.left_inv hx']\n\n"}
{"name":"ChartedSpace.LiftPropWithinAt.prop","module":"Mathlib.Geometry.Manifold.LocalInvariantProperties","initialProofState":"H : Type u_1\nM : Type u_2\nH' : Type u_3\nM' : Type u_4\ninst✝⁵ : TopologicalSpace H\ninst✝⁴ : TopologicalSpace M\ninst✝³ : ChartedSpace H M\ninst✝² : TopologicalSpace H'\ninst✝¹ : TopologicalSpace M'\ninst✝ : ChartedSpace H' M'\nP : (H → H') → Set H → H → Prop\nf : M → M'\ns : Set M\nx : M\nself : ChartedSpace.LiftPropWithinAt P f s x\n⊢ P (Function.comp (↑(chartAt H' (f x))) (Function.comp f ↑(chartAt H x).symm)) (Set.preimage (↑(chartAt H x).symm) s) (↑(chartAt H x) x)","decl":"/-- Given a property of germs of functions and sets in the model space, then one defines\na corresponding property in a charted space, by requiring that it holds at the preferred chart at\nthis point. (When the property is local and invariant, it will in fact hold using any chart, see\n`liftPropWithinAt_indep_chart`). We require continuity in the lifted property, as otherwise one\nsingle chart might fail to capture the behavior of the function.\n-/\n@[mk_iff liftPropWithinAt_iff']\nstructure LiftPropWithinAt (P : (H → H') → Set H → H → Prop) (f : M → M') (s : Set M) (x : M) :\n    Prop where\n  continuousWithinAt : ContinuousWithinAt f s x\n  prop : P (chartAt H' (f x) ∘ f ∘ (chartAt H x).symm) ((chartAt H x).symm ⁻¹' s) (chartAt H x x)\n\n"}
{"name":"ChartedSpace.liftPropWithinAt_iff'","module":"Mathlib.Geometry.Manifold.LocalInvariantProperties","initialProofState":"H : Type u_1\nM : Type u_2\nH' : Type u_3\nM' : Type u_4\ninst✝⁵ : TopologicalSpace H\ninst✝⁴ : TopologicalSpace M\ninst✝³ : ChartedSpace H M\ninst✝² : TopologicalSpace H'\ninst✝¹ : TopologicalSpace M'\ninst✝ : ChartedSpace H' M'\nP : (H → H') → Set H → H → Prop\nf : M → M'\ns : Set M\nx : M\n⊢ Iff (ChartedSpace.LiftPropWithinAt P f s x) (And (ContinuousWithinAt f s x) (P (Function.comp (↑(chartAt H' (f x))) (Function.comp f ↑(chartAt H x).symm)) (Set.preimage (↑(chartAt H x).symm) s) (↑(chartAt H x) x)))","decl":"/-- Given a property of germs of functions and sets in the model space, then one defines\na corresponding property in a charted space, by requiring that it holds at the preferred chart at\nthis point. (When the property is local and invariant, it will in fact hold using any chart, see\n`liftPropWithinAt_indep_chart`). We require continuity in the lifted property, as otherwise one\nsingle chart might fail to capture the behavior of the function.\n-/\n@[mk_iff liftPropWithinAt_iff']\nstructure LiftPropWithinAt (P : (H → H') → Set H → H → Prop) (f : M → M') (s : Set M) (x : M) :\n    Prop where\n  continuousWithinAt : ContinuousWithinAt f s x\n  prop : P (chartAt H' (f x) ∘ f ∘ (chartAt H x).symm) ((chartAt H x).symm ⁻¹' s) (chartAt H x x)\n\n"}
{"name":"ChartedSpace.LiftPropWithinAt.continuousWithinAt","module":"Mathlib.Geometry.Manifold.LocalInvariantProperties","initialProofState":"H : Type u_1\nM : Type u_2\nH' : Type u_3\nM' : Type u_4\ninst✝⁵ : TopologicalSpace H\ninst✝⁴ : TopologicalSpace M\ninst✝³ : ChartedSpace H M\ninst✝² : TopologicalSpace H'\ninst✝¹ : TopologicalSpace M'\ninst✝ : ChartedSpace H' M'\nP : (H → H') → Set H → H → Prop\nf : M → M'\ns : Set M\nx : M\nself : ChartedSpace.LiftPropWithinAt P f s x\n⊢ ContinuousWithinAt f s x","decl":"/-- Given a property of germs of functions and sets in the model space, then one defines\na corresponding property in a charted space, by requiring that it holds at the preferred chart at\nthis point. (When the property is local and invariant, it will in fact hold using any chart, see\n`liftPropWithinAt_indep_chart`). We require continuity in the lifted property, as otherwise one\nsingle chart might fail to capture the behavior of the function.\n-/\n@[mk_iff liftPropWithinAt_iff']\nstructure LiftPropWithinAt (P : (H → H') → Set H → H → Prop) (f : M → M') (s : Set M) (x : M) :\n    Prop where\n  continuousWithinAt : ContinuousWithinAt f s x\n  prop : P (chartAt H' (f x) ∘ f ∘ (chartAt H x).symm) ((chartAt H x).symm ⁻¹' s) (chartAt H x x)\n\n"}
{"name":"ChartedSpace.liftPropAt_iff","module":"Mathlib.Geometry.Manifold.LocalInvariantProperties","initialProofState":"H : Type u_1\nM : Type u_2\nH' : Type u_3\nM' : Type u_4\ninst✝⁵ : TopologicalSpace H\ninst✝⁴ : TopologicalSpace M\ninst✝³ : ChartedSpace H M\ninst✝² : TopologicalSpace H'\ninst✝¹ : TopologicalSpace M'\ninst✝ : ChartedSpace H' M'\nP : (H → H') → Set H → H → Prop\nf : M → M'\nx : M\n⊢ Iff (ChartedSpace.LiftPropAt P f x) (And (ContinuousAt f x) (P (Function.comp (↑(chartAt H' (f x))) (Function.comp f ↑(chartAt H x).symm)) Set.univ (↑(chartAt H x) x)))","decl":"theorem liftPropAt_iff {P : (H → H') → Set H → H → Prop} {f : M → M'} {x : M} :\n    LiftPropAt P f x ↔\n      ContinuousAt f x ∧ P (chartAt H' (f x) ∘ f ∘ (chartAt H x).symm) univ (chartAt H x x) := by\n  rw [LiftPropAt, liftPropWithinAt_iff', continuousWithinAt_univ, preimage_univ]\n\n"}
{"name":"ChartedSpace.liftProp_iff","module":"Mathlib.Geometry.Manifold.LocalInvariantProperties","initialProofState":"H : Type u_1\nM : Type u_2\nH' : Type u_3\nM' : Type u_4\ninst✝⁵ : TopologicalSpace H\ninst✝⁴ : TopologicalSpace M\ninst✝³ : ChartedSpace H M\ninst✝² : TopologicalSpace H'\ninst✝¹ : TopologicalSpace M'\ninst✝ : ChartedSpace H' M'\nP : (H → H') → Set H → H → Prop\nf : M → M'\n⊢ Iff (ChartedSpace.LiftProp P f) (And (Continuous f) (∀ (x : M), P (Function.comp (↑(chartAt H' (f x))) (Function.comp f ↑(chartAt H x).symm)) Set.univ (↑(chartAt H x) x)))","decl":"theorem liftProp_iff {P : (H → H') → Set H → H → Prop} {f : M → M'} :\n    LiftProp P f ↔\n      Continuous f ∧ ∀ x, P (chartAt H' (f x) ∘ f ∘ (chartAt H x).symm) univ (chartAt H x x) := by\n  simp_rw [LiftProp, liftPropAt_iff, forall_and, continuous_iff_continuousAt]\n\n"}
{"name":"StructureGroupoid.liftPropWithinAt_univ","module":"Mathlib.Geometry.Manifold.LocalInvariantProperties","initialProofState":"H : Type u_1\nM : Type u_2\nH' : Type u_3\nM' : Type u_4\ninst✝⁵ : TopologicalSpace H\ninst✝⁴ : TopologicalSpace M\ninst✝³ : ChartedSpace H M\ninst✝² : TopologicalSpace H'\ninst✝¹ : TopologicalSpace M'\ninst✝ : ChartedSpace H' M'\nP : (H → H') → Set H → H → Prop\ng : M → M'\nx : M\n⊢ Iff (ChartedSpace.LiftPropWithinAt P g Set.univ x) (ChartedSpace.LiftPropAt P g x)","decl":"theorem liftPropWithinAt_univ : LiftPropWithinAt P g univ x ↔ LiftPropAt P g x := Iff.rfl\n\n"}
{"name":"StructureGroupoid.liftPropOn_univ","module":"Mathlib.Geometry.Manifold.LocalInvariantProperties","initialProofState":"H : Type u_1\nM : Type u_2\nH' : Type u_3\nM' : Type u_4\ninst✝⁵ : TopologicalSpace H\ninst✝⁴ : TopologicalSpace M\ninst✝³ : ChartedSpace H M\ninst✝² : TopologicalSpace H'\ninst✝¹ : TopologicalSpace M'\ninst✝ : ChartedSpace H' M'\nP : (H → H') → Set H → H → Prop\ng : M → M'\n⊢ Iff (ChartedSpace.LiftPropOn P g Set.univ) (ChartedSpace.LiftProp P g)","decl":"theorem liftPropOn_univ : LiftPropOn P g univ ↔ LiftProp P g := by\n  simp [LiftPropOn, LiftProp, LiftPropAt]\n\n"}
{"name":"StructureGroupoid.liftPropWithinAt_self","module":"Mathlib.Geometry.Manifold.LocalInvariantProperties","initialProofState":"H : Type u_1\nH' : Type u_3\ninst✝¹ : TopologicalSpace H\ninst✝ : TopologicalSpace H'\nP : (H → H') → Set H → H → Prop\nf : H → H'\ns : Set H\nx : H\n⊢ Iff (ChartedSpace.LiftPropWithinAt P f s x) (And (ContinuousWithinAt f s x) (P f s x))","decl":"theorem liftPropWithinAt_self {f : H → H'} {s : Set H} {x : H} :\n    LiftPropWithinAt P f s x ↔ ContinuousWithinAt f s x ∧ P f s x :=\n  liftPropWithinAt_iff' ..\n\n"}
{"name":"StructureGroupoid.liftPropWithinAt_self_source","module":"Mathlib.Geometry.Manifold.LocalInvariantProperties","initialProofState":"H : Type u_1\nH' : Type u_3\nM' : Type u_4\ninst✝³ : TopologicalSpace H\ninst✝² : TopologicalSpace H'\ninst✝¹ : TopologicalSpace M'\ninst✝ : ChartedSpace H' M'\nP : (H → H') → Set H → H → Prop\nf : H → M'\ns : Set H\nx : H\n⊢ Iff (ChartedSpace.LiftPropWithinAt P f s x) (And (ContinuousWithinAt f s x) (P (Function.comp (↑(chartAt H' (f x))) f) s x))","decl":"theorem liftPropWithinAt_self_source {f : H → M'} {s : Set H} {x : H} :\n    LiftPropWithinAt P f s x ↔ ContinuousWithinAt f s x ∧ P (chartAt H' (f x) ∘ f) s x :=\n  liftPropWithinAt_iff' ..\n\n"}
{"name":"StructureGroupoid.liftPropWithinAt_self_target","module":"Mathlib.Geometry.Manifold.LocalInvariantProperties","initialProofState":"H : Type u_1\nM : Type u_2\nH' : Type u_3\ninst✝³ : TopologicalSpace H\ninst✝² : TopologicalSpace M\ninst✝¹ : ChartedSpace H M\ninst✝ : TopologicalSpace H'\nP : (H → H') → Set H → H → Prop\ns : Set M\nx : M\nf : M → H'\n⊢ Iff (ChartedSpace.LiftPropWithinAt P f s x) (And (ContinuousWithinAt f s x) (P (Function.comp f ↑(chartAt H x).symm) (Set.preimage (↑(chartAt H x).symm) s) (↑(chartAt H x) x)))","decl":"theorem liftPropWithinAt_self_target {f : M → H'} :\n    LiftPropWithinAt P f s x ↔ ContinuousWithinAt f s x ∧\n      P (f ∘ (chartAt H x).symm) ((chartAt H x).symm ⁻¹' s) (chartAt H x x) :=\n  liftPropWithinAt_iff' ..\n\n"}
{"name":"StructureGroupoid.LocalInvariantProp.liftPropWithinAt_iff","module":"Mathlib.Geometry.Manifold.LocalInvariantProperties","initialProofState":"H : Type u_1\nM : Type u_2\nH' : Type u_3\nM' : Type u_4\ninst✝⁵ : TopologicalSpace H\ninst✝⁴ : TopologicalSpace M\ninst✝³ : ChartedSpace H M\ninst✝² : TopologicalSpace H'\ninst✝¹ : TopologicalSpace M'\ninst✝ : ChartedSpace H' M'\nG : StructureGroupoid H\nG' : StructureGroupoid H'\nP : (H → H') → Set H → H → Prop\ns : Set M\nx : M\nhG : G.LocalInvariantProp G' P\nf : M → M'\n⊢ Iff (ChartedSpace.LiftPropWithinAt P f s x) (And (ContinuousWithinAt f s x) (P (Function.comp (↑(chartAt H' (f x))) (Function.comp f ↑(chartAt H x).symm)) (Inter.inter (chartAt H x).target (Set.preimage (↑(chartAt H x).symm) (Inter.inter s (Set.preimage f (chartAt H' (f x)).source)))) (↑(chartAt H x) x)))","decl":"/-- `LiftPropWithinAt P f s x` is equivalent to a definition where we restrict the set we are\n  considering to the domain of the charts at `x` and `f x`. -/\ntheorem liftPropWithinAt_iff {f : M → M'} :\n    LiftPropWithinAt P f s x ↔\n      ContinuousWithinAt f s x ∧\n        P (chartAt H' (f x) ∘ f ∘ (chartAt H x).symm)\n          ((chartAt H x).target ∩ (chartAt H x).symm ⁻¹' (s ∩ f ⁻¹' (chartAt H' (f x)).source))\n          (chartAt H x x) := by\n  rw [liftPropWithinAt_iff']\n  refine and_congr_right fun hf ↦ hG.congr_set ?_\n  exact PartialHomeomorph.preimage_eventuallyEq_target_inter_preimage_inter hf\n    (mem_chart_source H x) (chart_source_mem_nhds H' (f x))\n\n"}
{"name":"StructureGroupoid.LocalInvariantProp.liftPropWithinAt_indep_chart_source_aux","module":"Mathlib.Geometry.Manifold.LocalInvariantProperties","initialProofState":"H : Type u_1\nM : Type u_2\nH' : Type u_3\ninst✝³ : TopologicalSpace H\ninst✝² : TopologicalSpace M\ninst✝¹ : ChartedSpace H M\ninst✝ : TopologicalSpace H'\nG : StructureGroupoid H\nG' : StructureGroupoid H'\ne e' : PartialHomeomorph M H\nP : (H → H') → Set H → H → Prop\ns : Set M\nx : M\nhG : G.LocalInvariantProp G' P\ng : M → H'\nhe : Membership.mem (StructureGroupoid.maximalAtlas M G) e\nxe : Membership.mem e.source x\nhe' : Membership.mem (StructureGroupoid.maximalAtlas M G) e'\nxe' : Membership.mem e'.source x\n⊢ Iff (P (Function.comp g ↑e.symm) (Set.preimage (↑e.symm) s) (↑e x)) (P (Function.comp g ↑e'.symm) (Set.preimage (↑e'.symm) s) (↑e' x))","decl":"theorem liftPropWithinAt_indep_chart_source_aux (g : M → H') (he : e ∈ G.maximalAtlas M)\n    (xe : x ∈ e.source) (he' : e' ∈ G.maximalAtlas M) (xe' : x ∈ e'.source) :\n    P (g ∘ e.symm) (e.symm ⁻¹' s) (e x) ↔ P (g ∘ e'.symm) (e'.symm ⁻¹' s) (e' x) := by\n  rw [← hG.right_invariance (compatible_of_mem_maximalAtlas he he')]\n  swap; · simp only [xe, xe', mfld_simps]\n  simp_rw [PartialHomeomorph.trans_apply, e.left_inv xe]\n  rw [hG.congr_iff]\n  · refine hG.congr_set ?_\n    refine (eventually_of_mem ?_ fun y (hy : y ∈ e'.symm ⁻¹' e.source) ↦ ?_).set_eq\n    · refine (e'.symm.continuousAt <| e'.mapsTo xe').preimage_mem_nhds (e.open_source.mem_nhds ?_)\n      simp_rw [e'.left_inv xe', xe]\n    simp_rw [mem_preimage, PartialHomeomorph.coe_trans_symm, PartialHomeomorph.symm_symm,\n      Function.comp_apply, e.left_inv hy]\n  · refine ((e'.eventually_nhds' _ xe').mpr <| e.eventually_left_inverse xe).mono fun y hy ↦ ?_\n    simp only [mfld_simps]\n    rw [hy]\n\n"}
{"name":"StructureGroupoid.LocalInvariantProp.liftPropWithinAt_indep_chart_target_aux2","module":"Mathlib.Geometry.Manifold.LocalInvariantProperties","initialProofState":"H : Type u_1\nH' : Type u_3\nM' : Type u_4\ninst✝³ : TopologicalSpace H\ninst✝² : TopologicalSpace H'\ninst✝¹ : TopologicalSpace M'\ninst✝ : ChartedSpace H' M'\nG : StructureGroupoid H\nG' : StructureGroupoid H'\nf f' : PartialHomeomorph M' H'\nP : (H → H') → Set H → H → Prop\nhG : G.LocalInvariantProp G' P\ng : H → M'\nx : H\ns : Set H\nhf : Membership.mem (StructureGroupoid.maximalAtlas M' G') f\nxf : Membership.mem f.source (g x)\nhf' : Membership.mem (StructureGroupoid.maximalAtlas M' G') f'\nxf' : Membership.mem f'.source (g x)\nhgs : ContinuousWithinAt g s x\n⊢ Iff (P (Function.comp (↑f) g) s x) (P (Function.comp (↑f') g) s x)","decl":"theorem liftPropWithinAt_indep_chart_target_aux2 (g : H → M') {x : H} {s : Set H}\n    (hf : f ∈ G'.maximalAtlas M') (xf : g x ∈ f.source) (hf' : f' ∈ G'.maximalAtlas M')\n    (xf' : g x ∈ f'.source) (hgs : ContinuousWithinAt g s x) : P (f ∘ g) s x ↔ P (f' ∘ g) s x := by\n  have hcont : ContinuousWithinAt (f ∘ g) s x := (f.continuousAt xf).comp_continuousWithinAt hgs\n  rw [← hG.left_invariance (compatible_of_mem_maximalAtlas hf hf') hcont\n      (by simp only [xf, xf', mfld_simps])]\n  refine hG.congr_iff_nhdsWithin ?_ (by simp only [xf, mfld_simps])\n  exact (hgs.eventually <| f.eventually_left_inverse xf).mono fun y ↦ congr_arg f'\n\n"}
{"name":"StructureGroupoid.LocalInvariantProp.liftPropWithinAt_indep_chart_target_aux","module":"Mathlib.Geometry.Manifold.LocalInvariantProperties","initialProofState":"H : Type u_1\nH' : Type u_3\nM' : Type u_4\nX : Type u_5\ninst✝⁴ : TopologicalSpace H\ninst✝³ : TopologicalSpace H'\ninst✝² : TopologicalSpace M'\ninst✝¹ : ChartedSpace H' M'\ninst✝ : TopologicalSpace X\nG : StructureGroupoid H\nG' : StructureGroupoid H'\nf f' : PartialHomeomorph M' H'\nP : (H → H') → Set H → H → Prop\nhG : G.LocalInvariantProp G' P\ng : X → M'\ne : PartialHomeomorph X H\nx : X\ns : Set X\nxe : Membership.mem e.source x\nhf : Membership.mem (StructureGroupoid.maximalAtlas M' G') f\nxf : Membership.mem f.source (g x)\nhf' : Membership.mem (StructureGroupoid.maximalAtlas M' G') f'\nxf' : Membership.mem f'.source (g x)\nhgs : ContinuousWithinAt g s x\n⊢ Iff (P (Function.comp (↑f) (Function.comp g ↑e.symm)) (Set.preimage (↑e.symm) s) (↑e x)) (P (Function.comp (↑f') (Function.comp g ↑e.symm)) (Set.preimage (↑e.symm) s) (↑e x))","decl":"theorem liftPropWithinAt_indep_chart_target_aux {g : X → M'} {e : PartialHomeomorph X H} {x : X}\n    {s : Set X} (xe : x ∈ e.source) (hf : f ∈ G'.maximalAtlas M') (xf : g x ∈ f.source)\n    (hf' : f' ∈ G'.maximalAtlas M') (xf' : g x ∈ f'.source) (hgs : ContinuousWithinAt g s x) :\n    P (f ∘ g ∘ e.symm) (e.symm ⁻¹' s) (e x) ↔ P (f' ∘ g ∘ e.symm) (e.symm ⁻¹' s) (e x) := by\n  rw [← e.left_inv xe] at xf xf' hgs\n  refine hG.liftPropWithinAt_indep_chart_target_aux2 (g ∘ e.symm) hf xf hf' xf' ?_\n  exact hgs.comp (e.symm.continuousAt <| e.mapsTo xe).continuousWithinAt Subset.rfl\n\n"}
{"name":"StructureGroupoid.LocalInvariantProp.liftPropWithinAt_indep_chart_aux","module":"Mathlib.Geometry.Manifold.LocalInvariantProperties","initialProofState":"H : Type u_1\nM : Type u_2\nH' : Type u_3\nM' : Type u_4\ninst✝⁵ : TopologicalSpace H\ninst✝⁴ : TopologicalSpace M\ninst✝³ : ChartedSpace H M\ninst✝² : TopologicalSpace H'\ninst✝¹ : TopologicalSpace M'\ninst✝ : ChartedSpace H' M'\nG : StructureGroupoid H\nG' : StructureGroupoid H'\ne e' : PartialHomeomorph M H\nf f' : PartialHomeomorph M' H'\nP : (H → H') → Set H → H → Prop\ng : M → M'\ns : Set M\nx : M\nhG : G.LocalInvariantProp G' P\nhe : Membership.mem (StructureGroupoid.maximalAtlas M G) e\nxe : Membership.mem e.source x\nhe' : Membership.mem (StructureGroupoid.maximalAtlas M G) e'\nxe' : Membership.mem e'.source x\nhf : Membership.mem (StructureGroupoid.maximalAtlas M' G') f\nxf : Membership.mem f.source (g x)\nhf' : Membership.mem (StructureGroupoid.maximalAtlas M' G') f'\nxf' : Membership.mem f'.source (g x)\nhgs : ContinuousWithinAt g s x\n⊢ Iff (P (Function.comp (↑f) (Function.comp g ↑e.symm)) (Set.preimage (↑e.symm) s) (↑e x)) (P (Function.comp (↑f') (Function.comp g ↑e'.symm)) (Set.preimage (↑e'.symm) s) (↑e' x))","decl":"/-- If a property of a germ of function `g` on a pointed set `(s, x)` is invariant under the\nstructure groupoid (by composition in the source space and in the target space), then\nexpressing it in charted spaces does not depend on the element of the maximal atlas one uses\nboth in the source and in the target manifolds, provided they are defined around `x` and `g x`\nrespectively, and provided `g` is continuous within `s` at `x` (otherwise, the local behavior\nof `g` at `x` can not be captured with a chart in the target). -/\ntheorem liftPropWithinAt_indep_chart_aux (he : e ∈ G.maximalAtlas M) (xe : x ∈ e.source)\n    (he' : e' ∈ G.maximalAtlas M) (xe' : x ∈ e'.source) (hf : f ∈ G'.maximalAtlas M')\n    (xf : g x ∈ f.source) (hf' : f' ∈ G'.maximalAtlas M') (xf' : g x ∈ f'.source)\n    (hgs : ContinuousWithinAt g s x) :\n    P (f ∘ g ∘ e.symm) (e.symm ⁻¹' s) (e x) ↔ P (f' ∘ g ∘ e'.symm) (e'.symm ⁻¹' s) (e' x) := by\n  rw [← Function.comp_assoc, hG.liftPropWithinAt_indep_chart_source_aux (f ∘ g) he xe he' xe',\n    Function.comp_assoc, hG.liftPropWithinAt_indep_chart_target_aux xe' hf xf hf' xf' hgs]\n\n"}
{"name":"StructureGroupoid.LocalInvariantProp.liftPropWithinAt_indep_chart","module":"Mathlib.Geometry.Manifold.LocalInvariantProperties","initialProofState":"H : Type u_1\nM : Type u_2\nH' : Type u_3\nM' : Type u_4\ninst✝⁷ : TopologicalSpace H\ninst✝⁶ : TopologicalSpace M\ninst✝⁵ : ChartedSpace H M\ninst✝⁴ : TopologicalSpace H'\ninst✝³ : TopologicalSpace M'\ninst✝² : ChartedSpace H' M'\nG : StructureGroupoid H\nG' : StructureGroupoid H'\ne : PartialHomeomorph M H\nf : PartialHomeomorph M' H'\nP : (H → H') → Set H → H → Prop\ng : M → M'\ns : Set M\nx : M\nhG : G.LocalInvariantProp G' P\ninst✝¹ : HasGroupoid M G\ninst✝ : HasGroupoid M' G'\nhe : Membership.mem (StructureGroupoid.maximalAtlas M G) e\nxe : Membership.mem e.source x\nhf : Membership.mem (StructureGroupoid.maximalAtlas M' G') f\nxf : Membership.mem f.source (g x)\n⊢ Iff (ChartedSpace.LiftPropWithinAt P g s x) (And (ContinuousWithinAt g s x) (P (Function.comp (↑f) (Function.comp g ↑e.symm)) (Set.preimage (↑e.symm) s) (↑e x)))","decl":"theorem liftPropWithinAt_indep_chart [HasGroupoid M G] [HasGroupoid M' G']\n    (he : e ∈ G.maximalAtlas M) (xe : x ∈ e.source) (hf : f ∈ G'.maximalAtlas M')\n    (xf : g x ∈ f.source) :\n    LiftPropWithinAt P g s x ↔\n    ContinuousWithinAt g s x ∧ P (f ∘ g ∘ e.symm) (e.symm ⁻¹' s) (e x) := by\n  simp only [liftPropWithinAt_iff']\n  exact and_congr_right <|\n    hG.liftPropWithinAt_indep_chart_aux (chart_mem_maximalAtlas _ _) (mem_chart_source _ _) he xe\n      (chart_mem_maximalAtlas _ _) (mem_chart_source _ _) hf xf\n\n"}
{"name":"StructureGroupoid.LocalInvariantProp.liftPropWithinAt_indep_chart_source","module":"Mathlib.Geometry.Manifold.LocalInvariantProperties","initialProofState":"H : Type u_1\nM : Type u_2\nH' : Type u_3\nM' : Type u_4\ninst✝⁶ : TopologicalSpace H\ninst✝⁵ : TopologicalSpace M\ninst✝⁴ : ChartedSpace H M\ninst✝³ : TopologicalSpace H'\ninst✝² : TopologicalSpace M'\ninst✝¹ : ChartedSpace H' M'\nG : StructureGroupoid H\nG' : StructureGroupoid H'\ne : PartialHomeomorph M H\nP : (H → H') → Set H → H → Prop\ng : M → M'\ns : Set M\nx : M\nhG : G.LocalInvariantProp G' P\ninst✝ : HasGroupoid M G\nhe : Membership.mem (StructureGroupoid.maximalAtlas M G) e\nxe : Membership.mem e.source x\n⊢ Iff (ChartedSpace.LiftPropWithinAt P g s x) (ChartedSpace.LiftPropWithinAt P (Function.comp g ↑e.symm) (Set.preimage (↑e.symm) s) (↑e x))","decl":"/-- A version of `liftPropWithinAt_indep_chart`, only for the source. -/\ntheorem liftPropWithinAt_indep_chart_source [HasGroupoid M G] (he : e ∈ G.maximalAtlas M)\n    (xe : x ∈ e.source) :\n    LiftPropWithinAt P g s x ↔ LiftPropWithinAt P (g ∘ e.symm) (e.symm ⁻¹' s) (e x) := by\n  rw [liftPropWithinAt_self_source, liftPropWithinAt_iff',\n    e.symm.continuousWithinAt_iff_continuousWithinAt_comp_right xe, e.symm_symm]\n  refine and_congr Iff.rfl ?_\n  rw [Function.comp_apply, e.left_inv xe, ← Function.comp_assoc,\n    hG.liftPropWithinAt_indep_chart_source_aux (chartAt _ (g x) ∘ g) (chart_mem_maximalAtlas G x)\n      (mem_chart_source _ x) he xe, Function.comp_assoc]\n\n"}
{"name":"StructureGroupoid.LocalInvariantProp.liftPropWithinAt_indep_chart_target","module":"Mathlib.Geometry.Manifold.LocalInvariantProperties","initialProofState":"H : Type u_1\nM : Type u_2\nH' : Type u_3\nM' : Type u_4\ninst✝⁶ : TopologicalSpace H\ninst✝⁵ : TopologicalSpace M\ninst✝⁴ : ChartedSpace H M\ninst✝³ : TopologicalSpace H'\ninst✝² : TopologicalSpace M'\ninst✝¹ : ChartedSpace H' M'\nG : StructureGroupoid H\nG' : StructureGroupoid H'\nf : PartialHomeomorph M' H'\nP : (H → H') → Set H → H → Prop\ng : M → M'\ns : Set M\nx : M\nhG : G.LocalInvariantProp G' P\ninst✝ : HasGroupoid M' G'\nhf : Membership.mem (StructureGroupoid.maximalAtlas M' G') f\nxf : Membership.mem f.source (g x)\n⊢ Iff (ChartedSpace.LiftPropWithinAt P g s x) (And (ContinuousWithinAt g s x) (ChartedSpace.LiftPropWithinAt P (Function.comp (↑f) g) s x))","decl":"/-- A version of `liftPropWithinAt_indep_chart`, only for the target. -/\ntheorem liftPropWithinAt_indep_chart_target [HasGroupoid M' G'] (hf : f ∈ G'.maximalAtlas M')\n    (xf : g x ∈ f.source) :\n    LiftPropWithinAt P g s x ↔ ContinuousWithinAt g s x ∧ LiftPropWithinAt P (f ∘ g) s x := by\n  rw [liftPropWithinAt_self_target, liftPropWithinAt_iff', and_congr_right_iff]\n  intro hg\n  simp_rw [(f.continuousAt xf).comp_continuousWithinAt hg, true_and]\n  exact hG.liftPropWithinAt_indep_chart_target_aux (mem_chart_source _ _)\n    (chart_mem_maximalAtlas _ _) (mem_chart_source _ _) hf xf hg\n\n"}
{"name":"StructureGroupoid.LocalInvariantProp.liftPropWithinAt_indep_chart'","module":"Mathlib.Geometry.Manifold.LocalInvariantProperties","initialProofState":"H : Type u_1\nM : Type u_2\nH' : Type u_3\nM' : Type u_4\ninst✝⁷ : TopologicalSpace H\ninst✝⁶ : TopologicalSpace M\ninst✝⁵ : ChartedSpace H M\ninst✝⁴ : TopologicalSpace H'\ninst✝³ : TopologicalSpace M'\ninst✝² : ChartedSpace H' M'\nG : StructureGroupoid H\nG' : StructureGroupoid H'\ne : PartialHomeomorph M H\nf : PartialHomeomorph M' H'\nP : (H → H') → Set H → H → Prop\ng : M → M'\ns : Set M\nx : M\nhG : G.LocalInvariantProp G' P\ninst✝¹ : HasGroupoid M G\ninst✝ : HasGroupoid M' G'\nhe : Membership.mem (StructureGroupoid.maximalAtlas M G) e\nxe : Membership.mem e.source x\nhf : Membership.mem (StructureGroupoid.maximalAtlas M' G') f\nxf : Membership.mem f.source (g x)\n⊢ Iff (ChartedSpace.LiftPropWithinAt P g s x) (And (ContinuousWithinAt g s x) (ChartedSpace.LiftPropWithinAt P (Function.comp (↑f) (Function.comp g ↑e.symm)) (Set.preimage (↑e.symm) s) (↑e x)))","decl":"/-- A version of `liftPropWithinAt_indep_chart`, that uses `LiftPropWithinAt` on both sides. -/\ntheorem liftPropWithinAt_indep_chart' [HasGroupoid M G] [HasGroupoid M' G']\n    (he : e ∈ G.maximalAtlas M) (xe : x ∈ e.source) (hf : f ∈ G'.maximalAtlas M')\n    (xf : g x ∈ f.source) :\n    LiftPropWithinAt P g s x ↔\n      ContinuousWithinAt g s x ∧ LiftPropWithinAt P (f ∘ g ∘ e.symm) (e.symm ⁻¹' s) (e x) := by\n  rw [hG.liftPropWithinAt_indep_chart he xe hf xf, liftPropWithinAt_self, and_left_comm,\n    Iff.comm, and_iff_right_iff_imp]\n  intro h\n  have h1 := (e.symm.continuousWithinAt_iff_continuousWithinAt_comp_right xe).mp h.1\n  have : ContinuousAt f ((g ∘ e.symm) (e x)) := by\n    simp_rw [Function.comp, e.left_inv xe, f.continuousAt xf]\n  exact this.comp_continuousWithinAt h1\n\n"}
{"name":"StructureGroupoid.LocalInvariantProp.liftPropOn_indep_chart","module":"Mathlib.Geometry.Manifold.LocalInvariantProperties","initialProofState":"H : Type u_1\nM : Type u_2\nH' : Type u_3\nM' : Type u_4\ninst✝⁷ : TopologicalSpace H\ninst✝⁶ : TopologicalSpace M\ninst✝⁵ : ChartedSpace H M\ninst✝⁴ : TopologicalSpace H'\ninst✝³ : TopologicalSpace M'\ninst✝² : ChartedSpace H' M'\nG : StructureGroupoid H\nG' : StructureGroupoid H'\ne : PartialHomeomorph M H\nf : PartialHomeomorph M' H'\nP : (H → H') → Set H → H → Prop\ng : M → M'\ns : Set M\nhG : G.LocalInvariantProp G' P\ninst✝¹ : HasGroupoid M G\ninst✝ : HasGroupoid M' G'\nhe : Membership.mem (StructureGroupoid.maximalAtlas M G) e\nhf : Membership.mem (StructureGroupoid.maximalAtlas M' G') f\nh : ChartedSpace.LiftPropOn P g s\ny : H\nhy : Membership.mem (Inter.inter e.target (Set.preimage (↑e.symm) (Inter.inter s (Set.preimage g f.source)))) y\n⊢ P (Function.comp (↑f) (Function.comp g ↑e.symm)) (Set.preimage (↑e.symm) s) y","decl":"theorem liftPropOn_indep_chart [HasGroupoid M G] [HasGroupoid M' G'] (he : e ∈ G.maximalAtlas M)\n    (hf : f ∈ G'.maximalAtlas M') (h : LiftPropOn P g s) {y : H}\n    (hy : y ∈ e.target ∩ e.symm ⁻¹' (s ∩ g ⁻¹' f.source)) :\n    P (f ∘ g ∘ e.symm) (e.symm ⁻¹' s) y := by\n  convert ((hG.liftPropWithinAt_indep_chart he (e.symm_mapsTo hy.1) hf hy.2.2).1 (h _ hy.2.1)).2\n  rw [e.right_inv hy.1]\n\n"}
{"name":"StructureGroupoid.LocalInvariantProp.liftPropWithinAt_inter'","module":"Mathlib.Geometry.Manifold.LocalInvariantProperties","initialProofState":"H : Type u_1\nM : Type u_2\nH' : Type u_3\nM' : Type u_4\ninst✝⁵ : TopologicalSpace H\ninst✝⁴ : TopologicalSpace M\ninst✝³ : ChartedSpace H M\ninst✝² : TopologicalSpace H'\ninst✝¹ : TopologicalSpace M'\ninst✝ : ChartedSpace H' M'\nG : StructureGroupoid H\nG' : StructureGroupoid H'\nP : (H → H') → Set H → H → Prop\ng : M → M'\ns t : Set M\nx : M\nhG : G.LocalInvariantProp G' P\nht : Membership.mem (nhdsWithin x s) t\n⊢ Iff (ChartedSpace.LiftPropWithinAt P g (Inter.inter s t) x) (ChartedSpace.LiftPropWithinAt P g s x)","decl":"theorem liftPropWithinAt_inter' (ht : t ∈ 𝓝[s] x) :\n    LiftPropWithinAt P g (s ∩ t) x ↔ LiftPropWithinAt P g s x := by\n  rw [liftPropWithinAt_iff', liftPropWithinAt_iff', continuousWithinAt_inter' ht, hG.congr_set]\n  simp_rw [eventuallyEq_set, mem_preimage,\n    (chartAt _ x).eventually_nhds' (fun x ↦ x ∈ s ∩ t ↔ x ∈ s) (mem_chart_source _ x)]\n  exact (mem_nhdsWithin_iff_eventuallyEq.mp ht).symm.mem_iff\n\n"}
{"name":"StructureGroupoid.LocalInvariantProp.liftPropWithinAt_inter","module":"Mathlib.Geometry.Manifold.LocalInvariantProperties","initialProofState":"H : Type u_1\nM : Type u_2\nH' : Type u_3\nM' : Type u_4\ninst✝⁵ : TopologicalSpace H\ninst✝⁴ : TopologicalSpace M\ninst✝³ : ChartedSpace H M\ninst✝² : TopologicalSpace H'\ninst✝¹ : TopologicalSpace M'\ninst✝ : ChartedSpace H' M'\nG : StructureGroupoid H\nG' : StructureGroupoid H'\nP : (H → H') → Set H → H → Prop\ng : M → M'\ns t : Set M\nx : M\nhG : G.LocalInvariantProp G' P\nht : Membership.mem (nhds x) t\n⊢ Iff (ChartedSpace.LiftPropWithinAt P g (Inter.inter s t) x) (ChartedSpace.LiftPropWithinAt P g s x)","decl":"theorem liftPropWithinAt_inter (ht : t ∈ 𝓝 x) :\n    LiftPropWithinAt P g (s ∩ t) x ↔ LiftPropWithinAt P g s x :=\n  hG.liftPropWithinAt_inter' (mem_nhdsWithin_of_mem_nhds ht)\n\n"}
{"name":"StructureGroupoid.LocalInvariantProp.liftPropWithinAt_congr_set","module":"Mathlib.Geometry.Manifold.LocalInvariantProperties","initialProofState":"H : Type u_1\nM : Type u_2\nH' : Type u_3\nM' : Type u_4\ninst✝⁵ : TopologicalSpace H\ninst✝⁴ : TopologicalSpace M\ninst✝³ : ChartedSpace H M\ninst✝² : TopologicalSpace H'\ninst✝¹ : TopologicalSpace M'\ninst✝ : ChartedSpace H' M'\nG : StructureGroupoid H\nG' : StructureGroupoid H'\nP : (H → H') → Set H → H → Prop\ng : M → M'\ns t : Set M\nx : M\nhG : G.LocalInvariantProp G' P\nhu : (nhds x).EventuallyEq s t\n⊢ Iff (ChartedSpace.LiftPropWithinAt P g s x) (ChartedSpace.LiftPropWithinAt P g t x)","decl":"theorem liftPropWithinAt_congr_set (hu : s =ᶠ[𝓝 x] t) :\n    LiftPropWithinAt P g s x ↔ LiftPropWithinAt P g t x := by\n  rw [← hG.liftPropWithinAt_inter (s := s) hu, ← hG.liftPropWithinAt_inter (s := t) hu,\n    ← eq_iff_iff]\n  congr 1\n  aesop\n\n"}
{"name":"StructureGroupoid.LocalInvariantProp.liftPropAt_of_liftPropWithinAt","module":"Mathlib.Geometry.Manifold.LocalInvariantProperties","initialProofState":"H : Type u_1\nM : Type u_2\nH' : Type u_3\nM' : Type u_4\ninst✝⁵ : TopologicalSpace H\ninst✝⁴ : TopologicalSpace M\ninst✝³ : ChartedSpace H M\ninst✝² : TopologicalSpace H'\ninst✝¹ : TopologicalSpace M'\ninst✝ : ChartedSpace H' M'\nG : StructureGroupoid H\nG' : StructureGroupoid H'\nP : (H → H') → Set H → H → Prop\ng : M → M'\ns : Set M\nx : M\nhG : G.LocalInvariantProp G' P\nh : ChartedSpace.LiftPropWithinAt P g s x\nhs : Membership.mem (nhds x) s\n⊢ ChartedSpace.LiftPropAt P g x","decl":"theorem liftPropAt_of_liftPropWithinAt (h : LiftPropWithinAt P g s x) (hs : s ∈ 𝓝 x) :\n    LiftPropAt P g x := by\n  rwa [← univ_inter s, hG.liftPropWithinAt_inter hs] at h\n\n"}
{"name":"StructureGroupoid.LocalInvariantProp.liftPropWithinAt_of_liftPropAt_of_mem_nhds","module":"Mathlib.Geometry.Manifold.LocalInvariantProperties","initialProofState":"H : Type u_1\nM : Type u_2\nH' : Type u_3\nM' : Type u_4\ninst✝⁵ : TopologicalSpace H\ninst✝⁴ : TopologicalSpace M\ninst✝³ : ChartedSpace H M\ninst✝² : TopologicalSpace H'\ninst✝¹ : TopologicalSpace M'\ninst✝ : ChartedSpace H' M'\nG : StructureGroupoid H\nG' : StructureGroupoid H'\nP : (H → H') → Set H → H → Prop\ng : M → M'\ns : Set M\nx : M\nhG : G.LocalInvariantProp G' P\nh : ChartedSpace.LiftPropAt P g x\nhs : Membership.mem (nhds x) s\n⊢ ChartedSpace.LiftPropWithinAt P g s x","decl":"theorem liftPropWithinAt_of_liftPropAt_of_mem_nhds (h : LiftPropAt P g x) (hs : s ∈ 𝓝 x) :\n    LiftPropWithinAt P g s x := by\n  rwa [← univ_inter s, hG.liftPropWithinAt_inter hs]\n\n"}
{"name":"StructureGroupoid.LocalInvariantProp.liftPropOn_of_locally_liftPropOn","module":"Mathlib.Geometry.Manifold.LocalInvariantProperties","initialProofState":"H : Type u_1\nM : Type u_2\nH' : Type u_3\nM' : Type u_4\ninst✝⁵ : TopologicalSpace H\ninst✝⁴ : TopologicalSpace M\ninst✝³ : ChartedSpace H M\ninst✝² : TopologicalSpace H'\ninst✝¹ : TopologicalSpace M'\ninst✝ : ChartedSpace H' M'\nG : StructureGroupoid H\nG' : StructureGroupoid H'\nP : (H → H') → Set H → H → Prop\ng : M → M'\ns : Set M\nhG : G.LocalInvariantProp G' P\nh : ∀ (x : M), Membership.mem s x → Exists fun u => And (IsOpen u) (And (Membership.mem u x) (ChartedSpace.LiftPropOn P g (Inter.inter s u)))\n⊢ ChartedSpace.LiftPropOn P g s","decl":"theorem liftPropOn_of_locally_liftPropOn\n    (h : ∀ x ∈ s, ∃ u, IsOpen u ∧ x ∈ u ∧ LiftPropOn P g (s ∩ u)) : LiftPropOn P g s := by\n  intro x hx\n  rcases h x hx with ⟨u, u_open, xu, hu⟩\n  have := hu x ⟨hx, xu⟩\n  rwa [hG.liftPropWithinAt_inter] at this\n  exact u_open.mem_nhds xu\n\n"}
{"name":"StructureGroupoid.LocalInvariantProp.liftProp_of_locally_liftPropOn","module":"Mathlib.Geometry.Manifold.LocalInvariantProperties","initialProofState":"H : Type u_1\nM : Type u_2\nH' : Type u_3\nM' : Type u_4\ninst✝⁵ : TopologicalSpace H\ninst✝⁴ : TopologicalSpace M\ninst✝³ : ChartedSpace H M\ninst✝² : TopologicalSpace H'\ninst✝¹ : TopologicalSpace M'\ninst✝ : ChartedSpace H' M'\nG : StructureGroupoid H\nG' : StructureGroupoid H'\nP : (H → H') → Set H → H → Prop\ng : M → M'\nhG : G.LocalInvariantProp G' P\nh : ∀ (x : M), Exists fun u => And (IsOpen u) (And (Membership.mem u x) (ChartedSpace.LiftPropOn P g u))\n⊢ ChartedSpace.LiftProp P g","decl":"theorem liftProp_of_locally_liftPropOn (h : ∀ x, ∃ u, IsOpen u ∧ x ∈ u ∧ LiftPropOn P g u) :\n    LiftProp P g := by\n  rw [← liftPropOn_univ]\n  refine hG.liftPropOn_of_locally_liftPropOn fun x _ ↦ ?_\n  simp [h x]\n\n"}
{"name":"StructureGroupoid.LocalInvariantProp.liftPropWithinAt_congr_of_eventuallyEq","module":"Mathlib.Geometry.Manifold.LocalInvariantProperties","initialProofState":"H : Type u_1\nM : Type u_2\nH' : Type u_3\nM' : Type u_4\ninst✝⁵ : TopologicalSpace H\ninst✝⁴ : TopologicalSpace M\ninst✝³ : ChartedSpace H M\ninst✝² : TopologicalSpace H'\ninst✝¹ : TopologicalSpace M'\ninst✝ : ChartedSpace H' M'\nG : StructureGroupoid H\nG' : StructureGroupoid H'\nP : (H → H') → Set H → H → Prop\ng g' : M → M'\ns : Set M\nx : M\nhG : G.LocalInvariantProp G' P\nh : ChartedSpace.LiftPropWithinAt P g s x\nh₁ : (nhdsWithin x s).EventuallyEq g' g\nhx : Eq (g' x) (g x)\n⊢ ChartedSpace.LiftPropWithinAt P g' s x","decl":"theorem liftPropWithinAt_congr_of_eventuallyEq (h : LiftPropWithinAt P g s x) (h₁ : g' =ᶠ[𝓝[s] x] g)\n    (hx : g' x = g x) : LiftPropWithinAt P g' s x := by\n  refine ⟨h.1.congr_of_eventuallyEq h₁ hx, ?_⟩\n  refine hG.congr_nhdsWithin' ?_\n    (by simp_rw [Function.comp_apply, (chartAt H x).left_inv (mem_chart_source H x), hx]) h.2\n  simp_rw [EventuallyEq, Function.comp_apply]\n  rw [(chartAt H x).eventually_nhdsWithin'\n    (fun y ↦ chartAt H' (g' x) (g' y) = chartAt H' (g x) (g y)) (mem_chart_source H x)]\n  exact h₁.mono fun y hy ↦ by rw [hx, hy]\n\n"}
{"name":"StructureGroupoid.LocalInvariantProp.liftPropWithinAt_congr_of_eventuallyEq_of_mem","module":"Mathlib.Geometry.Manifold.LocalInvariantProperties","initialProofState":"H : Type u_1\nM : Type u_2\nH' : Type u_3\nM' : Type u_4\ninst✝⁵ : TopologicalSpace H\ninst✝⁴ : TopologicalSpace M\ninst✝³ : ChartedSpace H M\ninst✝² : TopologicalSpace H'\ninst✝¹ : TopologicalSpace M'\ninst✝ : ChartedSpace H' M'\nG : StructureGroupoid H\nG' : StructureGroupoid H'\nP : (H → H') → Set H → H → Prop\ng g' : M → M'\ns : Set M\nx : M\nhG : G.LocalInvariantProp G' P\nh : ChartedSpace.LiftPropWithinAt P g s x\nh₁ : (nhdsWithin x s).EventuallyEq g' g\nh₂ : Membership.mem s x\n⊢ ChartedSpace.LiftPropWithinAt P g' s x","decl":"theorem liftPropWithinAt_congr_of_eventuallyEq_of_mem (h : LiftPropWithinAt P g s x)\n    (h₁ : g' =ᶠ[𝓝[s] x] g) (h₂ : x ∈ s) : LiftPropWithinAt P g' s x :=\n  liftPropWithinAt_congr_of_eventuallyEq hG h h₁ (mem_of_mem_nhdsWithin h₂ h₁ :)\n\n"}
{"name":"StructureGroupoid.LocalInvariantProp.liftPropWithinAt_congr_iff_of_eventuallyEq","module":"Mathlib.Geometry.Manifold.LocalInvariantProperties","initialProofState":"H : Type u_1\nM : Type u_2\nH' : Type u_3\nM' : Type u_4\ninst✝⁵ : TopologicalSpace H\ninst✝⁴ : TopologicalSpace M\ninst✝³ : ChartedSpace H M\ninst✝² : TopologicalSpace H'\ninst✝¹ : TopologicalSpace M'\ninst✝ : ChartedSpace H' M'\nG : StructureGroupoid H\nG' : StructureGroupoid H'\nP : (H → H') → Set H → H → Prop\ng g' : M → M'\ns : Set M\nx : M\nhG : G.LocalInvariantProp G' P\nh₁ : (nhdsWithin x s).EventuallyEq g' g\nhx : Eq (g' x) (g x)\n⊢ Iff (ChartedSpace.LiftPropWithinAt P g' s x) (ChartedSpace.LiftPropWithinAt P g s x)","decl":"theorem liftPropWithinAt_congr_iff_of_eventuallyEq (h₁ : g' =ᶠ[𝓝[s] x] g) (hx : g' x = g x) :\n    LiftPropWithinAt P g' s x ↔ LiftPropWithinAt P g s x :=\n  ⟨fun h ↦ hG.liftPropWithinAt_congr_of_eventuallyEq h h₁.symm hx.symm,\n    fun h ↦ hG.liftPropWithinAt_congr_of_eventuallyEq h h₁ hx⟩\n\n"}
{"name":"StructureGroupoid.LocalInvariantProp.liftPropWithinAt_congr_iff","module":"Mathlib.Geometry.Manifold.LocalInvariantProperties","initialProofState":"H : Type u_1\nM : Type u_2\nH' : Type u_3\nM' : Type u_4\ninst✝⁵ : TopologicalSpace H\ninst✝⁴ : TopologicalSpace M\ninst✝³ : ChartedSpace H M\ninst✝² : TopologicalSpace H'\ninst✝¹ : TopologicalSpace M'\ninst✝ : ChartedSpace H' M'\nG : StructureGroupoid H\nG' : StructureGroupoid H'\nP : (H → H') → Set H → H → Prop\ng g' : M → M'\ns : Set M\nx : M\nhG : G.LocalInvariantProp G' P\nh₁ : ∀ (y : M), Membership.mem s y → Eq (g' y) (g y)\nhx : Eq (g' x) (g x)\n⊢ Iff (ChartedSpace.LiftPropWithinAt P g' s x) (ChartedSpace.LiftPropWithinAt P g s x)","decl":"theorem liftPropWithinAt_congr_iff (h₁ : ∀ y ∈ s, g' y = g y) (hx : g' x = g x) :\n    LiftPropWithinAt P g' s x ↔ LiftPropWithinAt P g s x :=\n  hG.liftPropWithinAt_congr_iff_of_eventuallyEq (eventually_nhdsWithin_of_forall h₁) hx\n\n"}
{"name":"StructureGroupoid.LocalInvariantProp.liftPropWithinAt_congr_iff_of_mem","module":"Mathlib.Geometry.Manifold.LocalInvariantProperties","initialProofState":"H : Type u_1\nM : Type u_2\nH' : Type u_3\nM' : Type u_4\ninst✝⁵ : TopologicalSpace H\ninst✝⁴ : TopologicalSpace M\ninst✝³ : ChartedSpace H M\ninst✝² : TopologicalSpace H'\ninst✝¹ : TopologicalSpace M'\ninst✝ : ChartedSpace H' M'\nG : StructureGroupoid H\nG' : StructureGroupoid H'\nP : (H → H') → Set H → H → Prop\ng g' : M → M'\ns : Set M\nx : M\nhG : G.LocalInvariantProp G' P\nh₁ : ∀ (y : M), Membership.mem s y → Eq (g' y) (g y)\nhx : Membership.mem s x\n⊢ Iff (ChartedSpace.LiftPropWithinAt P g' s x) (ChartedSpace.LiftPropWithinAt P g s x)","decl":"theorem liftPropWithinAt_congr_iff_of_mem (h₁ : ∀ y ∈ s, g' y = g y) (hx : x ∈ s) :\n    LiftPropWithinAt P g' s x ↔ LiftPropWithinAt P g s x :=\n  hG.liftPropWithinAt_congr_iff_of_eventuallyEq (eventually_nhdsWithin_of_forall h₁) (h₁ _ hx)\n\n"}
{"name":"StructureGroupoid.LocalInvariantProp.liftPropWithinAt_congr","module":"Mathlib.Geometry.Manifold.LocalInvariantProperties","initialProofState":"H : Type u_1\nM : Type u_2\nH' : Type u_3\nM' : Type u_4\ninst✝⁵ : TopologicalSpace H\ninst✝⁴ : TopologicalSpace M\ninst✝³ : ChartedSpace H M\ninst✝² : TopologicalSpace H'\ninst✝¹ : TopologicalSpace M'\ninst✝ : ChartedSpace H' M'\nG : StructureGroupoid H\nG' : StructureGroupoid H'\nP : (H → H') → Set H → H → Prop\ng g' : M → M'\ns : Set M\nx : M\nhG : G.LocalInvariantProp G' P\nh : ChartedSpace.LiftPropWithinAt P g s x\nh₁ : ∀ (y : M), Membership.mem s y → Eq (g' y) (g y)\nhx : Eq (g' x) (g x)\n⊢ ChartedSpace.LiftPropWithinAt P g' s x","decl":"theorem liftPropWithinAt_congr (h : LiftPropWithinAt P g s x) (h₁ : ∀ y ∈ s, g' y = g y)\n    (hx : g' x = g x) : LiftPropWithinAt P g' s x :=\n  (hG.liftPropWithinAt_congr_iff h₁ hx).mpr h\n\n"}
{"name":"StructureGroupoid.LocalInvariantProp.liftPropWithinAt_congr_of_mem","module":"Mathlib.Geometry.Manifold.LocalInvariantProperties","initialProofState":"H : Type u_1\nM : Type u_2\nH' : Type u_3\nM' : Type u_4\ninst✝⁵ : TopologicalSpace H\ninst✝⁴ : TopologicalSpace M\ninst✝³ : ChartedSpace H M\ninst✝² : TopologicalSpace H'\ninst✝¹ : TopologicalSpace M'\ninst✝ : ChartedSpace H' M'\nG : StructureGroupoid H\nG' : StructureGroupoid H'\nP : (H → H') → Set H → H → Prop\ng g' : M → M'\ns : Set M\nx : M\nhG : G.LocalInvariantProp G' P\nh : ChartedSpace.LiftPropWithinAt P g s x\nh₁ : ∀ (y : M), Membership.mem s y → Eq (g' y) (g y)\nhx : Membership.mem s x\n⊢ ChartedSpace.LiftPropWithinAt P g' s x","decl":"theorem liftPropWithinAt_congr_of_mem (h : LiftPropWithinAt P g s x) (h₁ : ∀ y ∈ s, g' y = g y)\n    (hx : x ∈ s) : LiftPropWithinAt P g' s x :=\n  (hG.liftPropWithinAt_congr_iff h₁ (h₁ _ hx)).mpr h\n\n"}
{"name":"StructureGroupoid.LocalInvariantProp.liftPropAt_congr_iff_of_eventuallyEq","module":"Mathlib.Geometry.Manifold.LocalInvariantProperties","initialProofState":"H : Type u_1\nM : Type u_2\nH' : Type u_3\nM' : Type u_4\ninst✝⁵ : TopologicalSpace H\ninst✝⁴ : TopologicalSpace M\ninst✝³ : ChartedSpace H M\ninst✝² : TopologicalSpace H'\ninst✝¹ : TopologicalSpace M'\ninst✝ : ChartedSpace H' M'\nG : StructureGroupoid H\nG' : StructureGroupoid H'\nP : (H → H') → Set H → H → Prop\ng g' : M → M'\nx : M\nhG : G.LocalInvariantProp G' P\nh₁ : (nhds x).EventuallyEq g' g\n⊢ Iff (ChartedSpace.LiftPropAt P g' x) (ChartedSpace.LiftPropAt P g x)","decl":"theorem liftPropAt_congr_iff_of_eventuallyEq (h₁ : g' =ᶠ[𝓝 x] g) :\n    LiftPropAt P g' x ↔ LiftPropAt P g x :=\n  hG.liftPropWithinAt_congr_iff_of_eventuallyEq (by simp_rw [nhdsWithin_univ, h₁]) h₁.eq_of_nhds\n\n"}
{"name":"StructureGroupoid.LocalInvariantProp.liftPropAt_congr_of_eventuallyEq","module":"Mathlib.Geometry.Manifold.LocalInvariantProperties","initialProofState":"H : Type u_1\nM : Type u_2\nH' : Type u_3\nM' : Type u_4\ninst✝⁵ : TopologicalSpace H\ninst✝⁴ : TopologicalSpace M\ninst✝³ : ChartedSpace H M\ninst✝² : TopologicalSpace H'\ninst✝¹ : TopologicalSpace M'\ninst✝ : ChartedSpace H' M'\nG : StructureGroupoid H\nG' : StructureGroupoid H'\nP : (H → H') → Set H → H → Prop\ng g' : M → M'\nx : M\nhG : G.LocalInvariantProp G' P\nh : ChartedSpace.LiftPropAt P g x\nh₁ : (nhds x).EventuallyEq g' g\n⊢ ChartedSpace.LiftPropAt P g' x","decl":"theorem liftPropAt_congr_of_eventuallyEq (h : LiftPropAt P g x) (h₁ : g' =ᶠ[𝓝 x] g) :\n    LiftPropAt P g' x :=\n  (hG.liftPropAt_congr_iff_of_eventuallyEq h₁).mpr h\n\n"}
{"name":"StructureGroupoid.LocalInvariantProp.liftPropOn_congr","module":"Mathlib.Geometry.Manifold.LocalInvariantProperties","initialProofState":"H : Type u_1\nM : Type u_2\nH' : Type u_3\nM' : Type u_4\ninst✝⁵ : TopologicalSpace H\ninst✝⁴ : TopologicalSpace M\ninst✝³ : ChartedSpace H M\ninst✝² : TopologicalSpace H'\ninst✝¹ : TopologicalSpace M'\ninst✝ : ChartedSpace H' M'\nG : StructureGroupoid H\nG' : StructureGroupoid H'\nP : (H → H') → Set H → H → Prop\ng g' : M → M'\ns : Set M\nhG : G.LocalInvariantProp G' P\nh : ChartedSpace.LiftPropOn P g s\nh₁ : ∀ (y : M), Membership.mem s y → Eq (g' y) (g y)\n⊢ ChartedSpace.LiftPropOn P g' s","decl":"theorem liftPropOn_congr (h : LiftPropOn P g s) (h₁ : ∀ y ∈ s, g' y = g y) : LiftPropOn P g' s :=\n  fun x hx ↦ hG.liftPropWithinAt_congr (h x hx) h₁ (h₁ x hx)\n\n"}
{"name":"StructureGroupoid.LocalInvariantProp.liftPropOn_congr_iff","module":"Mathlib.Geometry.Manifold.LocalInvariantProperties","initialProofState":"H : Type u_1\nM : Type u_2\nH' : Type u_3\nM' : Type u_4\ninst✝⁵ : TopologicalSpace H\ninst✝⁴ : TopologicalSpace M\ninst✝³ : ChartedSpace H M\ninst✝² : TopologicalSpace H'\ninst✝¹ : TopologicalSpace M'\ninst✝ : ChartedSpace H' M'\nG : StructureGroupoid H\nG' : StructureGroupoid H'\nP : (H → H') → Set H → H → Prop\ng g' : M → M'\ns : Set M\nhG : G.LocalInvariantProp G' P\nh₁ : ∀ (y : M), Membership.mem s y → Eq (g' y) (g y)\n⊢ Iff (ChartedSpace.LiftPropOn P g' s) (ChartedSpace.LiftPropOn P g s)","decl":"theorem liftPropOn_congr_iff (h₁ : ∀ y ∈ s, g' y = g y) : LiftPropOn P g' s ↔ LiftPropOn P g s :=\n  ⟨fun h ↦ hG.liftPropOn_congr h fun y hy ↦ (h₁ y hy).symm, fun h ↦ hG.liftPropOn_congr h h₁⟩\n\n"}
{"name":"StructureGroupoid.LocalInvariantProp.liftPropWithinAt_mono_of_mem_nhdsWithin","module":"Mathlib.Geometry.Manifold.LocalInvariantProperties","initialProofState":"H : Type u_1\nM : Type u_2\nH' : Type u_3\nM' : Type u_4\ninst✝⁵ : TopologicalSpace H\ninst✝⁴ : TopologicalSpace M\ninst✝³ : ChartedSpace H M\ninst✝² : TopologicalSpace H'\ninst✝¹ : TopologicalSpace M'\ninst✝ : ChartedSpace H' M'\nP : (H → H') → Set H → H → Prop\ng : M → M'\ns t : Set M\nx : M\nmono_of_mem_nhdsWithin : ∀ ⦃s : Set H⦄ ⦃x : H⦄ ⦃t : Set H⦄ ⦃f : H → H'⦄, Membership.mem (nhdsWithin x t) s → P f s x → P f t x\nh : ChartedSpace.LiftPropWithinAt P g s x\nhst : Membership.mem (nhdsWithin x t) s\n⊢ ChartedSpace.LiftPropWithinAt P g t x","decl":"theorem liftPropWithinAt_mono_of_mem_nhdsWithin\n    (mono_of_mem_nhdsWithin : ∀ ⦃s x t⦄ ⦃f : H → H'⦄, s ∈ 𝓝[t] x → P f s x → P f t x)\n    (h : LiftPropWithinAt P g s x) (hst : s ∈ 𝓝[t] x) : LiftPropWithinAt P g t x := by\n  simp only [liftPropWithinAt_iff'] at h ⊢\n  refine ⟨h.1.mono_of_mem_nhdsWithin hst, mono_of_mem_nhdsWithin ?_ h.2⟩\n  simp_rw [← mem_map, (chartAt H x).symm.map_nhdsWithin_preimage_eq (mem_chart_target H x),\n    (chartAt H x).left_inv (mem_chart_source H x), hst]\n\n"}
{"name":"StructureGroupoid.LocalInvariantProp.liftPropWithinAt_mono_of_mem","module":"Mathlib.Geometry.Manifold.LocalInvariantProperties","initialProofState":"H : Type u_1\nM : Type u_2\nH' : Type u_3\nM' : Type u_4\ninst✝⁵ : TopologicalSpace H\ninst✝⁴ : TopologicalSpace M\ninst✝³ : ChartedSpace H M\ninst✝² : TopologicalSpace H'\ninst✝¹ : TopologicalSpace M'\ninst✝ : ChartedSpace H' M'\nP : (H → H') → Set H → H → Prop\ng : M → M'\ns t : Set M\nx : M\nmono_of_mem_nhdsWithin : ∀ ⦃s : Set H⦄ ⦃x : H⦄ ⦃t : Set H⦄ ⦃f : H → H'⦄, Membership.mem (nhdsWithin x t) s → P f s x → P f t x\nh : ChartedSpace.LiftPropWithinAt P g s x\nhst : Membership.mem (nhdsWithin x t) s\n⊢ ChartedSpace.LiftPropWithinAt P g t x","decl":"@[deprecated (since := \"2024-10-31\")]\nalias liftPropWithinAt_mono_of_mem := liftPropWithinAt_mono_of_mem_nhdsWithin\n\n"}
{"name":"StructureGroupoid.LocalInvariantProp.liftPropWithinAt_mono","module":"Mathlib.Geometry.Manifold.LocalInvariantProperties","initialProofState":"H : Type u_1\nM : Type u_2\nH' : Type u_3\nM' : Type u_4\ninst✝⁵ : TopologicalSpace H\ninst✝⁴ : TopologicalSpace M\ninst✝³ : ChartedSpace H M\ninst✝² : TopologicalSpace H'\ninst✝¹ : TopologicalSpace M'\ninst✝ : ChartedSpace H' M'\nP : (H → H') → Set H → H → Prop\ng : M → M'\ns t : Set M\nx : M\nmono : ∀ ⦃s : Set H⦄ ⦃x : H⦄ ⦃t : Set H⦄ ⦃f : H → H'⦄, HasSubset.Subset t s → P f s x → P f t x\nh : ChartedSpace.LiftPropWithinAt P g s x\nhts : HasSubset.Subset t s\n⊢ ChartedSpace.LiftPropWithinAt P g t x","decl":"theorem liftPropWithinAt_mono (mono : ∀ ⦃s x t⦄ ⦃f : H → H'⦄, t ⊆ s → P f s x → P f t x)\n    (h : LiftPropWithinAt P g s x) (hts : t ⊆ s) : LiftPropWithinAt P g t x := by\n  refine ⟨h.1.mono hts, mono (fun y hy ↦ ?_) h.2⟩\n  simp only [mfld_simps] at hy\n  simp only [hy, hts _, mfld_simps]\n\n"}
{"name":"StructureGroupoid.LocalInvariantProp.liftPropWithinAt_of_liftPropAt","module":"Mathlib.Geometry.Manifold.LocalInvariantProperties","initialProofState":"H : Type u_1\nM : Type u_2\nH' : Type u_3\nM' : Type u_4\ninst✝⁵ : TopologicalSpace H\ninst✝⁴ : TopologicalSpace M\ninst✝³ : ChartedSpace H M\ninst✝² : TopologicalSpace H'\ninst✝¹ : TopologicalSpace M'\ninst✝ : ChartedSpace H' M'\nP : (H → H') → Set H → H → Prop\ng : M → M'\ns : Set M\nx : M\nmono : ∀ ⦃s : Set H⦄ ⦃x : H⦄ ⦃t : Set H⦄ ⦃f : H → H'⦄, HasSubset.Subset t s → P f s x → P f t x\nh : ChartedSpace.LiftPropAt P g x\n⊢ ChartedSpace.LiftPropWithinAt P g s x","decl":"theorem liftPropWithinAt_of_liftPropAt (mono : ∀ ⦃s x t⦄ ⦃f : H → H'⦄, t ⊆ s → P f s x → P f t x)\n    (h : LiftPropAt P g x) : LiftPropWithinAt P g s x := by\n  rw [← liftPropWithinAt_univ] at h\n  exact liftPropWithinAt_mono mono h (subset_univ _)\n\n"}
{"name":"StructureGroupoid.LocalInvariantProp.liftPropOn_mono","module":"Mathlib.Geometry.Manifold.LocalInvariantProperties","initialProofState":"H : Type u_1\nM : Type u_2\nH' : Type u_3\nM' : Type u_4\ninst✝⁵ : TopologicalSpace H\ninst✝⁴ : TopologicalSpace M\ninst✝³ : ChartedSpace H M\ninst✝² : TopologicalSpace H'\ninst✝¹ : TopologicalSpace M'\ninst✝ : ChartedSpace H' M'\nP : (H → H') → Set H → H → Prop\ng : M → M'\ns t : Set M\nmono : ∀ ⦃s : Set H⦄ ⦃x : H⦄ ⦃t : Set H⦄ ⦃f : H → H'⦄, HasSubset.Subset t s → P f s x → P f t x\nh : ChartedSpace.LiftPropOn P g t\nhst : HasSubset.Subset s t\n⊢ ChartedSpace.LiftPropOn P g s","decl":"theorem liftPropOn_mono (mono : ∀ ⦃s x t⦄ ⦃f : H → H'⦄, t ⊆ s → P f s x → P f t x)\n    (h : LiftPropOn P g t) (hst : s ⊆ t) : LiftPropOn P g s :=\n  fun x hx ↦ liftPropWithinAt_mono mono (h x (hst hx)) hst\n\n"}
{"name":"StructureGroupoid.LocalInvariantProp.liftPropOn_of_liftProp","module":"Mathlib.Geometry.Manifold.LocalInvariantProperties","initialProofState":"H : Type u_1\nM : Type u_2\nH' : Type u_3\nM' : Type u_4\ninst✝⁵ : TopologicalSpace H\ninst✝⁴ : TopologicalSpace M\ninst✝³ : ChartedSpace H M\ninst✝² : TopologicalSpace H'\ninst✝¹ : TopologicalSpace M'\ninst✝ : ChartedSpace H' M'\nP : (H → H') → Set H → H → Prop\ng : M → M'\ns : Set M\nmono : ∀ ⦃s : Set H⦄ ⦃x : H⦄ ⦃t : Set H⦄ ⦃f : H → H'⦄, HasSubset.Subset t s → P f s x → P f t x\nh : ChartedSpace.LiftProp P g\n⊢ ChartedSpace.LiftPropOn P g s","decl":"theorem liftPropOn_of_liftProp (mono : ∀ ⦃s x t⦄ ⦃f : H → H'⦄, t ⊆ s → P f s x → P f t x)\n    (h : LiftProp P g) : LiftPropOn P g s := by\n  rw [← liftPropOn_univ] at h\n  exact liftPropOn_mono mono h (subset_univ _)\n\n"}
{"name":"StructureGroupoid.LocalInvariantProp.liftPropAt_of_mem_maximalAtlas","module":"Mathlib.Geometry.Manifold.LocalInvariantProperties","initialProofState":"H : Type u_1\nM : Type u_2\ninst✝³ : TopologicalSpace H\ninst✝² : TopologicalSpace M\ninst✝¹ : ChartedSpace H M\nG : StructureGroupoid H\ne : PartialHomeomorph M H\nx : M\nQ : (H → H) → Set H → H → Prop\ninst✝ : HasGroupoid M G\nhG : G.LocalInvariantProp G Q\nhQ : ∀ (y : H), Q id Set.univ y\nhe : Membership.mem (StructureGroupoid.maximalAtlas M G) e\nhx : Membership.mem e.source x\n⊢ ChartedSpace.LiftPropAt Q (↑e) x","decl":"theorem liftPropAt_of_mem_maximalAtlas [HasGroupoid M G] (hG : G.LocalInvariantProp G Q)\n    (hQ : ∀ y, Q id univ y) (he : e ∈ maximalAtlas M G) (hx : x ∈ e.source) : LiftPropAt Q e x := by\n  simp_rw [LiftPropAt, hG.liftPropWithinAt_indep_chart he hx G.id_mem_maximalAtlas (mem_univ _),\n    (e.continuousAt hx).continuousWithinAt, true_and]\n  exact hG.congr' (e.eventually_right_inverse' hx) (hQ _)\n\n"}
{"name":"StructureGroupoid.LocalInvariantProp.liftPropOn_of_mem_maximalAtlas","module":"Mathlib.Geometry.Manifold.LocalInvariantProperties","initialProofState":"H : Type u_1\nM : Type u_2\ninst✝³ : TopologicalSpace H\ninst✝² : TopologicalSpace M\ninst✝¹ : ChartedSpace H M\nG : StructureGroupoid H\ne : PartialHomeomorph M H\nQ : (H → H) → Set H → H → Prop\ninst✝ : HasGroupoid M G\nhG : G.LocalInvariantProp G Q\nhQ : ∀ (y : H), Q id Set.univ y\nhe : Membership.mem (StructureGroupoid.maximalAtlas M G) e\n⊢ ChartedSpace.LiftPropOn Q (↑e) e.source","decl":"theorem liftPropOn_of_mem_maximalAtlas [HasGroupoid M G] (hG : G.LocalInvariantProp G Q)\n    (hQ : ∀ y, Q id univ y) (he : e ∈ maximalAtlas M G) : LiftPropOn Q e e.source := by\n  intro x hx\n  apply hG.liftPropWithinAt_of_liftPropAt_of_mem_nhds (hG.liftPropAt_of_mem_maximalAtlas hQ he hx)\n  exact e.open_source.mem_nhds hx\n\n"}
{"name":"StructureGroupoid.LocalInvariantProp.liftPropAt_symm_of_mem_maximalAtlas","module":"Mathlib.Geometry.Manifold.LocalInvariantProperties","initialProofState":"H : Type u_1\nM : Type u_2\ninst✝³ : TopologicalSpace H\ninst✝² : TopologicalSpace M\ninst✝¹ : ChartedSpace H M\nG : StructureGroupoid H\ne : PartialHomeomorph M H\nQ : (H → H) → Set H → H → Prop\ninst✝ : HasGroupoid M G\nx : H\nhG : G.LocalInvariantProp G Q\nhQ : ∀ (y : H), Q id Set.univ y\nhe : Membership.mem (StructureGroupoid.maximalAtlas M G) e\nhx : Membership.mem e.target x\n⊢ ChartedSpace.LiftPropAt Q (↑e.symm) x","decl":"theorem liftPropAt_symm_of_mem_maximalAtlas [HasGroupoid M G] {x : H}\n    (hG : G.LocalInvariantProp G Q) (hQ : ∀ y, Q id univ y) (he : e ∈ maximalAtlas M G)\n    (hx : x ∈ e.target) : LiftPropAt Q e.symm x := by\n  suffices h : Q (e ∘ e.symm) univ x by\n    have : e.symm x ∈ e.source := by simp only [hx, mfld_simps]\n    rw [LiftPropAt, hG.liftPropWithinAt_indep_chart G.id_mem_maximalAtlas (mem_univ _) he this]\n    refine ⟨(e.symm.continuousAt hx).continuousWithinAt, ?_⟩\n    simp only [h, mfld_simps]\n  exact hG.congr' (e.eventually_right_inverse hx) (hQ x)\n\n"}
{"name":"StructureGroupoid.LocalInvariantProp.liftPropOn_symm_of_mem_maximalAtlas","module":"Mathlib.Geometry.Manifold.LocalInvariantProperties","initialProofState":"H : Type u_1\nM : Type u_2\ninst✝³ : TopologicalSpace H\ninst✝² : TopologicalSpace M\ninst✝¹ : ChartedSpace H M\nG : StructureGroupoid H\ne : PartialHomeomorph M H\nQ : (H → H) → Set H → H → Prop\ninst✝ : HasGroupoid M G\nhG : G.LocalInvariantProp G Q\nhQ : ∀ (y : H), Q id Set.univ y\nhe : Membership.mem (StructureGroupoid.maximalAtlas M G) e\n⊢ ChartedSpace.LiftPropOn Q (↑e.symm) e.target","decl":"theorem liftPropOn_symm_of_mem_maximalAtlas [HasGroupoid M G] (hG : G.LocalInvariantProp G Q)\n    (hQ : ∀ y, Q id univ y) (he : e ∈ maximalAtlas M G) : LiftPropOn Q e.symm e.target := by\n  intro x hx\n  apply hG.liftPropWithinAt_of_liftPropAt_of_mem_nhds\n    (hG.liftPropAt_symm_of_mem_maximalAtlas hQ he hx)\n  exact e.open_target.mem_nhds hx\n\n"}
{"name":"StructureGroupoid.LocalInvariantProp.liftPropAt_chart","module":"Mathlib.Geometry.Manifold.LocalInvariantProperties","initialProofState":"H : Type u_1\nM : Type u_2\ninst✝³ : TopologicalSpace H\ninst✝² : TopologicalSpace M\ninst✝¹ : ChartedSpace H M\nG : StructureGroupoid H\nx : M\nQ : (H → H) → Set H → H → Prop\ninst✝ : HasGroupoid M G\nhG : G.LocalInvariantProp G Q\nhQ : ∀ (y : H), Q id Set.univ y\n⊢ ChartedSpace.LiftPropAt Q (↑(chartAt H x)) x","decl":"theorem liftPropAt_chart [HasGroupoid M G] (hG : G.LocalInvariantProp G Q) (hQ : ∀ y, Q id univ y) :\n    LiftPropAt Q (chartAt (H := H) x) x :=\n  hG.liftPropAt_of_mem_maximalAtlas hQ (chart_mem_maximalAtlas G x) (mem_chart_source H x)\n\n"}
{"name":"StructureGroupoid.LocalInvariantProp.liftPropOn_chart","module":"Mathlib.Geometry.Manifold.LocalInvariantProperties","initialProofState":"H : Type u_1\nM : Type u_2\ninst✝³ : TopologicalSpace H\ninst✝² : TopologicalSpace M\ninst✝¹ : ChartedSpace H M\nG : StructureGroupoid H\nx : M\nQ : (H → H) → Set H → H → Prop\ninst✝ : HasGroupoid M G\nhG : G.LocalInvariantProp G Q\nhQ : ∀ (y : H), Q id Set.univ y\n⊢ ChartedSpace.LiftPropOn Q (↑(chartAt H x)) (chartAt H x).source","decl":"theorem liftPropOn_chart [HasGroupoid M G] (hG : G.LocalInvariantProp G Q) (hQ : ∀ y, Q id univ y) :\n    LiftPropOn Q (chartAt (H := H) x) (chartAt (H := H) x).source :=\n  hG.liftPropOn_of_mem_maximalAtlas hQ (chart_mem_maximalAtlas G x)\n\n"}
{"name":"StructureGroupoid.LocalInvariantProp.liftPropAt_chart_symm","module":"Mathlib.Geometry.Manifold.LocalInvariantProperties","initialProofState":"H : Type u_1\nM : Type u_2\ninst✝³ : TopologicalSpace H\ninst✝² : TopologicalSpace M\ninst✝¹ : ChartedSpace H M\nG : StructureGroupoid H\nx : M\nQ : (H → H) → Set H → H → Prop\ninst✝ : HasGroupoid M G\nhG : G.LocalInvariantProp G Q\nhQ : ∀ (y : H), Q id Set.univ y\n⊢ ChartedSpace.LiftPropAt Q (↑(chartAt H x).symm) (↑(chartAt H x) x)","decl":"theorem liftPropAt_chart_symm [HasGroupoid M G] (hG : G.LocalInvariantProp G Q)\n    (hQ : ∀ y, Q id univ y) : LiftPropAt Q (chartAt (H := H) x).symm ((chartAt H x) x) :=\n  hG.liftPropAt_symm_of_mem_maximalAtlas hQ (chart_mem_maximalAtlas G x) (by simp)\n\n"}
{"name":"StructureGroupoid.LocalInvariantProp.liftPropOn_chart_symm","module":"Mathlib.Geometry.Manifold.LocalInvariantProperties","initialProofState":"H : Type u_1\nM : Type u_2\ninst✝³ : TopologicalSpace H\ninst✝² : TopologicalSpace M\ninst✝¹ : ChartedSpace H M\nG : StructureGroupoid H\nx : M\nQ : (H → H) → Set H → H → Prop\ninst✝ : HasGroupoid M G\nhG : G.LocalInvariantProp G Q\nhQ : ∀ (y : H), Q id Set.univ y\n⊢ ChartedSpace.LiftPropOn Q (↑(chartAt H x).symm) (chartAt H x).target","decl":"theorem liftPropOn_chart_symm [HasGroupoid M G] (hG : G.LocalInvariantProp G Q)\n    (hQ : ∀ y, Q id univ y) : LiftPropOn Q (chartAt (H := H) x).symm (chartAt H x).target :=\n  hG.liftPropOn_symm_of_mem_maximalAtlas hQ (chart_mem_maximalAtlas G x)\n\n"}
{"name":"StructureGroupoid.LocalInvariantProp.liftPropAt_of_mem_groupoid","module":"Mathlib.Geometry.Manifold.LocalInvariantProperties","initialProofState":"H : Type u_1\ninst✝ : TopologicalSpace H\nG : StructureGroupoid H\nQ : (H → H) → Set H → H → Prop\nhG : G.LocalInvariantProp G Q\nhQ : ∀ (y : H), Q id Set.univ y\nf : PartialHomeomorph H H\nhf : Membership.mem G f\nx : H\nhx : Membership.mem f.source x\n⊢ ChartedSpace.LiftPropAt Q (↑f) x","decl":"theorem liftPropAt_of_mem_groupoid (hG : G.LocalInvariantProp G Q) (hQ : ∀ y, Q id univ y)\n    {f : PartialHomeomorph H H} (hf : f ∈ G) {x : H} (hx : x ∈ f.source) : LiftPropAt Q f x :=\n  liftPropAt_of_mem_maximalAtlas hG hQ (G.mem_maximalAtlas_of_mem_groupoid hf) hx\n\n"}
{"name":"StructureGroupoid.LocalInvariantProp.liftPropOn_of_mem_groupoid","module":"Mathlib.Geometry.Manifold.LocalInvariantProperties","initialProofState":"H : Type u_1\ninst✝ : TopologicalSpace H\nG : StructureGroupoid H\nQ : (H → H) → Set H → H → Prop\nhG : G.LocalInvariantProp G Q\nhQ : ∀ (y : H), Q id Set.univ y\nf : PartialHomeomorph H H\nhf : Membership.mem G f\n⊢ ChartedSpace.LiftPropOn Q (↑f) f.source","decl":"theorem liftPropOn_of_mem_groupoid (hG : G.LocalInvariantProp G Q) (hQ : ∀ y, Q id univ y)\n    {f : PartialHomeomorph H H} (hf : f ∈ G) : LiftPropOn Q f f.source :=\n  liftPropOn_of_mem_maximalAtlas hG hQ (G.mem_maximalAtlas_of_mem_groupoid hf)\n\n"}
{"name":"StructureGroupoid.LocalInvariantProp.liftProp_id","module":"Mathlib.Geometry.Manifold.LocalInvariantProperties","initialProofState":"H : Type u_1\nM : Type u_2\ninst✝² : TopologicalSpace H\ninst✝¹ : TopologicalSpace M\ninst✝ : ChartedSpace H M\nG : StructureGroupoid H\nQ : (H → H) → Set H → H → Prop\nhG : G.LocalInvariantProp G Q\nhQ : ∀ (y : H), Q id Set.univ y\n⊢ ChartedSpace.LiftProp Q id","decl":"theorem liftProp_id (hG : G.LocalInvariantProp G Q) (hQ : ∀ y, Q id univ y) :\n    LiftProp Q (id : M → M) := by\n  simp_rw [liftProp_iff, continuous_id, true_and]\n  exact fun x ↦ hG.congr' ((chartAt H x).eventually_right_inverse <| mem_chart_target H x) (hQ _)\n\n"}
{"name":"StructureGroupoid.LocalInvariantProp.liftPropAt_iff_comp_subtype_val","module":"Mathlib.Geometry.Manifold.LocalInvariantProperties","initialProofState":"H : Type u_1\nM : Type u_2\nH' : Type u_3\nM' : Type u_4\ninst✝⁵ : TopologicalSpace H\ninst✝⁴ : TopologicalSpace M\ninst✝³ : ChartedSpace H M\ninst✝² : TopologicalSpace H'\ninst✝¹ : TopologicalSpace M'\ninst✝ : ChartedSpace H' M'\nG : StructureGroupoid H\nG' : StructureGroupoid H'\nP : (H → H') → Set H → H → Prop\nhG : G.LocalInvariantProp G' P\nU : TopologicalSpace.Opens M\nf : M → M'\nx : Subtype fun x => Membership.mem U x\n⊢ Iff (ChartedSpace.LiftPropAt P f ↑x) (ChartedSpace.LiftPropAt P (Function.comp f Subtype.val) x)","decl":"theorem liftPropAt_iff_comp_subtype_val (hG : LocalInvariantProp G G' P) {U : Opens M}\n    (f : M → M') (x : U) :\n    LiftPropAt P f x ↔ LiftPropAt P (f ∘ Subtype.val) x := by\n  simp only [LiftPropAt, liftPropWithinAt_iff']\n  congrm ?_ ∧ ?_\n  · simp_rw [continuousWithinAt_univ, U.isOpenEmbedding'.continuousAt_iff]\n  · apply hG.congr_iff\n    exact (U.chartAt_subtype_val_symm_eventuallyEq).fun_comp (chartAt H' (f x) ∘ f)\n\n"}
{"name":"StructureGroupoid.LocalInvariantProp.liftPropAt_iff_comp_inclusion","module":"Mathlib.Geometry.Manifold.LocalInvariantProperties","initialProofState":"H : Type u_1\nM : Type u_2\nH' : Type u_3\nM' : Type u_4\ninst✝⁵ : TopologicalSpace H\ninst✝⁴ : TopologicalSpace M\ninst✝³ : ChartedSpace H M\ninst✝² : TopologicalSpace H'\ninst✝¹ : TopologicalSpace M'\ninst✝ : ChartedSpace H' M'\nG : StructureGroupoid H\nG' : StructureGroupoid H'\nP : (H → H') → Set H → H → Prop\nhG : G.LocalInvariantProp G' P\nU V : TopologicalSpace.Opens M\nhUV : LE.le U V\nf : (Subtype fun x => Membership.mem V x) → M'\nx : Subtype fun x => Membership.mem U x\n⊢ Iff (ChartedSpace.LiftPropAt P f (Set.inclusion hUV x)) (ChartedSpace.LiftPropAt P (Function.comp f (Set.inclusion hUV)) x)","decl":"theorem liftPropAt_iff_comp_inclusion (hG : LocalInvariantProp G G' P) {U V : Opens M} (hUV : U ≤ V)\n    (f : V → M') (x : U) :\n    LiftPropAt P f (Set.inclusion hUV x) ↔ LiftPropAt P (f ∘ Set.inclusion hUV : U → M') x := by\n  simp only [LiftPropAt, liftPropWithinAt_iff']\n  congrm ?_ ∧ ?_\n  · simp_rw [continuousWithinAt_univ,\n      (TopologicalSpace.Opens.isOpenEmbedding_of_le hUV).continuousAt_iff]\n  · apply hG.congr_iff\n    exact (TopologicalSpace.Opens.chartAt_inclusion_symm_eventuallyEq hUV).fun_comp\n      (chartAt H' (f (Set.inclusion hUV x)) ∘ f)\n\n"}
{"name":"StructureGroupoid.LocalInvariantProp.liftProp_subtype_val","module":"Mathlib.Geometry.Manifold.LocalInvariantProperties","initialProofState":"H : Type u_1\nM : Type u_2\ninst✝² : TopologicalSpace H\ninst✝¹ : TopologicalSpace M\ninst✝ : ChartedSpace H M\nG : StructureGroupoid H\nQ : (H → H) → Set H → H → Prop\nhG : G.LocalInvariantProp G Q\nhQ : ∀ (y : H), Q id Set.univ y\nU : TopologicalSpace.Opens M\n⊢ ChartedSpace.LiftProp Q Subtype.val","decl":"theorem liftProp_subtype_val {Q : (H → H) → Set H → H → Prop} (hG : LocalInvariantProp G G Q)\n    (hQ : ∀ y, Q id univ y) (U : Opens M) :\n    LiftProp Q (Subtype.val : U → M) := by\n  intro x\n  show LiftPropAt Q (id ∘ Subtype.val) x\n  rw [← hG.liftPropAt_iff_comp_subtype_val]\n  apply hG.liftProp_id hQ\n\n"}
{"name":"StructureGroupoid.LocalInvariantProp.liftProp_inclusion","module":"Mathlib.Geometry.Manifold.LocalInvariantProperties","initialProofState":"H : Type u_1\nM : Type u_2\ninst✝² : TopologicalSpace H\ninst✝¹ : TopologicalSpace M\ninst✝ : ChartedSpace H M\nG : StructureGroupoid H\nQ : (H → H) → Set H → H → Prop\nhG : G.LocalInvariantProp G Q\nhQ : ∀ (y : H), Q id Set.univ y\nU V : TopologicalSpace.Opens M\nhUV : LE.le U V\n⊢ ChartedSpace.LiftProp Q (TopologicalSpace.Opens.inclusion hUV)","decl":"theorem liftProp_inclusion {Q : (H → H) → Set H → H → Prop} (hG : LocalInvariantProp G G Q)\n    (hQ : ∀ y, Q id univ y) {U V : Opens M} (hUV : U ≤ V) :\n    LiftProp Q (Opens.inclusion hUV : U → V) := by\n  intro x\n  show LiftPropAt Q (id ∘ Opens.inclusion hUV) x\n  rw [← hG.liftPropAt_iff_comp_inclusion hUV]\n  apply hG.liftProp_id hQ\n\n"}
{"name":"StructureGroupoid.isLocalStructomorphWithinAt_localInvariantProp","module":"Mathlib.Geometry.Manifold.LocalInvariantProperties","initialProofState":"H : Type u_1\ninst✝¹ : TopologicalSpace H\nG : StructureGroupoid H\ninst✝ : ClosedUnderRestriction G\n⊢ G.LocalInvariantProp G G.IsLocalStructomorphWithinAt","decl":"/-- For a groupoid `G` which is `ClosedUnderRestriction`, being a local structomorphism is a local\ninvariant property. -/\ntheorem isLocalStructomorphWithinAt_localInvariantProp [ClosedUnderRestriction G] :\n    LocalInvariantProp G G (IsLocalStructomorphWithinAt G) :=\n  { is_local := by\n      intro s x u f hu hux\n      constructor\n      · rintro h hx\n        rcases h hx.1 with ⟨e, heG, hef, hex⟩\n        have : s ∩ u ∩ e.source ⊆ s ∩ e.source := by mfld_set_tac\n        exact ⟨e, heG, hef.mono this, hex⟩\n      · rintro h hx\n        rcases h ⟨hx, hux⟩ with ⟨e, heG, hef, hex⟩\n        refine ⟨e.restr (interior u), ?_, ?_, ?_⟩\n        · exact closedUnderRestriction' heG isOpen_interior\n        · have : s ∩ u ∩ e.source = s ∩ (e.source ∩ u) := by mfld_set_tac\n          simpa only [this, interior_interior, hu.interior_eq, mfld_simps] using hef\n        · simp only [*, interior_interior, hu.interior_eq, mfld_simps]\n    right_invariance' := by\n      intro s x f e' he'G he'x h hx\n      have hxs : x ∈ s := by simpa only [e'.left_inv he'x, mfld_simps] using hx\n      rcases h hxs with ⟨e, heG, hef, hex⟩\n      refine ⟨e'.symm.trans e, G.trans (G.symm he'G) heG, ?_, ?_⟩\n      · intro y hy\n        simp only [mfld_simps] at hy\n        simp only [hef ⟨hy.1, hy.2.2⟩, mfld_simps]\n      · simp only [hex, he'x, mfld_simps]\n    congr_of_forall := by\n      intro s x f g hfgs _ h hx\n      rcases h hx with ⟨e, heG, hef, hex⟩\n      refine ⟨e, heG, ?_, hex⟩\n      intro y hy\n      rw [← hef hy, hfgs y hy.1]\n    left_invariance' := by\n      intro s x f e' he'G _ hfx h hx\n      rcases h hx with ⟨e, heG, hef, hex⟩\n      refine ⟨e.trans e', G.trans heG he'G, ?_, ?_⟩\n      · intro y hy\n        simp only [mfld_simps] at hy\n        simp only [hef ⟨hy.1, hy.2.1⟩, mfld_simps]\n      · simpa only [hex, hef ⟨hx, hex⟩, mfld_simps] using hfx }\n\n"}
{"name":"PartialHomeomorph.isLocalStructomorphWithinAt_iff","module":"Mathlib.Geometry.Manifold.LocalInvariantProperties","initialProofState":"H : Type u_1\ninst✝¹ : TopologicalSpace H\nG : StructureGroupoid H\ninst✝ : ClosedUnderRestriction G\nf : PartialHomeomorph H H\ns : Set H\nx : H\nhx : Membership.mem (Union.union f.source (HasCompl.compl s)) x\n⊢ Iff (G.IsLocalStructomorphWithinAt (↑f) s x) (Membership.mem s x → Exists fun e => And (Membership.mem G e) (And (HasSubset.Subset e.source f.source) (And (Set.EqOn (↑f) (↑e) (Inter.inter s e.source)) (Membership.mem e.source x))))","decl":"/-- A slight reformulation of `IsLocalStructomorphWithinAt` when `f` is a partial homeomorph.\n  This gives us an `e` that is defined on a subset of `f.source`. -/\ntheorem _root_.PartialHomeomorph.isLocalStructomorphWithinAt_iff {G : StructureGroupoid H}\n    [ClosedUnderRestriction G] (f : PartialHomeomorph H H) {s : Set H} {x : H}\n    (hx : x ∈ f.source ∪ sᶜ) :\n    G.IsLocalStructomorphWithinAt (⇑f) s x ↔\n      x ∈ s → ∃ e : PartialHomeomorph H H,\n      e ∈ G ∧ e.source ⊆ f.source ∧ EqOn f (⇑e) (s ∩ e.source) ∧ x ∈ e.source := by\n  constructor\n  · intro hf h2x\n    obtain ⟨e, he, hfe, hxe⟩ := hf h2x\n    refine ⟨e.restr f.source, closedUnderRestriction' he f.open_source, ?_, ?_, hxe, ?_⟩\n    · simp_rw [PartialHomeomorph.restr_source]\n      exact inter_subset_right.trans interior_subset\n    · intro x' hx'\n      exact hfe ⟨hx'.1, hx'.2.1⟩\n    · rw [f.open_source.interior_eq]\n      exact Or.resolve_right hx (not_not.mpr h2x)\n  · intro hf hx\n    obtain ⟨e, he, _, hfe, hxe⟩ := hf hx\n    exact ⟨e, he, hfe, hxe⟩\n\n"}
{"name":"PartialHomeomorph.isLocalStructomorphWithinAt_iff'","module":"Mathlib.Geometry.Manifold.LocalInvariantProperties","initialProofState":"H : Type u_1\ninst✝¹ : TopologicalSpace H\nG : StructureGroupoid H\ninst✝ : ClosedUnderRestriction G\nf : PartialHomeomorph H H\ns : Set H\nx : H\nhs : HasSubset.Subset f.source s\nhx : Membership.mem (Union.union f.source (HasCompl.compl s)) x\n⊢ Iff (G.IsLocalStructomorphWithinAt (↑f) s x) (Membership.mem s x → Exists fun e => And (Membership.mem G e) (And (HasSubset.Subset e.source f.source) (And (Set.EqOn (↑f) (↑e) e.source) (Membership.mem e.source x))))","decl":"/-- A slight reformulation of `IsLocalStructomorphWithinAt` when `f` is a partial homeomorph and\n  the set we're considering is a superset of `f.source`. -/\ntheorem _root_.PartialHomeomorph.isLocalStructomorphWithinAt_iff' {G : StructureGroupoid H}\n    [ClosedUnderRestriction G] (f : PartialHomeomorph H H) {s : Set H} {x : H} (hs : f.source ⊆ s)\n    (hx : x ∈ f.source ∪ sᶜ) :\n    G.IsLocalStructomorphWithinAt (⇑f) s x ↔\n      x ∈ s → ∃ e : PartialHomeomorph H H,\n      e ∈ G ∧ e.source ⊆ f.source ∧ EqOn f (⇑e) e.source ∧ x ∈ e.source := by\n  rw [f.isLocalStructomorphWithinAt_iff hx]\n  refine imp_congr_right fun _ ↦ exists_congr fun e ↦ and_congr_right fun _ ↦ ?_\n  refine and_congr_right fun h2e ↦ ?_\n  rw [inter_eq_right.mpr (h2e.trans hs)]\n\n"}
{"name":"PartialHomeomorph.isLocalStructomorphWithinAt_source_iff","module":"Mathlib.Geometry.Manifold.LocalInvariantProperties","initialProofState":"H : Type u_1\ninst✝¹ : TopologicalSpace H\nG : StructureGroupoid H\ninst✝ : ClosedUnderRestriction G\nf : PartialHomeomorph H H\nx : H\n⊢ Iff (G.IsLocalStructomorphWithinAt (↑f) f.source x) (Membership.mem f.source x → Exists fun e => And (Membership.mem G e) (And (HasSubset.Subset e.source f.source) (And (Set.EqOn (↑f) (↑e) e.source) (Membership.mem e.source x))))","decl":"/-- A slight reformulation of `IsLocalStructomorphWithinAt` when `f` is a partial homeomorph and\n  the set we're considering is `f.source`. -/\ntheorem _root_.PartialHomeomorph.isLocalStructomorphWithinAt_source_iff {G : StructureGroupoid H}\n    [ClosedUnderRestriction G] (f : PartialHomeomorph H H) {x : H} :\n    G.IsLocalStructomorphWithinAt (⇑f) f.source x ↔\n      x ∈ f.source → ∃ e : PartialHomeomorph H H,\n      e ∈ G ∧ e.source ⊆ f.source ∧ EqOn f (⇑e) e.source ∧ x ∈ e.source :=\n  haveI : x ∈ f.source ∪ f.sourceᶜ := by simp_rw [union_compl_self, mem_univ]\n  f.isLocalStructomorphWithinAt_iff' Subset.rfl this\n\n"}
{"name":"StructureGroupoid.HasGroupoid.comp","module":"Mathlib.Geometry.Manifold.LocalInvariantProperties","initialProofState":"H₁ : Type u_6\ninst✝⁷ : TopologicalSpace H₁\nH₂ : Type u_7\ninst✝⁶ : TopologicalSpace H₂\nH₃ : Type u_8\ninst✝⁵ : TopologicalSpace H₃\ninst✝⁴ : ChartedSpace H₁ H₂\ninst✝³ : ChartedSpace H₂ H₃\nG₁ : StructureGroupoid H₁\ninst✝² : HasGroupoid H₂ G₁\ninst✝¹ : ClosedUnderRestriction G₁\nG₂ : StructureGroupoid H₂\ninst✝ : HasGroupoid H₃ G₂\nH : ∀ (e : PartialHomeomorph H₂ H₂), Membership.mem G₂ e → ChartedSpace.LiftPropOn G₁.IsLocalStructomorphWithinAt (↑e) e.source\n⊢ HasGroupoid H₃ G₁","decl":"theorem HasGroupoid.comp\n    (H : ∀ e ∈ G₂, LiftPropOn (IsLocalStructomorphWithinAt G₁) (e : H₂ → H₂) e.source) :\n    @HasGroupoid H₁ _ H₃ _ (ChartedSpace.comp H₁ H₂ H₃) G₁ :=\n  let _ := ChartedSpace.comp H₁ H₂ H₃ -- Porting note: need this to synthesize `ChartedSpace H₁ H₃`\n  { compatible := by\n      rintro _ _ ⟨e, he, f, hf, rfl⟩ ⟨e', he', f', hf', rfl⟩\n      apply G₁.locality\n      intro x hx\n      simp only [mfld_simps] at hx\n      have hxs : x ∈ f.symm ⁻¹' (e.symm ≫ₕ e').source := by simp only [hx, mfld_simps]\n      have hxs' : x ∈ f.target ∩ f.symm ⁻¹' ((e.symm ≫ₕ e').source ∩ e.symm ≫ₕ e' ⁻¹' f'.source) :=\n        by simp only [hx, mfld_simps]\n      obtain ⟨φ, hφG₁, hφ, hφ_dom⟩ := LocalInvariantProp.liftPropOn_indep_chart\n        (isLocalStructomorphWithinAt_localInvariantProp G₁) (G₁.subset_maximalAtlas hf)\n        (G₁.subset_maximalAtlas hf') (H _ (G₂.compatible he he')) hxs' hxs\n      simp_rw [← PartialHomeomorph.coe_trans, PartialHomeomorph.trans_assoc] at hφ\n      simp_rw [PartialHomeomorph.trans_symm_eq_symm_trans_symm, PartialHomeomorph.trans_assoc]\n      have hs : IsOpen (f.symm ≫ₕ e.symm ≫ₕ e' ≫ₕ f').source :=\n        (f.symm ≫ₕ e.symm ≫ₕ e' ≫ₕ f').open_source\n      refine ⟨_, hs.inter φ.open_source, ?_, ?_⟩\n      · simp only [hx, hφ_dom, mfld_simps]\n      · refine G₁.mem_of_eqOnSource (closedUnderRestriction' hφG₁ hs) ?_\n        rw [PartialHomeomorph.restr_source_inter]\n        refine PartialHomeomorph.Set.EqOn.restr_eqOn_source (hφ.mono ?_)\n        mfld_set_tac }\n\n"}
