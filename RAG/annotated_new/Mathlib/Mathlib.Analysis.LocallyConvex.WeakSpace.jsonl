{"name":"Convex.toWeakSpace_closure","module":"Mathlib.Analysis.LocallyConvex.WeakSpace","initialProofState":"ğ•œ : Type u_1\nE : Type u_2\ninstâœâ¸ : RCLike ğ•œ\ninstâœâ· : AddCommGroup E\ninstâœâ¶ : Module ğ•œ E\ninstâœâµ : Module Real E\ninstâœâ´ : IsScalarTower Real ğ•œ E\ninstâœÂ³ : TopologicalSpace E\ninstâœÂ² : TopologicalAddGroup E\ninstâœÂ¹ : ContinuousSMul ğ•œ E\ninstâœ : LocallyConvexSpace Real E\ns : Set E\nhs : Convex Real s\nâŠ¢ Eq (Set.image (â‡‘(toWeakSpace ğ•œ E)) (closure s)) (closure (Set.image (â‡‘(toWeakSpace ğ•œ E)) s))","decl":"variable (ğ•œ) in\n/-- If `E` is a locally convex space over `ğ•œ` (with `RCLike ğ•œ`), and `s : Set E` is `â„`-convex, then\nthe closure of `s` and the weak closure of `s` coincide. More precisely, the topological closure\ncommutes with `toWeakSpace ğ•œ E`.\n\nThis holds more generally for any linear equivalence `e : E â‰ƒâ‚—[ğ•œ] F` between locally convex spaces\nsuch that precomposition with `e` and `e.symm` preserves continuity of linear functionals. See\n`LinearEquiv.image_closure_of_convex`. -/\ntheorem Convex.toWeakSpace_closure {s : Set E} (hs : Convex â„ s) :\n    (toWeakSpace ğ•œ E) '' (closure s) = closure (toWeakSpace ğ•œ E '' s) := by\n  refine le_antisymm (map_continuous <| toWeakSpaceCLM ğ•œ E).continuousOn.image_closure\n    (Set.compl_subset_compl.mp fun x hx â†¦ ?_)\n  obtain âŸ¨x, -, rflâŸ© := (toWeakSpace ğ•œ E).toEquiv.image_compl (closure s) |>.symm.subset hx\n  have : ContinuousSMul â„ E := IsScalarTower.continuousSMul ğ•œ\n  obtain âŸ¨f, u, hus, huxâŸ© := RCLike.geometric_hahn_banach_closed_point (ğ•œ := ğ•œ)\n    hs.closure isClosed_closure (by simpa using hx)\n  let f' : WeakSpace ğ•œ E â†’L[ğ•œ] ğ•œ :=\n    { toLinearMap := (f : E â†’â‚—[ğ•œ] ğ•œ).comp ((toWeakSpace ğ•œ E).symm : WeakSpace ğ•œ E â†’â‚—[ğ•œ] E)\n      cont := WeakBilin.eval_continuous (topDualPairing ğ•œ E).flip _ }\n  have hux' : u < RCLike.reCLM.comp (f'.restrictScalars â„) (toWeakSpace ğ•œ E x) := by simpa [f']\n  have hus' : closure (toWeakSpace ğ•œ E '' s) âŠ†\n      {y | RCLike.reCLM.comp (f'.restrictScalars â„) y â‰¤ u} := by\n    refine closure_minimal ?_ <| isClosed_le (by fun_prop) (by fun_prop)\n    rintro - âŸ¨y, hy, rflâŸ©\n    simpa [f'] using (hus y <| subset_closure hy).le\n  exact (hux'.not_le <| hus' Â·)\n\n"}
{"name":"LinearMap.image_closure_of_convex","module":"Mathlib.Analysis.LocallyConvex.WeakSpace","initialProofState":"ğ•œ : Type u_1\nE : Type u_2\nF : Type u_3\ninstâœÂ¹â¶ : RCLike ğ•œ\ninstâœÂ¹âµ : AddCommGroup E\ninstâœÂ¹â´ : Module ğ•œ E\ninstâœÂ¹Â³ : AddCommGroup F\ninstâœÂ¹Â² : Module ğ•œ F\ninstâœÂ¹Â¹ : Module Real E\ninstâœÂ¹â° : IsScalarTower Real ğ•œ E\ninstâœâ¹ : Module Real F\ninstâœâ¸ : IsScalarTower Real ğ•œ F\ninstâœâ· : TopologicalSpace E\ninstâœâ¶ : TopologicalAddGroup E\ninstâœâµ : ContinuousSMul ğ•œ E\ninstâœâ´ : LocallyConvexSpace Real E\ninstâœÂ³ : TopologicalSpace F\ninstâœÂ² : TopologicalAddGroup F\ninstâœÂ¹ : ContinuousSMul ğ•œ F\ninstâœ : LocallyConvexSpace Real F\ns : Set E\nhs : Convex Real s\ne : LinearMap (RingHom.id ğ•œ) E F\nhe : âˆ€ (f : ContinuousLinearMap (RingHom.id ğ•œ) F ğ•œ), Continuous â‡‘(e.dualMap â†‘f)\nâŠ¢ HasSubset.Subset (Set.image (â‡‘e) (closure s)) (closure (Set.image (â‡‘e) s))","decl":"/-- If `e : E â†’â‚—[ğ•œ] F` is a linear map between locally convex spaces, and `f âˆ˜ e` is continuous\nfor every continuous linear functional `f : F â†’L[ğ•œ] ğ•œ`, then `e` commutes with the closure on\nconvex sets. -/\ntheorem LinearMap.image_closure_of_convex {s : Set E} (hs : Convex â„ s) (e : E â†’â‚—[ğ•œ] F)\n    (he : âˆ€ f : F â†’L[ğ•œ] ğ•œ, Continuous (e.dualMap f)) :\n    e '' (closure s) âŠ† closure (e '' s) := by\n  suffices he' : Continuous (toWeakSpace ğ•œ F <| e <| (toWeakSpace ğ•œ E).symm Â·) by\n    have h_convex : Convex â„ (e '' s) := hs.linear_image (F := F) e\n    rw [â† Set.image_subset_image_iff (toWeakSpace ğ•œ F).injective, h_convex.toWeakSpace_closure ğ•œ]\n    simpa only [Set.image_image, â† hs.toWeakSpace_closure ğ•œ, LinearEquiv.symm_apply_apply]\n      using he'.continuousOn.image_closure (s := toWeakSpace ğ•œ E '' s)\n  exact WeakBilin.continuous_of_continuous_eval _ fun f â†¦\n    WeakBilin.eval_continuous _ { toLinearMap := e.dualMap f : E â†’L[ğ•œ] ğ•œ }\n\n"}
{"name":"LinearEquiv.image_closure_of_convex","module":"Mathlib.Analysis.LocallyConvex.WeakSpace","initialProofState":"ğ•œ : Type u_1\nE : Type u_2\nF : Type u_3\ninstâœÂ¹â¶ : RCLike ğ•œ\ninstâœÂ¹âµ : AddCommGroup E\ninstâœÂ¹â´ : Module ğ•œ E\ninstâœÂ¹Â³ : AddCommGroup F\ninstâœÂ¹Â² : Module ğ•œ F\ninstâœÂ¹Â¹ : Module Real E\ninstâœÂ¹â° : IsScalarTower Real ğ•œ E\ninstâœâ¹ : Module Real F\ninstâœâ¸ : IsScalarTower Real ğ•œ F\ninstâœâ· : TopologicalSpace E\ninstâœâ¶ : TopologicalAddGroup E\ninstâœâµ : ContinuousSMul ğ•œ E\ninstâœâ´ : LocallyConvexSpace Real E\ninstâœÂ³ : TopologicalSpace F\ninstâœÂ² : TopologicalAddGroup F\ninstâœÂ¹ : ContinuousSMul ğ•œ F\ninstâœ : LocallyConvexSpace Real F\ns : Set E\nhs : Convex Real s\ne : LinearEquiv (RingHom.id ğ•œ) E F\nheâ‚ : âˆ€ (f : ContinuousLinearMap (RingHom.id ğ•œ) F ğ•œ), Continuous â‡‘(e.dualMap â†‘f)\nheâ‚‚ : âˆ€ (f : ContinuousLinearMap (RingHom.id ğ•œ) E ğ•œ), Continuous â‡‘(e.symm.dualMap â†‘f)\nâŠ¢ Eq (Set.image (â‡‘e) (closure s)) (closure (Set.image (â‡‘e) s))","decl":"/-- If `e` is a linear isomorphism between two locally convex spaces, and `e` induces (via\nprecomposition) an isomorphism between their continuous duals, then `e` commutes with the closure\non convex sets.\n\nThe hypotheses hold automatically for `e := toWeakSpace ğ•œ E`, see `Convex.toWeakSpace_closure`. -/\ntheorem LinearEquiv.image_closure_of_convex {s : Set E} (hs : Convex â„ s) (e : E â‰ƒâ‚—[ğ•œ] F)\n    (heâ‚ : âˆ€ f : F â†’L[ğ•œ] ğ•œ, Continuous (e.dualMap f))\n    (heâ‚‚ : âˆ€ f : E â†’L[ğ•œ] ğ•œ, Continuous (e.symm.dualMap f)) :\n    e '' (closure s) = closure (e '' s) := by\n  refine le_antisymm ((e : E â†’â‚—[ğ•œ] F).image_closure_of_convex hs heâ‚) ?_\n  simp only [Set.le_eq_subset, â† Set.image_subset_image_iff e.symm.injective]\n  simpa [Set.image_image]\n    using (e.symm : F â†’â‚—[ğ•œ] E).image_closure_of_convex (hs.linear_image (e : E â†’â‚—[ğ•œ] F)) heâ‚‚\n\n"}
{"name":"LinearEquiv.image_closure_of_convex'","module":"Mathlib.Analysis.LocallyConvex.WeakSpace","initialProofState":"ğ•œ : Type u_1\nE : Type u_2\nF : Type u_3\ninstâœÂ¹â¶ : RCLike ğ•œ\ninstâœÂ¹âµ : AddCommGroup E\ninstâœÂ¹â´ : Module ğ•œ E\ninstâœÂ¹Â³ : AddCommGroup F\ninstâœÂ¹Â² : Module ğ•œ F\ninstâœÂ¹Â¹ : Module Real E\ninstâœÂ¹â° : IsScalarTower Real ğ•œ E\ninstâœâ¹ : Module Real F\ninstâœâ¸ : IsScalarTower Real ğ•œ F\ninstâœâ· : TopologicalSpace E\ninstâœâ¶ : TopologicalAddGroup E\ninstâœâµ : ContinuousSMul ğ•œ E\ninstâœâ´ : LocallyConvexSpace Real E\ninstâœÂ³ : TopologicalSpace F\ninstâœÂ² : TopologicalAddGroup F\ninstâœÂ¹ : ContinuousSMul ğ•œ F\ninstâœ : LocallyConvexSpace Real F\ns : Set E\nhs : Convex Real s\ne : LinearEquiv (RingHom.id ğ•œ) E F\ne_dual : Equiv (ContinuousLinearMap (RingHom.id ğ•œ) F ğ•œ) (ContinuousLinearMap (RingHom.id ğ•œ) E ğ•œ)\nhe : âˆ€ (f : ContinuousLinearMap (RingHom.id ğ•œ) F ğ•œ), Eq (â†‘(e_dual f)) (e.dualMap â†‘f)\nâŠ¢ Eq (Set.image (â‡‘e) (closure s)) (closure (Set.image (â‡‘e) s))","decl":"/-- If `e` is a linear isomorphism between two locally convex spaces, and `e` induces (via\nprecomposition) an isomorphism between their continuous duals, then `e` commutes with the closure\non convex sets.\n\nThe hypotheses hold automatically for `e := toWeakSpace ğ•œ E`, see `Convex.toWeakSpace_closure`. -/\ntheorem LinearEquiv.image_closure_of_convex' {s : Set E} (hs : Convex â„ s) (e : E â‰ƒâ‚—[ğ•œ] F)\n    (e_dual : (F â†’L[ğ•œ] ğ•œ) â‰ƒ (E â†’L[ğ•œ] ğ•œ))\n    (he : âˆ€ f : F â†’L[ğ•œ] ğ•œ, (e_dual f : E â†’â‚—[ğ•œ] ğ•œ) = e.dualMap f) :\n    e '' (closure s) = closure (e '' s) := by\n  have he' (f : E â†’L[ğ•œ] ğ•œ) : (e_dual.symm f : F â†’â‚—[ğ•œ] ğ•œ) = e.symm.dualMap f := by\n    simp only [DFunLike.ext'_iff, ContinuousLinearMap.coe_coe] at he âŠ¢\n    have (g : E â†’L[ğ•œ] ğ•œ) : â‡‘g = e_dual.symm g âˆ˜ e := by\n      have := he _ â–¸ congr(â‡‘$(e_dual.apply_symm_apply g)).symm\n      simpa\n    ext x\n    conv_rhs => rw [LinearEquiv.dualMap_apply, ContinuousLinearMap.coe_coe, this]\n    simp\n  refine e.image_closure_of_convex hs ?_ ?_\n  Â· simpa [â† he] using fun f â†¦ map_continuous (e_dual f)\n  Â· simpa [â† he'] using fun f â†¦ map_continuous (e_dual.symm f)\n"}
