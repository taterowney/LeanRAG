{"name":"ProbabilityTheory.evariance_lt_top","module":"Mathlib.Probability.Variance","initialProofState":"Œ© : Type u_1\nmŒ© : MeasurableSpace Œ©\nX : Œ© ‚Üí Real\nŒº : MeasureTheory.Measure Œ©\ninst‚úù : MeasureTheory.IsFiniteMeasure Œº\nhX : MeasureTheory.Mem‚Ñíp X 2 Œº\n‚ä¢ LT.lt (ProbabilityTheory.evariance X Œº) Top.top","decl":"theorem evariance_lt_top [IsFiniteMeasure Œº] (hX : Mem‚Ñíp X 2 Œº) : evariance X Œº < ‚àû := by\n  have := ENNReal.pow_lt_top (hX.sub <| mem‚Ñíp_const <| Œº[X]).2 2\n  rw [eLpNorm_eq_lintegral_rpow_enorm two_ne_zero ENNReal.ofNat_ne_top, ‚Üê ENNReal.rpow_two] at this\n  simp only [ENNReal.toReal_ofNat, Pi.sub_apply, ENNReal.one_toReal, one_div] at this\n  rw [‚Üê ENNReal.rpow_mul, inv_mul_cancel‚ÇÄ (two_ne_zero : (2 : ‚Ñù) ‚â† 0), ENNReal.rpow_one] at this\n  simp_rw [ENNReal.rpow_two] at this\n  exact this\n\n"}
{"name":"ProbabilityTheory.evariance_ne_top","module":"Mathlib.Probability.Variance","initialProofState":"Œ© : Type u_1\nmŒ© : MeasurableSpace Œ©\nX : Œ© ‚Üí Real\nŒº : MeasureTheory.Measure Œ©\ninst‚úù : MeasureTheory.IsFiniteMeasure Œº\nhX : MeasureTheory.Mem‚Ñíp X 2 Œº\n‚ä¢ Ne (ProbabilityTheory.evariance X Œº) Top.top","decl":"lemma evariance_ne_top [IsFiniteMeasure Œº] (hX : Mem‚Ñíp X 2 Œº) : evariance X Œº ‚â† ‚àû :=\n  (evariance_lt_top hX).ne\n\n"}
{"name":"ProbabilityTheory.evariance_eq_top","module":"Mathlib.Probability.Variance","initialProofState":"Œ© : Type u_1\nmŒ© : MeasurableSpace Œ©\nX : Œ© ‚Üí Real\nŒº : MeasureTheory.Measure Œ©\ninst‚úù : MeasureTheory.IsFiniteMeasure Œº\nhXm : MeasureTheory.AEStronglyMeasurable X Œº\nhX : Not (MeasureTheory.Mem‚Ñíp X 2 Œº)\n‚ä¢ Eq (ProbabilityTheory.evariance X Œº) Top.top","decl":"theorem evariance_eq_top [IsFiniteMeasure Œº] (hXm : AEStronglyMeasurable X Œº) (hX : ¬¨Mem‚Ñíp X 2 Œº) :\n    evariance X Œº = ‚àû := by\n  by_contra h\n  rw [‚Üê Ne, ‚Üê lt_top_iff_ne_top] at h\n  have : Mem‚Ñíp (fun œâ => X œâ - Œº[X]) 2 Œº := by\n    refine ‚ü®hXm.sub aestronglyMeasurable_const, ?_‚ü©\n    rw [eLpNorm_eq_lintegral_rpow_enorm two_ne_zero ENNReal.ofNat_ne_top]\n    simp only [ENNReal.toReal_ofNat, ENNReal.one_toReal, ENNReal.rpow_two, Ne]\n    exact ENNReal.rpow_lt_top_of_nonneg (by linarith) h.ne\n  refine hX ?_\n  convert this.add (mem‚Ñíp_const Œº[X])\n  ext œâ\n  rw [Pi.add_apply, sub_add_cancel]\n\n"}
{"name":"ProbabilityTheory.evariance_lt_top_iff_mem‚Ñíp","module":"Mathlib.Probability.Variance","initialProofState":"Œ© : Type u_1\nmŒ© : MeasurableSpace Œ©\nX : Œ© ‚Üí Real\nŒº : MeasureTheory.Measure Œ©\ninst‚úù : MeasureTheory.IsFiniteMeasure Œº\nhX : MeasureTheory.AEStronglyMeasurable X Œº\n‚ä¢ Iff (LT.lt (ProbabilityTheory.evariance X Œº) Top.top) (MeasureTheory.Mem‚Ñíp X 2 Œº)","decl":"theorem evariance_lt_top_iff_mem‚Ñíp [IsFiniteMeasure Œº] (hX : AEStronglyMeasurable X Œº) :\n    evariance X Œº < ‚àû ‚Üî Mem‚Ñíp X 2 Œº where\n  mp := by contrapose!; rw [top_le_iff]; exact evariance_eq_top hX\n  mpr := evariance_lt_top\n\n"}
{"name":"ProbabilityTheory.evariance_eq_top_iff","module":"Mathlib.Probability.Variance","initialProofState":"Œ© : Type u_1\nmŒ© : MeasurableSpace Œ©\nX : Œ© ‚Üí Real\nŒº : MeasureTheory.Measure Œ©\ninst‚úù : MeasureTheory.IsFiniteMeasure Œº\nhX : MeasureTheory.AEStronglyMeasurable X Œº\n‚ä¢ Iff (Eq (ProbabilityTheory.evariance X Œº) Top.top) (Not (MeasureTheory.Mem‚Ñíp X 2 Œº))","decl":"lemma evariance_eq_top_iff [IsFiniteMeasure Œº] (hX : AEStronglyMeasurable X Œº) :\n    evariance X Œº = ‚àû ‚Üî ¬¨ Mem‚Ñíp X 2 Œº := by simp [‚Üê evariance_lt_top_iff_mem‚Ñíp hX]\n\n"}
{"name":"ProbabilityTheory.ofReal_variance","module":"Mathlib.Probability.Variance","initialProofState":"Œ© : Type u_1\nmŒ© : MeasurableSpace Œ©\nX : Œ© ‚Üí Real\nŒº : MeasureTheory.Measure Œ©\ninst‚úù : MeasureTheory.IsFiniteMeasure Œº\nhX : MeasureTheory.Mem‚Ñíp X 2 Œº\n‚ä¢ Eq (ENNReal.ofReal (ProbabilityTheory.variance X Œº)) (ProbabilityTheory.evariance X Œº)","decl":"theorem ofReal_variance [IsFiniteMeasure Œº] (hX : Mem‚Ñíp X 2 Œº) :\n    .ofReal (variance X Œº) = evariance X Œº := by\n  rw [variance, ENNReal.ofReal_toReal]\n  exact evariance_ne_top hX\n\n"}
{"name":"MeasureTheory.Mem‚Ñíp.evariance_lt_top","module":"Mathlib.Probability.Variance","initialProofState":"Œ© : Type u_1\nmŒ© : MeasurableSpace Œ©\nX : Œ© ‚Üí Real\nŒº : MeasureTheory.Measure Œ©\ninst‚úù : MeasureTheory.IsFiniteMeasure Œº\nhX : MeasureTheory.Mem‚Ñíp X 2 Œº\n‚ä¢ LT.lt (ProbabilityTheory.evariance X Œº) Top.top","decl":"protected alias _root_.MeasureTheory.Mem‚Ñíp.evariance_lt_top := evariance_lt_top\n"}
{"name":"MeasureTheory.Mem‚Ñíp.evariance_ne_top","module":"Mathlib.Probability.Variance","initialProofState":"Œ© : Type u_1\nmŒ© : MeasurableSpace Œ©\nX : Œ© ‚Üí Real\nŒº : MeasureTheory.Measure Œ©\ninst‚úù : MeasureTheory.IsFiniteMeasure Œº\nhX : MeasureTheory.Mem‚Ñíp X 2 Œº\n‚ä¢ Ne (ProbabilityTheory.evariance X Œº) Top.top","decl":"protected alias _root_.MeasureTheory.Mem‚Ñíp.evariance_ne_top := evariance_ne_top\n"}
{"name":"MeasureTheory.Mem‚Ñíp.ofReal_variance_eq","module":"Mathlib.Probability.Variance","initialProofState":"Œ© : Type u_1\nmŒ© : MeasurableSpace Œ©\nX : Œ© ‚Üí Real\nŒº : MeasureTheory.Measure Œ©\ninst‚úù : MeasureTheory.IsFiniteMeasure Œº\nhX : MeasureTheory.Mem‚Ñíp X 2 Œº\n‚ä¢ Eq (ENNReal.ofReal (ProbabilityTheory.variance X Œº)) (ProbabilityTheory.evariance X Œº)","decl":"protected alias _root_.MeasureTheory.Mem‚Ñíp.ofReal_variance_eq := ofReal_variance\n\n"}
{"name":"ProbabilityTheory.evariance_eq_lintegral_ofReal","module":"Mathlib.Probability.Variance","initialProofState":"Œ© : Type u_1\nmŒ© : MeasurableSpace Œ©\nX : Œ© ‚Üí Real\nŒº : MeasureTheory.Measure Œ©\n‚ä¢ Eq (ProbabilityTheory.evariance X Œº) (MeasureTheory.lintegral Œº fun œâ => ENNReal.ofReal (HPow.hPow (HSub.hSub (X œâ) (MeasureTheory.integral Œº fun x => X x)) 2))","decl":"variable (X Œº) in\ntheorem evariance_eq_lintegral_ofReal :\n    evariance X Œº = ‚à´‚Åª œâ, ENNReal.ofReal ((X œâ - Œº[X]) ^ 2) ‚àÇŒº := by\n  simp [evariance, ‚Üê enorm_pow, Real.enorm_of_nonneg (sq_nonneg _)]\n\n"}
{"name":"ProbabilityTheory.variance_eq_integral","module":"Mathlib.Probability.Variance","initialProofState":"Œ© : Type u_1\nmŒ© : MeasurableSpace Œ©\nX : Œ© ‚Üí Real\nŒº : MeasureTheory.Measure Œ©\nhX : AEMeasurable X Œº\n‚ä¢ Eq (ProbabilityTheory.variance X Œº) (MeasureTheory.integral Œº fun œâ => HPow.hPow (HSub.hSub (X œâ) (MeasureTheory.integral Œº fun x => X x)) 2)","decl":"lemma variance_eq_integral (hX : AEMeasurable X Œº) : Var[X ; Œº] = ‚à´ œâ, (X œâ - Œº[X]) ^ 2 ‚àÇŒº := by\n  simp [variance, evariance, toReal_enorm, ‚Üê integral_toReal ((hX.sub_const _).enorm.pow_const _) <|\n    .of_forall fun _ ‚Ü¶ ENNReal.pow_lt_top enorm_lt_top _]\n\n"}
{"name":"ProbabilityTheory.variance_of_integral_eq_zero","module":"Mathlib.Probability.Variance","initialProofState":"Œ© : Type u_1\nmŒ© : MeasurableSpace Œ©\nX : Œ© ‚Üí Real\nŒº : MeasureTheory.Measure Œ©\nhX : AEMeasurable X Œº\nhXint : Eq (MeasureTheory.integral Œº fun x => X x) 0\n‚ä¢ Eq (ProbabilityTheory.variance X Œº) (MeasureTheory.integral Œº fun œâ => HPow.hPow (X œâ) 2)","decl":"lemma variance_of_integral_eq_zero (hX : AEMeasurable X Œº) (hXint : Œº[X] = 0) :\n    variance X Œº = ‚à´ œâ, X œâ ^ 2 ‚àÇŒº := by\n  simp [variance_eq_integral hX, hXint]\n\n"}
{"name":"MeasureTheory.Mem‚Ñíp.variance_eq","module":"Mathlib.Probability.Variance","initialProofState":"Œ© : Type u_1\nmŒ© : MeasurableSpace Œ©\nX : Œ© ‚Üí Real\nŒº : MeasureTheory.Measure Œ©\nhX : AEMeasurable X Œº\n‚ä¢ Eq (ProbabilityTheory.variance X Œº) (MeasureTheory.integral Œº fun œâ => HPow.hPow (HSub.hSub (X œâ) (MeasureTheory.integral Œº fun x => X x)) 2)","decl":"@[deprecated (since := \"2025-01-23\")]\nalias _root_.MeasureTheory.Mem‚Ñíp.variance_eq := variance_eq_integral\n\n"}
{"name":"MeasureTheory.Mem‚Ñíp.variance_eq_of_integral_eq_zero","module":"Mathlib.Probability.Variance","initialProofState":"Œ© : Type u_1\nmŒ© : MeasurableSpace Œ©\nX : Œ© ‚Üí Real\nŒº : MeasureTheory.Measure Œ©\nhX : AEMeasurable X Œº\nhXint : Eq (MeasureTheory.integral Œº fun x => X x) 0\n‚ä¢ Eq (ProbabilityTheory.variance X Œº) (MeasureTheory.integral Œº fun œâ => HPow.hPow (X œâ) 2)","decl":"@[deprecated (since := \"2025-01-23\")]\nalias _root_.MeasureTheory.Mem‚Ñíp.variance_eq_of_integral_eq_zero := variance_of_integral_eq_zero\n\n"}
{"name":"ProbabilityTheory.evariance_zero","module":"Mathlib.Probability.Variance","initialProofState":"Œ© : Type u_1\nmŒ© : MeasurableSpace Œ©\nŒº : MeasureTheory.Measure Œ©\n‚ä¢ Eq (ProbabilityTheory.evariance 0 Œº) 0","decl":"@[simp]\ntheorem evariance_zero : evariance 0 Œº = 0 := by simp [evariance]\n\n"}
{"name":"ProbabilityTheory.evariance_eq_zero_iff","module":"Mathlib.Probability.Variance","initialProofState":"Œ© : Type u_1\nmŒ© : MeasurableSpace Œ©\nX : Œ© ‚Üí Real\nŒº : MeasureTheory.Measure Œ©\nhX : AEMeasurable X Œº\n‚ä¢ Iff (Eq (ProbabilityTheory.evariance X Œº) 0) ((MeasureTheory.ae Œº).EventuallyEq X fun x => MeasureTheory.integral Œº fun x => X x)","decl":"theorem evariance_eq_zero_iff (hX : AEMeasurable X Œº) :\n    evariance X Œº = 0 ‚Üî X =·µê[Œº] fun _ => Œº[X] := by\n  simp [evariance, lintegral_eq_zero_iff' ((hX.sub_const _).enorm.pow_const _), EventuallyEq,\n    sub_eq_zero]\n\n"}
{"name":"ProbabilityTheory.evariance_mul","module":"Mathlib.Probability.Variance","initialProofState":"Œ© : Type u_1\nmŒ© : MeasurableSpace Œ©\nc : Real\nX : Œ© ‚Üí Real\nŒº : MeasureTheory.Measure Œ©\n‚ä¢ Eq (ProbabilityTheory.evariance (fun œâ => HMul.hMul c (X œâ)) Œº) (HMul.hMul (ENNReal.ofReal (HPow.hPow c 2)) (ProbabilityTheory.evariance X Œº))","decl":"theorem evariance_mul (c : ‚Ñù) (X : Œ© ‚Üí ‚Ñù) (Œº : Measure Œ©) :\n    evariance (fun œâ => c * X œâ) Œº = ENNReal.ofReal (c ^ 2) * evariance X Œº := by\n  rw [evariance, evariance, ‚Üê lintegral_const_mul' _ _ ENNReal.ofReal_lt_top.ne]\n  congr with œâ\n  rw [integral_mul_left, ‚Üê mul_sub, enorm_mul, mul_pow, ‚Üê enorm_pow,\n    Real.enorm_of_nonneg (sq_nonneg _)]\n\n"}
{"name":"ProbabilityTheory.variance_zero","module":"Mathlib.Probability.Variance","initialProofState":"Œ© : Type u_1\nmŒ© : MeasurableSpace Œ©\nŒº : MeasureTheory.Measure Œ©\n‚ä¢ Eq (ProbabilityTheory.variance 0 Œº) 0","decl":"@[simp]\ntheorem variance_zero (Œº : Measure Œ©) : variance 0 Œº = 0 := by\n  simp only [variance, evariance_zero, ENNReal.zero_toReal]\n\n"}
{"name":"ProbabilityTheory.variance_nonneg","module":"Mathlib.Probability.Variance","initialProofState":"Œ© : Type u_1\nmŒ© : MeasurableSpace Œ©\nX : Œ© ‚Üí Real\nŒº : MeasureTheory.Measure Œ©\n‚ä¢ LE.le 0 (ProbabilityTheory.variance X Œº)","decl":"theorem variance_nonneg (X : Œ© ‚Üí ‚Ñù) (Œº : Measure Œ©) : 0 ‚â§ variance X Œº :=\n  ENNReal.toReal_nonneg\n\n"}
{"name":"ProbabilityTheory.variance_mul","module":"Mathlib.Probability.Variance","initialProofState":"Œ© : Type u_1\nmŒ© : MeasurableSpace Œ©\nc : Real\nX : Œ© ‚Üí Real\nŒº : MeasureTheory.Measure Œ©\n‚ä¢ Eq (ProbabilityTheory.variance (fun œâ => HMul.hMul c (X œâ)) Œº) (HMul.hMul (HPow.hPow c 2) (ProbabilityTheory.variance X Œº))","decl":"theorem variance_mul (c : ‚Ñù) (X : Œ© ‚Üí ‚Ñù) (Œº : Measure Œ©) :\n    variance (fun œâ => c * X œâ) Œº = c ^ 2 * variance X Œº := by\n  rw [variance, evariance_mul, ENNReal.toReal_mul, ENNReal.toReal_ofReal (sq_nonneg _)]\n  rfl\n\n"}
{"name":"ProbabilityTheory.variance_smul","module":"Mathlib.Probability.Variance","initialProofState":"Œ© : Type u_1\nmŒ© : MeasurableSpace Œ©\nc : Real\nX : Œ© ‚Üí Real\nŒº : MeasureTheory.Measure Œ©\n‚ä¢ Eq (ProbabilityTheory.variance (HSMul.hSMul c X) Œº) (HMul.hMul (HPow.hPow c 2) (ProbabilityTheory.variance X Œº))","decl":"theorem variance_smul (c : ‚Ñù) (X : Œ© ‚Üí ‚Ñù) (Œº : Measure Œ©) :\n    variance (c ‚Ä¢ X) Œº = c ^ 2 * variance X Œº :=\n  variance_mul c X Œº\n\n"}
{"name":"ProbabilityTheory.variance_smul'","module":"Mathlib.Probability.Variance","initialProofState":"Œ© : Type u_1\nmŒ© : MeasurableSpace Œ©\nA : Type u_2\ninst‚úù¬π : CommSemiring A\ninst‚úù : Algebra A Real\nc : A\nX : Œ© ‚Üí Real\nŒº : MeasureTheory.Measure Œ©\n‚ä¢ Eq (ProbabilityTheory.variance (HSMul.hSMul c X) Œº) (HSMul.hSMul (HPow.hPow c 2) (ProbabilityTheory.variance X Œº))","decl":"theorem variance_smul' {A : Type*} [CommSemiring A] [Algebra A ‚Ñù] (c : A) (X : Œ© ‚Üí ‚Ñù)\n    (Œº : Measure Œ©) : variance (c ‚Ä¢ X) Œº = c ^ 2 ‚Ä¢ variance X Œº := by\n  convert variance_smul (algebraMap A ‚Ñù c) X Œº using 1\n  ¬∑ congr; simp only [algebraMap_smul]\n  ¬∑ simp only [Algebra.smul_def, map_pow]\n\n"}
{"name":"ProbabilityTheory.variance_def'","module":"Mathlib.Probability.Variance","initialProofState":"Œ© : Type u_1\nmŒ© : MeasurableSpace Œ©\nŒº : MeasureTheory.Measure Œ©\ninst‚úù : MeasureTheory.IsProbabilityMeasure Œº\nX : Œ© ‚Üí Real\nhX : MeasureTheory.Mem‚Ñíp X 2 Œº\n‚ä¢ Eq (ProbabilityTheory.variance X Œº) (HSub.hSub (MeasureTheory.integral Œº fun x => HPow.hPow X 2 x) (HPow.hPow (MeasureTheory.integral Œº fun x => X x) 2))","decl":"theorem variance_def' [IsProbabilityMeasure Œº] {X : Œ© ‚Üí ‚Ñù} (hX : Mem‚Ñíp X 2 Œº) :\n    variance X Œº = Œº[X ^ 2] - Œº[X] ^ 2 := by\n  simp only [variance_eq_integral hX.aestronglyMeasurable.aemeasurable, sub_sq']\n  rw [integral_sub, integral_add]; rotate_left\n  ¬∑ exact hX.integrable_sq\n  ¬∑ apply integrable_const\n  ¬∑ apply hX.integrable_sq.add\n    apply integrable_const\n  ¬∑ exact ((hX.integrable one_le_two).const_mul 2).mul_const' _\n  simp only [Pi.pow_apply, integral_const, measure_univ, ENNReal.one_toReal, smul_eq_mul, one_mul,\n    Pi.mul_apply, Pi.ofNat_apply, Nat.cast_ofNat, integral_mul_right, integral_mul_left]\n  ring\n\n"}
{"name":"ProbabilityTheory.variance_le_expectation_sq","module":"Mathlib.Probability.Variance","initialProofState":"Œ© : Type u_1\nmŒ© : MeasurableSpace Œ©\nŒº : MeasureTheory.Measure Œ©\ninst‚úù : MeasureTheory.IsProbabilityMeasure Œº\nX : Œ© ‚Üí Real\nhm : MeasureTheory.AEStronglyMeasurable X Œº\n‚ä¢ LE.le (ProbabilityTheory.variance X Œº) (MeasureTheory.integral Œº fun x => HPow.hPow X 2 x)","decl":"theorem variance_le_expectation_sq [IsProbabilityMeasure Œº] {X : Œ© ‚Üí ‚Ñù}\n    (hm : AEStronglyMeasurable X Œº) : variance X Œº ‚â§ Œº[X ^ 2] := by\n  by_cases hX : Mem‚Ñíp X 2 Œº\n  ¬∑ rw [variance_def' hX]\n    simp only [sq_nonneg, sub_le_self_iff]\n  rw [variance, evariance_eq_lintegral_ofReal, ‚Üê integral_eq_lintegral_of_nonneg_ae]\n  ¬∑ by_cases hint : Integrable X Œº; swap\n    ¬∑ simp only [integral_undef hint, Pi.pow_apply, Pi.sub_apply, sub_zero]\n      exact le_rfl\n    ¬∑ rw [integral_undef]\n      ¬∑ exact integral_nonneg fun a => sq_nonneg _\n      intro h\n      have A : Mem‚Ñíp (X - fun œâ : Œ© => Œº[X]) 2 Œº :=\n        (mem‚Ñíp_two_iff_integrable_sq (hint.aestronglyMeasurable.sub aestronglyMeasurable_const)).2 h\n      have B : Mem‚Ñíp (fun _ : Œ© => Œº[X]) 2 Œº := mem‚Ñíp_const _\n      apply hX\n      convert A.add B\n      simp\n  ¬∑ exact Eventually.of_forall fun x => sq_nonneg _\n  ¬∑ exact (AEMeasurable.pow_const (hm.aemeasurable.sub_const _) _).aestronglyMeasurable\n\n"}
{"name":"ProbabilityTheory.evariance_def'","module":"Mathlib.Probability.Variance","initialProofState":"Œ© : Type u_1\nmŒ© : MeasurableSpace Œ©\nŒº : MeasureTheory.Measure Œ©\ninst‚úù : MeasureTheory.IsProbabilityMeasure Œº\nX : Œ© ‚Üí Real\nhX : MeasureTheory.AEStronglyMeasurable X Œº\n‚ä¢ Eq (ProbabilityTheory.evariance X Œº) (HSub.hSub (MeasureTheory.lintegral Œº fun œâ => HPow.hPow (ENorm.enorm (X œâ)) 2) (ENNReal.ofReal (HPow.hPow (MeasureTheory.integral Œº fun x => X x) 2)))","decl":"theorem evariance_def' [IsProbabilityMeasure Œº] {X : Œ© ‚Üí ‚Ñù} (hX : AEStronglyMeasurable X Œº) :\n    evariance X Œº = (‚à´‚Åª œâ, ‚ÄñX œâ‚Äñ‚Çë ^ 2 ‚àÇŒº) - ENNReal.ofReal (Œº[X] ^ 2) := by\n  by_cases h‚Ñí : Mem‚Ñíp X 2 Œº\n  ¬∑ rw [‚Üê ofReal_variance h‚Ñí, variance_def' h‚Ñí, ENNReal.ofReal_sub _ (sq_nonneg _)]\n    congr\n    simp_rw [‚Üê enorm_pow, enorm]\n    rw [lintegral_coe_eq_integral]\n    ¬∑ simp\n    ¬∑ simpa using h‚Ñí.abs.integrable_sq\n  ¬∑ symm\n    rw [evariance_eq_top hX h‚Ñí, ENNReal.sub_eq_top_iff]\n    refine ‚ü®?_, ENNReal.ofReal_ne_top‚ü©\n    rw [Mem‚Ñíp, not_and] at h‚Ñí\n    specialize h‚Ñí hX\n    simp only [eLpNorm_eq_lintegral_rpow_enorm two_ne_zero ENNReal.ofNat_ne_top, not_lt, top_le_iff,\n      ENNReal.toReal_ofNat, one_div, ENNReal.rpow_eq_top_iff, inv_lt_zero, inv_pos, and_true,\n      or_iff_not_imp_left, not_and_or, zero_lt_two] at h‚Ñí\n    exact mod_cast h‚Ñí fun _ => zero_le_two\n\n"}
{"name":"ProbabilityTheory.meas_ge_le_evariance_div_sq","module":"Mathlib.Probability.Variance","initialProofState":"Œ© : Type u_1\nmŒ© : MeasurableSpace Œ©\nŒº : MeasureTheory.Measure Œ©\nX : Œ© ‚Üí Real\nhX : MeasureTheory.AEStronglyMeasurable X Œº\nc : NNReal\nhc : Ne c 0\n‚ä¢ LE.le (Œº (setOf fun œâ => LE.le (‚Üëc) (abs (HSub.hSub (X œâ) (MeasureTheory.integral Œº fun x => X x))))) (HDiv.hDiv (ProbabilityTheory.evariance X Œº) (HPow.hPow (‚Üëc) 2))","decl":"/-- **Chebyshev's inequality** for `‚Ñù‚â•0‚àû`-valued variance. -/\ntheorem meas_ge_le_evariance_div_sq {X : Œ© ‚Üí ‚Ñù} (hX : AEStronglyMeasurable X Œº) {c : ‚Ñù‚â•0}\n    (hc : c ‚â† 0) : Œº {œâ | ‚Üëc ‚â§ |X œâ - Œº[X]|} ‚â§ evariance X Œº / c ^ 2 := by\n  have A : (c : ‚Ñù‚â•0‚àû) ‚â† 0 := by rwa [Ne, ENNReal.coe_eq_zero]\n  have B : AEStronglyMeasurable (fun _ : Œ© => Œº[X]) Œº := aestronglyMeasurable_const\n  convert meas_ge_le_mul_pow_eLpNorm Œº two_ne_zero ENNReal.ofNat_ne_top (hX.sub B) A using 1\n  ¬∑ congr\n    simp only [Pi.sub_apply, ENNReal.coe_le_coe, ‚Üê Real.norm_eq_abs, ‚Üê coe_nnnorm,\n      NNReal.coe_le_coe, ENNReal.ofReal_coe_nnreal]\n  ¬∑ rw [eLpNorm_eq_lintegral_rpow_enorm two_ne_zero ENNReal.ofNat_ne_top]\n    simp only [show ENNReal.ofNNReal (c ^ 2) = (ENNReal.ofNNReal c) ^ 2 by norm_cast,\n      ENNReal.toReal_ofNat, one_div, Pi.sub_apply]\n    rw [div_eq_mul_inv, ENNReal.inv_pow, mul_comm, ENNReal.rpow_two]\n    congr\n    simp_rw [‚Üê ENNReal.rpow_mul, inv_mul_cancel‚ÇÄ (two_ne_zero : (2 : ‚Ñù) ‚â† 0), ENNReal.rpow_two,\n      ENNReal.rpow_one, evariance]\n\n\n"}
{"name":"ProbabilityTheory.meas_ge_le_variance_div_sq","module":"Mathlib.Probability.Variance","initialProofState":"Œ© : Type u_1\nmŒ© : MeasurableSpace Œ©\nŒº : MeasureTheory.Measure Œ©\ninst‚úù : MeasureTheory.IsFiniteMeasure Œº\nX : Œ© ‚Üí Real\nhX : MeasureTheory.Mem‚Ñíp X 2 Œº\nc : Real\nhc : LT.lt 0 c\n‚ä¢ LE.le (Œº (setOf fun œâ => LE.le c (abs (HSub.hSub (X œâ) (MeasureTheory.integral Œº fun x => X x))))) (ENNReal.ofReal (HDiv.hDiv (ProbabilityTheory.variance X Œº) (HPow.hPow c 2)))","decl":"/-- **Chebyshev's inequality**: one can control the deviation probability of a real random variable\nfrom its expectation in terms of the variance. -/\ntheorem meas_ge_le_variance_div_sq [IsFiniteMeasure Œº] {X : Œ© ‚Üí ‚Ñù} (hX : Mem‚Ñíp X 2 Œº) {c : ‚Ñù}\n    (hc : 0 < c) : Œº {œâ | c ‚â§ |X œâ - Œº[X]|} ‚â§ ENNReal.ofReal (variance X Œº / c ^ 2) := by\n  rw [ENNReal.ofReal_div_of_pos (sq_pos_of_ne_zero hc.ne.symm), hX.ofReal_variance_eq]\n  convert @meas_ge_le_evariance_div_sq _ _ _ _ hX.1 c.toNNReal (by simp [hc]) using 1\n  ¬∑ simp only [Real.coe_toNNReal', max_le_iff, abs_nonneg, and_true]\n  ¬∑ rw [ENNReal.ofReal_pow hc.le]\n    rfl\n\n-- Porting note: supplied `MeasurableSpace Œ©` argument of `h` by unification\n"}
{"name":"ProbabilityTheory.IndepFun.variance_add","module":"Mathlib.Probability.Variance","initialProofState":"Œ© : Type u_1\nmŒ© : MeasurableSpace Œ©\nŒº : MeasureTheory.Measure Œ©\ninst‚úù : MeasureTheory.IsProbabilityMeasure Œº\nX Y : Œ© ‚Üí Real\nhX : MeasureTheory.Mem‚Ñíp X 2 Œº\nhY : MeasureTheory.Mem‚Ñíp Y 2 Œº\nh : ProbabilityTheory.IndepFun X Y Œº\n‚ä¢ Eq (ProbabilityTheory.variance (HAdd.hAdd X Y) Œº) (HAdd.hAdd (ProbabilityTheory.variance X Œº) (ProbabilityTheory.variance Y Œº))","decl":"/-- The variance of the sum of two independent random variables is the sum of the variances. -/\ntheorem IndepFun.variance_add [IsProbabilityMeasure Œº] {X Y : Œ© ‚Üí ‚Ñù} (hX : Mem‚Ñíp X 2 Œº)\n    (hY : Mem‚Ñíp Y 2 Œº) (h : IndepFun X Y Œº) : variance (X + Y) Œº = variance X Œº + variance Y Œº :=\n  calc\n    variance (X + Y) Œº = Œº[fun a => X a ^ 2 + Y a ^ 2 + 2 * X a * Y a] - Œº[X + Y] ^ 2 := by\n      simp [variance_def' (hX.add hY), add_sq']\n    _ = Œº[X ^ 2] + Œº[Y ^ 2] + (2 : ‚Ñù) * Œº[X * Y] - (Œº[X] + Œº[Y]) ^ 2 := by\n      simp only [Pi.add_apply, Pi.pow_apply, Pi.mul_apply, mul_assoc]\n      rw [integral_add, integral_add, integral_add, integral_mul_left]\n      ¬∑ exact hX.integrable one_le_two\n      ¬∑ exact hY.integrable one_le_two\n      ¬∑ exact hX.integrable_sq\n      ¬∑ exact hY.integrable_sq\n      ¬∑ exact hX.integrable_sq.add hY.integrable_sq\n      ¬∑ apply Integrable.const_mul\n        exact h.integrable_mul (hX.integrable one_le_two) (hY.integrable one_le_two)\n    _ = Œº[X ^ 2] + Œº[Y ^ 2] + 2 * (Œº[X] * Œº[Y]) - (Œº[X] + Œº[Y]) ^ 2 := by\n      congr\n      exact h.integral_mul_of_integrable (hX.integrable one_le_two) (hY.integrable one_le_two)\n    _ = variance X Œº + variance Y Œº := by simp only [variance_def', hX, hY, Pi.pow_apply]; ring\n\n-- Porting note: supplied `MeasurableSpace Œ©` argument of `hs`, `h` by unification\n"}
{"name":"ProbabilityTheory.IndepFun.variance_sum","module":"Mathlib.Probability.Variance","initialProofState":"Œ© : Type u_1\nmŒ© : MeasurableSpace Œ©\nŒº : MeasureTheory.Measure Œ©\ninst‚úù : MeasureTheory.IsProbabilityMeasure Œº\nŒπ : Type u_2\nX : Œπ ‚Üí Œ© ‚Üí Real\ns : Finset Œπ\nhs : ‚àÄ (i : Œπ), Membership.mem s i ‚Üí MeasureTheory.Mem‚Ñíp (X i) 2 Œº\nh : (‚Üës).Pairwise fun i j => ProbabilityTheory.IndepFun (X i) (X j) Œº\n‚ä¢ Eq (ProbabilityTheory.variance (s.sum fun i => X i) Œº) (s.sum fun i => ProbabilityTheory.variance (X i) Œº)","decl":"/-- The variance of a finite sum of pairwise independent random variables is the sum of the\nvariances. -/\ntheorem IndepFun.variance_sum [IsProbabilityMeasure Œº] {Œπ : Type*} {X : Œπ ‚Üí Œ© ‚Üí ‚Ñù}\n    {s : Finset Œπ} (hs : ‚àÄ i ‚àà s, Mem‚Ñíp (X i) 2 Œº)\n    (h : Set.Pairwise ‚Üës fun i j => IndepFun (X i) (X j) Œº) :\n    variance (‚àë i ‚àà s, X i) Œº = ‚àë i ‚àà s, variance (X i) Œº := by\n  classical\n  induction' s using Finset.induction_on with k s ks IH\n  ¬∑ simp only [Finset.sum_empty, variance_zero]\n  rw [variance_def' (mem‚Ñíp_finset_sum' _ hs), sum_insert ks, sum_insert ks]\n  simp only [add_sq']\n  calc\n    Œº[(X k ^ 2 + (‚àë i ‚àà s, X i) ^ 2 + 2 * X k * ‚àë i ‚àà s, X i : Œ© ‚Üí ‚Ñù)] - Œº[X k + ‚àë i ‚àà s, X i] ^ 2 =\n        Œº[X k ^ 2] + Œº[(‚àë i ‚àà s, X i) ^ 2] + Œº[2 * X k * ‚àë i ‚àà s, X i] -\n          (Œº[X k] + Œº[‚àë i ‚àà s, X i]) ^ 2 := by\n      rw [integral_add', integral_add', integral_add']\n      ¬∑ exact Mem‚Ñíp.integrable one_le_two (hs _ (mem_insert_self _ _))\n      ¬∑ apply integrable_finset_sum' _ fun i hi => ?_\n        exact Mem‚Ñíp.integrable one_le_two (hs _ (mem_insert_of_mem hi))\n      ¬∑ exact Mem‚Ñíp.integrable_sq (hs _ (mem_insert_self _ _))\n      ¬∑ apply Mem‚Ñíp.integrable_sq\n        exact mem‚Ñíp_finset_sum' _ fun i hi => hs _ (mem_insert_of_mem hi)\n      ¬∑ apply Integrable.add\n        ¬∑ exact Mem‚Ñíp.integrable_sq (hs _ (mem_insert_self _ _))\n        ¬∑ apply Mem‚Ñíp.integrable_sq\n          exact mem‚Ñíp_finset_sum' _ fun i hi => hs _ (mem_insert_of_mem hi)\n      ¬∑ rw [mul_assoc]\n        apply Integrable.const_mul _ (2 : ‚Ñù)\n        rw [mul_sum, sum_fn]\n        apply integrable_finset_sum _ fun i hi => ?_\n        apply IndepFun.integrable_mul _ (Mem‚Ñíp.integrable one_le_two (hs _ (mem_insert_self _ _)))\n          (Mem‚Ñíp.integrable one_le_two (hs _ (mem_insert_of_mem hi)))\n        apply h (mem_insert_self _ _) (mem_insert_of_mem hi)\n        exact fun hki => ks (hki.symm ‚ñ∏ hi)\n    _ = variance (X k) Œº + variance (‚àë i ‚àà s, X i) Œº +\n        (Œº[2 * X k * ‚àë i ‚àà s, X i] - 2 * Œº[X k] * Œº[‚àë i ‚àà s, X i]) := by\n      rw [variance_def' (hs _ (mem_insert_self _ _)),\n        variance_def' (mem‚Ñíp_finset_sum' _ fun i hi => hs _ (mem_insert_of_mem hi))]\n      ring\n    _ = variance (X k) Œº + variance (‚àë i ‚àà s, X i) Œº := by\n      simp_rw [Pi.mul_apply, Pi.ofNat_apply, Nat.cast_ofNat, sum_apply, mul_sum, mul_assoc,\n        add_right_eq_self]\n      rw [integral_finset_sum s fun i hi => ?_]; swap\n      ¬∑ apply Integrable.const_mul _ (2 : ‚Ñù)\n        apply IndepFun.integrable_mul _ (Mem‚Ñíp.integrable one_le_two (hs _ (mem_insert_self _ _)))\n          (Mem‚Ñíp.integrable one_le_two (hs _ (mem_insert_of_mem hi)))\n        apply h (mem_insert_self _ _) (mem_insert_of_mem hi)\n        exact fun hki => ks (hki.symm ‚ñ∏ hi)\n      rw [integral_finset_sum s fun i hi =>\n          Mem‚Ñíp.integrable one_le_two (hs _ (mem_insert_of_mem hi)),\n        mul_sum, mul_sum, ‚Üê sum_sub_distrib]\n      apply Finset.sum_eq_zero fun i hi => ?_\n      rw [integral_mul_left, IndepFun.integral_mul', sub_self]\n      ¬∑ apply h (mem_insert_self _ _) (mem_insert_of_mem hi)\n        exact fun hki => ks (hki.symm ‚ñ∏ hi)\n      ¬∑ exact Mem‚Ñíp.aestronglyMeasurable (hs _ (mem_insert_self _ _))\n      ¬∑ exact Mem‚Ñíp.aestronglyMeasurable (hs _ (mem_insert_of_mem hi))\n    _ = variance (X k) Œº + ‚àë i ‚àà s, variance (X i) Œº := by\n      rw [IH (fun i hi => hs i (mem_insert_of_mem hi))\n          (h.mono (by simp only [coe_insert, Set.subset_insert]))]\n\n"}
{"name":"ProbabilityTheory.variance_le_sub_mul_sub","module":"Mathlib.Probability.Variance","initialProofState":"Œ© : Type u_1\nmŒ© : MeasurableSpace Œ©\nŒº : MeasureTheory.Measure Œ©\ninst‚úù : MeasureTheory.IsProbabilityMeasure Œº\na b : Real\nX : Œ© ‚Üí Real\nh : Filter.Eventually (fun œâ => Membership.mem (Set.Icc a b) (X œâ)) (MeasureTheory.ae Œº)\nhX : AEMeasurable X Œº\n‚ä¢ LE.le (ProbabilityTheory.variance X Œº) (HMul.hMul (HSub.hSub b (MeasureTheory.integral Œº fun x => X x)) (HSub.hSub (MeasureTheory.integral Œº fun x => X x) a))","decl":"/-- **The Bhatia-Davis inequality on variance**\n\nThe variance of a random variable `X` satisfying `a ‚â§ X ‚â§ b` almost everywhere is at most\n`(b - ùîº X) * (ùîº X - a)`. -/\nlemma variance_le_sub_mul_sub [IsProbabilityMeasure Œº] {a b : ‚Ñù} {X : Œ© ‚Üí ‚Ñù}\n    (h : ‚àÄ·µê œâ ‚àÇŒº, X œâ ‚àà Set.Icc a b) (hX : AEMeasurable X Œº) :\n    variance X Œº ‚â§ (b - Œº[X]) * (Œº[X] - a) := by\n  have ha : ‚àÄ·µê œâ ‚àÇŒº, a ‚â§ X œâ := h.mono fun œâ h => h.1\n  have hb : ‚àÄ·µê œâ ‚àÇŒº, X œâ ‚â§ b := h.mono fun œâ h => h.2\n  have hX_int‚ÇÇ : Integrable (fun œâ ‚Ü¶ -X œâ ^ 2) Œº :=\n    (mem‚Ñíp_of_bounded h hX.aestronglyMeasurable 2).integrable_sq.neg\n  have hX_int‚ÇÅ : Integrable (fun œâ ‚Ü¶ (a + b) * X œâ) Œº :=\n    ((integrable_const (max |a| |b|)).mono' hX.aestronglyMeasurable\n      (by filter_upwards [ha, hb] with œâ using abs_le_max_abs_abs)).const_mul (a + b)\n  have h0 : 0 ‚â§ - Œº[X ^ 2] + (a + b) * Œº[X] - a * b :=\n    calc\n      _ ‚â§ ‚à´ œâ, (b - X œâ) * (X œâ - a) ‚àÇŒº := by\n        apply integral_nonneg_of_ae\n        filter_upwards [ha, hb] with œâ ha' hb'\n        exact mul_nonneg (by linarith : 0 ‚â§ b - X œâ) (by linarith : 0 ‚â§ X œâ - a)\n      _ = ‚à´ œâ, - X œâ ^ 2 + (a + b) * X œâ - a * b ‚àÇŒº :=\n        integral_congr_ae <| ae_of_all Œº fun œâ ‚Ü¶ by ring\n      _ = ‚à´ œâ, - X œâ ^ 2 + (a + b) * X œâ ‚àÇŒº - ‚à´ _, a * b ‚àÇŒº :=\n        integral_sub (by fun_prop) (integrable_const (a * b))\n      _ = ‚à´ œâ, - X œâ ^ 2 + (a + b) * X œâ ‚àÇŒº - a * b := by simp\n      _ = - Œº[X ^ 2] + (a + b) * Œº[X] - a * b := by\n        simp [‚Üê integral_neg, ‚Üê integral_mul_left, integral_add hX_int‚ÇÇ hX_int‚ÇÅ]\n  calc\n    _ ‚â§ (a + b) * Œº[X] - a * b - Œº[X] ^ 2 := by\n      rw [variance_def' (mem‚Ñíp_of_bounded h hX.aestronglyMeasurable 2)]\n      linarith\n    _ = (b - Œº[X]) * (Œº[X] - a) := by ring\n\n"}
{"name":"ProbabilityTheory.variance_le_sq_of_bounded","module":"Mathlib.Probability.Variance","initialProofState":"Œ© : Type u_1\nmŒ© : MeasurableSpace Œ©\nŒº : MeasureTheory.Measure Œ©\ninst‚úù : MeasureTheory.IsProbabilityMeasure Œº\na b : Real\nX : Œ© ‚Üí Real\nh : Filter.Eventually (fun œâ => Membership.mem (Set.Icc a b) (X œâ)) (MeasureTheory.ae Œº)\nhX : AEMeasurable X Œº\n‚ä¢ LE.le (ProbabilityTheory.variance X Œº) (HPow.hPow (HDiv.hDiv (HSub.hSub b a) 2) 2)","decl":"/-- **Popoviciu's inequality on variance**\n\nThe variance of a random variable `X` satisfying `a ‚â§ X ‚â§ b` almost everywhere is at most\n`((b - a) / 2) ^ 2`. -/\nlemma variance_le_sq_of_bounded [IsProbabilityMeasure Œº] {a b : ‚Ñù} {X : Œ© ‚Üí ‚Ñù}\n    (h : ‚àÄ·µê œâ ‚àÇŒº, X œâ ‚àà Set.Icc a b) (hX : AEMeasurable X Œº) :\n    variance X Œº ‚â§ ((b - a) / 2) ^ 2 :=\n  calc\n    _ ‚â§ (b - Œº[X]) * (Œº[X] - a) := variance_le_sub_mul_sub h hX\n    _ = ((b - a) / 2) ^ 2 - (Œº[X] - (b + a) / 2) ^ 2 := by ring\n    _ ‚â§ ((b - a) / 2) ^ 2 := sub_le_self _ (sq_nonneg _)\n\n"}
