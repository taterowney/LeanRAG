{"name":"Nat.grahamConjecture_of_squarefree","module":"Mathlib.NumberTheory.MaricaSchoenheim","initialProofState":"n : Nat\nf : Nat â†’ Nat\nhf' : âˆ€ (k : Nat), LT.lt k n â†’ Squarefree (f k)\nâŠ¢ n.GrahamConjecture f","decl":"/-- The special case of Graham's conjecture where all numbers are squarefree. -/\nlemma grahamConjecture_of_squarefree {n : â„•} (f : â„• â†’ â„•) (hf' : âˆ€ k < n, Squarefree (f k)) :\n    GrahamConjecture n f := by\n  rintro hn hf\n  by_contra!\n  set ð’œ := (Iio n).image fun n â†¦ primeFactors (f n)\n  have hf'' : âˆ€ i < n, âˆ€ j, Squarefree (f i / (f i).gcd (f j)) :=\n    fun i hi j â†¦ (hf' _ hi).squarefree_of_dvd <| div_dvd_of_dvd <| gcd_dvd_left _ _\n  refine lt_irrefl n ?_\n  calc\n    n = #ð’œ := ?_\n    _ â‰¤ #(ð’œ \\\\ ð’œ) := ð’œ.card_le_card_diffs\n    _ â‰¤ #(Ioo 0 n) := card_le_card_of_injOn (fun s â†¦ âˆ p âˆˆ s, p) ?_ ?_\n    _ = n - 1 := by rw [card_Ioo, tsub_zero]\n    _ < n := tsub_lt_self hn.bot_lt zero_lt_one\n  Â· rw [Finset.card_image_of_injOn, card_Iio]\n    simpa using prod_primeFactors_invOn_squarefree.2.injOn.comp hf.injOn hf'\n  Â· simp only [ð’œ, forall_mem_diffs, forall_mem_image, mem_Ioo, mem_Iio]\n    rintro i hi j hj\n    rw [â† primeFactors_div_gcd (hf' _ hi) (hf' _ hj).ne_zero,\n      prod_primeFactors_of_squarefree <| hf'' _ hi _]\n    exact âŸ¨Nat.div_pos (gcd_le_left _ (hf' _ hi).ne_zero.bot_lt) <|\n      Nat.gcd_pos_of_pos_left _ (hf' _ hi).ne_zero.bot_lt, Nat.div_lt_of_lt_mul <| this _ hi _ hjâŸ©\n  Â· simp only [ð’œ, Set.InjOn, mem_coe, forall_mem_diffs, forall_mem_image, mem_Ioo, mem_Iio]\n    rintro a ha b hb c hc d hd\n    rw [â† primeFactors_div_gcd (hf' _ ha) (hf' _ hb).ne_zero, â† primeFactors_div_gcd\n      (hf' _ hc) (hf' _ hd).ne_zero, prod_primeFactors_of_squarefree (hf'' _ ha _),\n      prod_primeFactors_of_squarefree (hf'' _ hc _)]\n    rintro h\n    rw [h]\n\n"}
