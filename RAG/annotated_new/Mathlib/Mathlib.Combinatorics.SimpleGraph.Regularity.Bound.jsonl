{"name":"SzemerediRegularity.le_stepBound","module":"Mathlib.Combinatorics.SimpleGraph.Regularity.Bound","initialProofState":"âŠ¢ LE.le id SzemerediRegularity.stepBound","decl":"theorem le_stepBound : id â‰¤ stepBound := fun n =>\n  Nat.le_mul_of_pos_right _ <| pow_pos (by norm_num) n\n\n"}
{"name":"SzemerediRegularity.stepBound_mono","module":"Mathlib.Combinatorics.SimpleGraph.Regularity.Bound","initialProofState":"âŠ¢ Monotone SzemerediRegularity.stepBound","decl":"theorem stepBound_mono : Monotone stepBound := fun _ _ h =>\n  Nat.mul_le_mul h <| Nat.pow_le_pow_of_le_right (by norm_num) h\n\n"}
{"name":"SzemerediRegularity.stepBound_pos_iff","module":"Mathlib.Combinatorics.SimpleGraph.Regularity.Bound","initialProofState":"n : Nat\nâŠ¢ Iff (LT.lt 0 (SzemerediRegularity.stepBound n)) (LT.lt 0 n)","decl":"theorem stepBound_pos_iff {n : â„•} : 0 < stepBound n â†” 0 < n :=\n  mul_pos_iff_of_pos_right <| by positivity\n\n"}
{"name":"SzemerediRegularity.stepBound_pos","module":"Mathlib.Combinatorics.SimpleGraph.Regularity.Bound","initialProofState":"n : Nat\naâœ : LT.lt 0 n\nâŠ¢ LT.lt 0 (SzemerediRegularity.stepBound n)","decl":"alias âŸ¨_, stepBound_posâŸ© := stepBound_pos_iff\n\n"}
{"name":"SzemerediRegularity.coe_stepBound","module":"Mathlib.Combinatorics.SimpleGraph.Regularity.Bound","initialProofState":"Î± : Type u_1\ninstâœ : Semiring Î±\nn : Nat\nâŠ¢ Eq (â†‘(SzemerediRegularity.stepBound n)) (HMul.hMul (â†‘n) (HPow.hPow 4 n))","decl":"@[norm_cast] lemma coe_stepBound {Î± : Type*} [Semiring Î±] (n : â„•) :\n    (stepBound n : Î±) = n * 4 ^ n := by unfold stepBound; norm_cast\n\n"}
{"name":"SzemerediRegularity.m_pos","module":"Mathlib.Combinatorics.SimpleGraph.Regularity.Bound","initialProofState":"Î± : Type u_1\ninstâœÂ² : DecidableEq Î±\ninstâœÂ¹ : Fintype Î±\nP : Finpartition Finset.univ\ninstâœ : Nonempty Î±\nhPÎ± : LE.le (HMul.hMul P.parts.card (HPow.hPow 16 P.parts.card)) (Fintype.card Î±)\nâŠ¢ LT.lt 0 (HDiv.hDiv (Fintype.card Î±) (SzemerediRegularity.stepBound P.parts.card))","decl":"theorem m_pos [Nonempty Î±] (hPÎ± : #P.parts * 16 ^ #P.parts â‰¤ card Î±) : 0 < m := by\n  sz_positivity\n\n"}
{"name":"SzemerediRegularity.coe_m_add_one_pos","module":"Mathlib.Combinatorics.SimpleGraph.Regularity.Bound","initialProofState":"Î± : Type u_1\ninstâœÂ¹ : DecidableEq Î±\ninstâœ : Fintype Î±\nP : Finpartition Finset.univ\nâŠ¢ LT.lt 0 (HAdd.hAdd (â†‘(HDiv.hDiv (Fintype.card Î±) (SzemerediRegularity.stepBound P.parts.card))) 1)","decl":"theorem coe_m_add_one_pos : 0 < (m : â„) + 1 := by positivity\n\n"}
{"name":"SzemerediRegularity.one_le_m_coe","module":"Mathlib.Combinatorics.SimpleGraph.Regularity.Bound","initialProofState":"Î± : Type u_1\ninstâœÂ² : DecidableEq Î±\ninstâœÂ¹ : Fintype Î±\nP : Finpartition Finset.univ\ninstâœ : Nonempty Î±\nhPÎ± : LE.le (HMul.hMul P.parts.card (HPow.hPow 16 P.parts.card)) (Fintype.card Î±)\nâŠ¢ LE.le 1 â†‘(HDiv.hDiv (Fintype.card Î±) (SzemerediRegularity.stepBound P.parts.card))","decl":"theorem one_le_m_coe [Nonempty Î±] (hPÎ± : #P.parts * 16 ^ #P.parts â‰¤ card Î±) : (1 : â„) â‰¤ m :=\n  Nat.one_le_cast.2 <| m_pos hPÎ±\n\n"}
{"name":"SzemerediRegularity.eps_pow_five_pos","module":"Mathlib.Combinatorics.SimpleGraph.Regularity.Bound","initialProofState":"Î± : Type u_1\ninstâœÂ¹ : DecidableEq Î±\ninstâœ : Fintype Î±\nP : Finpartition Finset.univ\nÎµ : Real\nhPÎµ : LE.le 100 (HMul.hMul (HPow.hPow 4 P.parts.card) (HPow.hPow Îµ 5))\nâŠ¢ LT.lt 0 (HPow.hPow Îµ 5)","decl":"theorem eps_pow_five_pos (hPÎµ : 100 â‰¤ (4 : â„) ^ #P.parts * Îµ ^ 5) : â†‘0 < Îµ ^ 5 :=\n  pos_of_mul_pos_right ((by norm_num : (0 : â„) < 100).trans_le hPÎµ) <| pow_nonneg (by norm_num) _\n\n"}
{"name":"SzemerediRegularity.eps_pos","module":"Mathlib.Combinatorics.SimpleGraph.Regularity.Bound","initialProofState":"Î± : Type u_1\ninstâœÂ¹ : DecidableEq Î±\ninstâœ : Fintype Î±\nP : Finpartition Finset.univ\nÎµ : Real\nhPÎµ : LE.le 100 (HMul.hMul (HPow.hPow 4 P.parts.card) (HPow.hPow Îµ 5))\nâŠ¢ LT.lt 0 Îµ","decl":"theorem eps_pos (hPÎµ : 100 â‰¤ (4 : â„) ^ #P.parts * Îµ ^ 5) : 0 < Îµ :=\n  (Odd.pow_pos_iff (by decide)).mp (eps_pow_five_pos hPÎµ)\n\n"}
{"name":"SzemerediRegularity.hundred_div_Îµ_pow_five_le_m","module":"Mathlib.Combinatorics.SimpleGraph.Regularity.Bound","initialProofState":"Î± : Type u_1\ninstâœÂ² : DecidableEq Î±\ninstâœÂ¹ : Fintype Î±\nP : Finpartition Finset.univ\nÎµ : Real\ninstâœ : Nonempty Î±\nhPÎ± : LE.le (HMul.hMul P.parts.card (HPow.hPow 16 P.parts.card)) (Fintype.card Î±)\nhPÎµ : LE.le 100 (HMul.hMul (HPow.hPow 4 P.parts.card) (HPow.hPow Îµ 5))\nâŠ¢ LE.le (HDiv.hDiv 100 (HPow.hPow Îµ 5)) â†‘(HDiv.hDiv (Fintype.card Î±) (SzemerediRegularity.stepBound P.parts.card))","decl":"theorem hundred_div_Îµ_pow_five_le_m [Nonempty Î±] (hPÎ± : #P.parts * 16 ^ #P.parts â‰¤ card Î±)\n    (hPÎµ : 100 â‰¤ (4 : â„) ^ #P.parts * Îµ ^ 5) : 100 / Îµ ^ 5 â‰¤ m :=\n  (div_le_of_le_mulâ‚€ (eps_pow_five_pos hPÎµ).le (by positivity) hPÎµ).trans <| by\n    norm_cast\n    rwa [Nat.le_div_iff_mul_le (stepBound_pos (P.parts_nonempty <|\n      univ_nonempty.ne_empty).card_pos), stepBound, mul_left_comm, â† mul_pow]\n\n"}
{"name":"SzemerediRegularity.hundred_le_m","module":"Mathlib.Combinatorics.SimpleGraph.Regularity.Bound","initialProofState":"Î± : Type u_1\ninstâœÂ² : DecidableEq Î±\ninstâœÂ¹ : Fintype Î±\nP : Finpartition Finset.univ\nÎµ : Real\ninstâœ : Nonempty Î±\nhPÎ± : LE.le (HMul.hMul P.parts.card (HPow.hPow 16 P.parts.card)) (Fintype.card Î±)\nhPÎµ : LE.le 100 (HMul.hMul (HPow.hPow 4 P.parts.card) (HPow.hPow Îµ 5))\nhÎµ : LE.le Îµ 1\nâŠ¢ LE.le 100 (HDiv.hDiv (Fintype.card Î±) (SzemerediRegularity.stepBound P.parts.card))","decl":"theorem hundred_le_m [Nonempty Î±] (hPÎ± : #P.parts * 16 ^ #P.parts â‰¤ card Î±)\n    (hPÎµ : 100 â‰¤ (4 : â„) ^ #P.parts * Îµ ^ 5) (hÎµ : Îµ â‰¤ 1) : 100 â‰¤ m :=\n  mod_cast\n    (hundred_div_Îµ_pow_five_le_m hPÎ± hPÎµ).trans'\n      (le_div_self (by norm_num) (by sz_positivity) <| pow_le_oneâ‚€ (by sz_positivity) hÎµ)\n\n"}
{"name":"SzemerediRegularity.a_add_one_le_four_pow_parts_card","module":"Mathlib.Combinatorics.SimpleGraph.Regularity.Bound","initialProofState":"Î± : Type u_1\ninstâœÂ¹ : DecidableEq Î±\ninstâœ : Fintype Î±\nP : Finpartition Finset.univ\nâŠ¢ LE.le (HAdd.hAdd (HSub.hSub (HDiv.hDiv (Fintype.card Î±) P.parts.card) (HMul.hMul (HDiv.hDiv (Fintype.card Î±) (SzemerediRegularity.stepBound P.parts.card)) (HPow.hPow 4 P.parts.card))) 1) (HPow.hPow 4 P.parts.card)","decl":"theorem a_add_one_le_four_pow_parts_card : a + 1 â‰¤ 4 ^ #P.parts := by\n  have h : 1 â‰¤ 4 ^ #P.parts := one_le_powâ‚€ (by norm_num)\n  rw [stepBound, â† Nat.div_div_eq_div_mul]\n  conv_rhs => rw [â† Nat.sub_add_cancel h]\n  rw [add_le_add_iff_right, tsub_le_iff_left, â† Nat.add_sub_assoc h]\n  exact Nat.le_sub_one_of_lt (Nat.lt_div_mul_add h)\n\n"}
{"name":"SzemerediRegularity.card_auxâ‚","module":"Mathlib.Combinatorics.SimpleGraph.Regularity.Bound","initialProofState":"Î± : Type u_1\ninstâœÂ¹ : DecidableEq Î±\ninstâœ : Fintype Î±\nP : Finpartition Finset.univ\nu : Finset Î±\nhucard : Eq u.card (HAdd.hAdd (HMul.hMul (HDiv.hDiv (Fintype.card Î±) (SzemerediRegularity.stepBound P.parts.card)) (HPow.hPow 4 P.parts.card)) (HSub.hSub (HDiv.hDiv (Fintype.card Î±) P.parts.card) (HMul.hMul (HDiv.hDiv (Fintype.card Î±) (SzemerediRegularity.stepBound P.parts.card)) (HPow.hPow 4 P.parts.card))))\nâŠ¢ Eq (HAdd.hAdd (HMul.hMul (HSub.hSub (HPow.hPow 4 P.parts.card) (HSub.hSub (HDiv.hDiv (Fintype.card Î±) P.parts.card) (HMul.hMul (HDiv.hDiv (Fintype.card Î±) (SzemerediRegularity.stepBound P.parts.card)) (HPow.hPow 4 P.parts.card)))) (HDiv.hDiv (Fintype.card Î±) (SzemerediRegularity.stepBound P.parts.card))) (HMul.hMul (HSub.hSub (HDiv.hDiv (Fintype.card Î±) P.parts.card) (HMul.hMul (HDiv.hDiv (Fintype.card Î±) (SzemerediRegularity.stepBound P.parts.card)) (HPow.hPow 4 P.parts.card))) (HAdd.hAdd (HDiv.hDiv (Fintype.card Î±) (SzemerediRegularity.stepBound P.parts.card)) 1))) u.card","decl":"theorem card_auxâ‚ (hucard : #u = m * 4 ^ #P.parts + a) :\n    (4 ^ #P.parts - a) * m + a * (m + 1) = #u := by\n  rw [hucard, mul_add, mul_one, â† add_assoc, â† add_mul,\n    Nat.sub_add_cancel ((Nat.le_succ _).trans a_add_one_le_four_pow_parts_card), mul_comm]\n\n"}
{"name":"SzemerediRegularity.card_auxâ‚‚","module":"Mathlib.Combinatorics.SimpleGraph.Regularity.Bound","initialProofState":"Î± : Type u_1\ninstâœÂ¹ : DecidableEq Î±\ninstâœ : Fintype Î±\nP : Finpartition Finset.univ\nu : Finset Î±\nhP : P.IsEquipartition\nhu : Membership.mem P.parts u\nhucard : Ne u.card (HAdd.hAdd (HMul.hMul (HDiv.hDiv (Fintype.card Î±) (SzemerediRegularity.stepBound P.parts.card)) (HPow.hPow 4 P.parts.card)) (HSub.hSub (HDiv.hDiv (Fintype.card Î±) P.parts.card) (HMul.hMul (HDiv.hDiv (Fintype.card Î±) (SzemerediRegularity.stepBound P.parts.card)) (HPow.hPow 4 P.parts.card))))\nâŠ¢ Eq (HAdd.hAdd (HMul.hMul (HSub.hSub (HPow.hPow 4 P.parts.card) (HAdd.hAdd (HSub.hSub (HDiv.hDiv (Fintype.card Î±) P.parts.card) (HMul.hMul (HDiv.hDiv (Fintype.card Î±) (SzemerediRegularity.stepBound P.parts.card)) (HPow.hPow 4 P.parts.card))) 1)) (HDiv.hDiv (Fintype.card Î±) (SzemerediRegularity.stepBound P.parts.card))) (HMul.hMul (HAdd.hAdd (HSub.hSub (HDiv.hDiv (Fintype.card Î±) P.parts.card) (HMul.hMul (HDiv.hDiv (Fintype.card Î±) (SzemerediRegularity.stepBound P.parts.card)) (HPow.hPow 4 P.parts.card))) 1) (HAdd.hAdd (HDiv.hDiv (Fintype.card Î±) (SzemerediRegularity.stepBound P.parts.card)) 1))) u.card","decl":"theorem card_auxâ‚‚ (hP : P.IsEquipartition) (hu : u âˆˆ P.parts) (hucard : #u â‰  m * 4 ^ #P.parts + a) :\n    (4 ^ #P.parts - (a + 1)) * m + (a + 1) * (m + 1) = #u := by\n  have : m * 4 ^ #P.parts â‰¤ card Î± / #P.parts := by\n    rw [stepBound, â† Nat.div_div_eq_div_mul]\n    exact Nat.div_mul_le_self _ _\n  rw [Nat.add_sub_of_le this] at hucard\n  rw [(hP.card_parts_eq_average hu).resolve_left hucard, mul_add, mul_one, â† add_assoc, â† add_mul,\n    Nat.sub_add_cancel a_add_one_le_four_pow_parts_card, â† add_assoc, mul_comm,\n    Nat.add_sub_of_le this, card_univ]\n\n"}
{"name":"SzemerediRegularity.pow_mul_m_le_card_part","module":"Mathlib.Combinatorics.SimpleGraph.Regularity.Bound","initialProofState":"Î± : Type u_1\ninstâœÂ¹ : DecidableEq Î±\ninstâœ : Fintype Î±\nP : Finpartition Finset.univ\nu : Finset Î±\nhP : P.IsEquipartition\nhu : Membership.mem P.parts u\nâŠ¢ LE.le (HMul.hMul (HPow.hPow 4 P.parts.card) â†‘(HDiv.hDiv (Fintype.card Î±) (SzemerediRegularity.stepBound P.parts.card))) â†‘u.card","decl":"theorem pow_mul_m_le_card_part (hP : P.IsEquipartition) (hu : u âˆˆ P.parts) :\n    (4 : â„) ^ #P.parts * m â‰¤ #u := by\n  norm_cast\n  rw [stepBound, â† Nat.div_div_eq_div_mul]\n  exact (Nat.mul_div_le _ _).trans (hP.average_le_card_part hu)\n\n"}
{"name":"SzemerediRegularity.le_initialBound","module":"Mathlib.Combinatorics.SimpleGraph.Regularity.Bound","initialProofState":"Îµ : Real\nl : Nat\nâŠ¢ LE.le l (SzemerediRegularity.initialBound Îµ l)","decl":"theorem le_initialBound : l â‰¤ initialBound Îµ l :=\n  (le_max_left _ _).trans <| le_max_right _ _\n\n"}
{"name":"SzemerediRegularity.seven_le_initialBound","module":"Mathlib.Combinatorics.SimpleGraph.Regularity.Bound","initialProofState":"Îµ : Real\nl : Nat\nâŠ¢ LE.le 7 (SzemerediRegularity.initialBound Îµ l)","decl":"theorem seven_le_initialBound : 7 â‰¤ initialBound Îµ l :=\n  le_max_left _ _\n\n"}
{"name":"SzemerediRegularity.initialBound_pos","module":"Mathlib.Combinatorics.SimpleGraph.Regularity.Bound","initialProofState":"Îµ : Real\nl : Nat\nâŠ¢ LT.lt 0 (SzemerediRegularity.initialBound Îµ l)","decl":"theorem initialBound_pos : 0 < initialBound Îµ l :=\n  Nat.succ_pos'.trans_le <| seven_le_initialBound _ _\n\n"}
{"name":"SzemerediRegularity.hundred_lt_pow_initialBound_mul","module":"Mathlib.Combinatorics.SimpleGraph.Regularity.Bound","initialProofState":"Îµ : Real\nhÎµ : LT.lt 0 Îµ\nl : Nat\nâŠ¢ LT.lt 100 (HMul.hMul (HPow.hPow 4 (SzemerediRegularity.initialBound Îµ l)) (HPow.hPow Îµ 5))","decl":"theorem hundred_lt_pow_initialBound_mul {Îµ : â„} (hÎµ : 0 < Îµ) (l : â„•) :\n    100 < â†‘4 ^ initialBound Îµ l * Îµ ^ 5 := by\n  rw [â† rpow_natCast 4, â† div_lt_iffâ‚€ (pow_pos hÎµ 5), lt_rpow_iff_log_lt _ zero_lt_four, â†\n    div_lt_iffâ‚€, initialBound, Nat.cast_max, Nat.cast_max]\n  Â· push_cast\n    exact lt_max_of_lt_right (lt_max_of_lt_right <| Nat.lt_floor_add_one _)\n  Â· exact log_pos (by norm_num)\n  Â· exact div_pos (by norm_num) (pow_pos hÎµ 5)\n\n"}
{"name":"SzemerediRegularity.initialBound_le_bound","module":"Mathlib.Combinatorics.SimpleGraph.Regularity.Bound","initialProofState":"Îµ : Real\nl : Nat\nâŠ¢ LE.le (SzemerediRegularity.initialBound Îµ l) (SzemerediRegularity.bound Îµ l)","decl":"theorem initialBound_le_bound : initialBound Îµ l â‰¤ bound Îµ l :=\n  (id_le_iterate_of_id_le le_stepBound _ _).trans <| Nat.le_mul_of_pos_right _ <| by positivity\n\n"}
{"name":"SzemerediRegularity.le_bound","module":"Mathlib.Combinatorics.SimpleGraph.Regularity.Bound","initialProofState":"Îµ : Real\nl : Nat\nâŠ¢ LE.le l (SzemerediRegularity.bound Îµ l)","decl":"theorem le_bound : l â‰¤ bound Îµ l :=\n  (le_initialBound Îµ l).trans <| initialBound_le_bound Îµ l\n\n"}
{"name":"SzemerediRegularity.bound_pos","module":"Mathlib.Combinatorics.SimpleGraph.Regularity.Bound","initialProofState":"Îµ : Real\nl : Nat\nâŠ¢ LT.lt 0 (SzemerediRegularity.bound Îµ l)","decl":"theorem bound_pos : 0 < bound Îµ l :=\n  (initialBound_pos Îµ l).trans_le <| initialBound_le_bound Îµ l\n\n"}
{"name":"SzemerediRegularity.mul_sq_le_sum_sq","module":"Mathlib.Combinatorics.SimpleGraph.Regularity.Bound","initialProofState":"Î¹ : Type u_2\nğ•œ : Type u_3\ninstâœ : LinearOrderedField ğ•œ\ns t : Finset Î¹\nx : ğ•œ\nhst : HasSubset.Subset s t\nf : Î¹ â†’ ğ•œ\nhs : LE.le (HPow.hPow x 2) (HPow.hPow (HDiv.hDiv (s.sum fun i => f i) â†‘s.card) 2)\nhs' : Ne (â†‘s.card) 0\nâŠ¢ LE.le (HMul.hMul (â†‘s.card) (HPow.hPow x 2)) (t.sum fun i => HPow.hPow (f i) 2)","decl":"theorem mul_sq_le_sum_sq (hst : s âŠ† t) (f : Î¹ â†’ ğ•œ) (hs : x ^ 2 â‰¤ ((âˆ‘ i âˆˆ s, f i) / #s) ^ 2)\n    (hs' : (#s : ğ•œ) â‰  0) : (#s : ğ•œ) * x ^ 2 â‰¤ âˆ‘ i âˆˆ t, f i ^ 2 :=\n  (mul_le_mul_of_nonneg_left (hs.trans sum_div_card_sq_le_sum_sq_div_card) <|\n    Nat.cast_nonneg _).trans <| (mul_div_cancelâ‚€ _ hs').le.trans <|\n      sum_le_sum_of_subset_of_nonneg hst fun _ _ _ => sq_nonneg _\n\n"}
{"name":"SzemerediRegularity.add_div_le_sum_sq_div_card","module":"Mathlib.Combinatorics.SimpleGraph.Regularity.Bound","initialProofState":"Î¹ : Type u_2\nğ•œ : Type u_3\ninstâœ : LinearOrderedField ğ•œ\ns t : Finset Î¹\nx : ğ•œ\nhst : HasSubset.Subset s t\nf : Î¹ â†’ ğ•œ\nd : ğ•œ\nhx : LE.le 0 x\nhs : LE.le x (abs (HSub.hSub (HDiv.hDiv (s.sum fun i => f i) â†‘s.card) (HDiv.hDiv (t.sum fun i => f i) â†‘t.card)))\nht : LE.le d (HPow.hPow (HDiv.hDiv (t.sum fun i => f i) â†‘t.card) 2)\nâŠ¢ LE.le (HAdd.hAdd d (HMul.hMul (HDiv.hDiv â†‘s.card â†‘t.card) (HPow.hPow x 2))) (HDiv.hDiv (t.sum fun i => HPow.hPow (f i) 2) â†‘t.card)","decl":"theorem add_div_le_sum_sq_div_card (hst : s âŠ† t) (f : Î¹ â†’ ğ•œ) (d : ğ•œ) (hx : 0 â‰¤ x)\n    (hs : x â‰¤ |(âˆ‘ i âˆˆ s, f i) / #s - (âˆ‘ i âˆˆ t, f i) / #t|) (ht : d â‰¤ ((âˆ‘ i âˆˆ t, f i) / #t) ^ 2) :\n    d + #s / #t * x ^ 2 â‰¤ (âˆ‘ i âˆˆ t, f i ^ 2) / #t := by\n  obtain hscard | hscard := ((#s).cast_nonneg : (0 : ğ•œ) â‰¤ #s).eq_or_lt\n  Â· simpa [â† hscard] using ht.trans sum_div_card_sq_le_sum_sq_div_card\n  have htcard : (0 : ğ•œ) < #t := hscard.trans_le (Nat.cast_le.2 (card_le_card hst))\n  have hâ‚ : x ^ 2 â‰¤ ((âˆ‘ i âˆˆ s, f i) / #s - (âˆ‘ i âˆˆ t, f i) / #t) ^ 2 :=\n    sq_le_sq.2 (by rwa [abs_of_nonneg hx])\n  have hâ‚‚ : x ^ 2 â‰¤ ((âˆ‘ i âˆˆ s, (f i - (âˆ‘ j âˆˆ t, f j) / #t)) / #s) ^ 2 := by\n    apply hâ‚.trans\n    rw [sum_sub_distrib, sum_const, nsmul_eq_mul, sub_div, mul_div_cancel_leftâ‚€ _ hscard.ne']\n  apply (add_le_add_right ht _).trans\n  rw [â† mul_div_right_comm, le_div_iffâ‚€ htcard, add_mul, div_mul_cancelâ‚€ _ htcard.ne']\n  have hâ‚ƒ := mul_sq_le_sum_sq hst (fun i => (f i - (âˆ‘ j âˆˆ t, f j) / #t)) hâ‚‚ hscard.ne'\n  apply (add_le_add_left hâ‚ƒ _).trans\n  -- Porting note: was\n  -- simp [â† mul_div_right_comm _ (#t : ğ•œ), sub_div' _ _ _ htcard.ne', â† sum_div, â† add_div,\n  --   mul_pow, div_le_iffâ‚€ (sq_pos_of_ne_zero htcard.ne'), sub_sq, sum_add_distrib, â† sum_mul,\n  --   â† mul_sum]\n  simp_rw [sub_div' _ _ _ htcard.ne']\n  conv_lhs => enter [2, 2, x]; rw [div_pow]\n  rw [div_pow, â† sum_div, â† mul_div_right_comm _ (#t : ğ•œ), â† add_div,\n    div_le_iffâ‚€ (sq_pos_of_ne_zero htcard.ne')]\n  simp_rw [sub_sq, sum_add_distrib, sum_const, nsmul_eq_mul, sum_sub_distrib, mul_pow, â† sum_mul,\n    â† mul_sum, â† sum_mul]\n  ring_nf; rfl\n\n"}
