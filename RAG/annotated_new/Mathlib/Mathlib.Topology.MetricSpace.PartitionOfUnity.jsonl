{"name":"EMetric.eventually_nhds_zero_forall_closedBall_subset","module":"Mathlib.Topology.MetricSpace.PartitionOfUnity","initialProofState":"Î¹ : Type u_1\nX : Type u_2\ninstâœ : EMetricSpace X\nK U : Î¹ â†’ Set X\nhK : âˆ€ (i : Î¹), IsClosed (K i)\nhU : âˆ€ (i : Î¹), IsOpen (U i)\nhKU : âˆ€ (i : Î¹), HasSubset.Subset (K i) (U i)\nhfin : LocallyFinite K\nx : X\nâŠ¢ Filter.Eventually (fun p => âˆ€ (i : Î¹), Membership.mem (K i) p.2 â†’ HasSubset.Subset (EMetric.closedBall p.2 p.1) (U i)) (SProd.sprod (nhds 0) (nhds x))","decl":"/-- Let `K : Î¹ â†’ Set X` be a locally finite family of closed sets in an emetric space. Let\n`U : Î¹ â†’ Set X` be a family of open sets such that `K i âŠ† U i` for all `i`. Then for any point\n`x : X`, for sufficiently small `r : â„â‰¥0âˆ` and for `y` sufficiently close to `x`, for all `i`, if\n`y âˆˆ K i`, then `EMetric.closedBall y r âŠ† U i`. -/\ntheorem eventually_nhds_zero_forall_closedBall_subset (hK : âˆ€ i, IsClosed (K i))\n    (hU : âˆ€ i, IsOpen (U i)) (hKU : âˆ€ i, K i âŠ† U i) (hfin : LocallyFinite K) (x : X) :\n    âˆ€á¶  p : â„â‰¥0âˆ Ã— X in ğ“ 0 Ã—Ë¢ ğ“ x, âˆ€ i, p.2 âˆˆ K i â†’ closedBall p.2 p.1 âŠ† U i := by\n  suffices âˆ€ i, x âˆˆ K i â†’ âˆ€á¶  p : â„â‰¥0âˆ Ã— X in ğ“ 0 Ã—Ë¢ ğ“ x, closedBall p.2 p.1 âŠ† U i by\n    apply mp_mem ((eventually_all_finite (hfin.point_finite x)).2 this)\n      (mp_mem (@tendsto_snd â„â‰¥0âˆ _ (ğ“ 0) _ _ (hfin.iInter_compl_mem_nhds hK x)) _)\n    apply univ_mem'\n    rintro âŸ¨r, yâŸ© hxy hyU i hi\n    simp only [mem_iInter, mem_compl_iff, not_imp_not, mem_preimage] at hxy\n    exact hyU _ (hxy _ hi)\n  intro i hi\n  rcases nhds_basis_closed_eball.mem_iff.1 ((hU i).mem_nhds <| hKU i hi) with âŸ¨R, hRâ‚€, hRâŸ©\n  rcases ENNReal.lt_iff_exists_nnreal_btwn.mp hRâ‚€ with âŸ¨r, hrâ‚€, hrRâŸ©\n  filter_upwards [prod_mem_prod (eventually_lt_nhds hrâ‚€)\n      (closedBall_mem_nhds x (tsub_pos_iff_lt.2 hrR))] with p hp z hz\n  apply hR\n  calc\n    edist z x â‰¤ edist z p.2 + edist p.2 x := edist_triangle _ _ _\n    _ â‰¤ p.1 + (R - p.1) := add_le_add hz <| le_trans hp.2 <| tsub_le_tsub_left hp.1.out.le _\n    _ = R := add_tsub_cancel_of_le (lt_trans (by exact hp.1) hrR).le\n\n"}
{"name":"EMetric.exists_forall_closedBall_subset_auxâ‚","module":"Mathlib.Topology.MetricSpace.PartitionOfUnity","initialProofState":"Î¹ : Type u_1\nX : Type u_2\ninstâœ : EMetricSpace X\nK U : Î¹ â†’ Set X\nhK : âˆ€ (i : Î¹), IsClosed (K i)\nhU : âˆ€ (i : Î¹), IsOpen (U i)\nhKU : âˆ€ (i : Î¹), HasSubset.Subset (K i) (U i)\nhfin : LocallyFinite K\nx : X\nâŠ¢ Exists fun r => Filter.Eventually (fun y => Membership.mem (Inter.inter (Set.Ioi 0) (Set.preimage ENNReal.ofReal (Set.iInter fun i => Set.iInter fun x => setOf fun r => HasSubset.Subset (EMetric.closedBall y r) (U i)))) r) (nhds x)","decl":"theorem exists_forall_closedBall_subset_auxâ‚ (hK : âˆ€ i, IsClosed (K i)) (hU : âˆ€ i, IsOpen (U i))\n    (hKU : âˆ€ i, K i âŠ† U i) (hfin : LocallyFinite K) (x : X) :\n    âˆƒ r : â„, âˆ€á¶  y in ğ“ x,\n      r âˆˆ Ioi (0 : â„) âˆ© ENNReal.ofReal â»Â¹' â‹‚ (i) (_ : y âˆˆ K i), { r | closedBall y r âŠ† U i } := by\n  have := (ENNReal.continuous_ofReal.tendsto' 0 0 ENNReal.ofReal_zero).eventually\n    (eventually_nhds_zero_forall_closedBall_subset hK hU hKU hfin x).curry\n  rcases this.exists_gt with âŸ¨r, hr0, hrâŸ©\n  refine âŸ¨r, hr.mono fun y hy => âŸ¨hr0, ?_âŸ©âŸ©\n  rwa [mem_preimage, mem_iInterâ‚‚]\n\n"}
{"name":"EMetric.exists_forall_closedBall_subset_auxâ‚‚","module":"Mathlib.Topology.MetricSpace.PartitionOfUnity","initialProofState":"Î¹ : Type u_1\nX : Type u_2\ninstâœ : EMetricSpace X\nK U : Î¹ â†’ Set X\ny : X\nâŠ¢ Convex Real (Inter.inter (Set.Ioi 0) (Set.preimage ENNReal.ofReal (Set.iInter fun i => Set.iInter fun x => setOf fun r => HasSubset.Subset (EMetric.closedBall y r) (U i))))","decl":"theorem exists_forall_closedBall_subset_auxâ‚‚ (y : X) :\n    Convex â„\n      (Ioi (0 : â„) âˆ© ENNReal.ofReal â»Â¹' â‹‚ (i) (_ : y âˆˆ K i), { r | closedBall y r âŠ† U i }) :=\n  (convex_Ioi _).inter <| OrdConnected.convex <| OrdConnected.preimage_ennreal_ofReal <|\n    ordConnected_iInter fun i => ordConnected_iInter fun (_ : y âˆˆ K i) =>\n      ordConnected_setOf_closedBall_subset y (U i)\n\n"}
{"name":"EMetric.exists_continuous_real_forall_closedBall_subset","module":"Mathlib.Topology.MetricSpace.PartitionOfUnity","initialProofState":"Î¹ : Type u_1\nX : Type u_2\ninstâœ : EMetricSpace X\nK U : Î¹ â†’ Set X\nhK : âˆ€ (i : Î¹), IsClosed (K i)\nhU : âˆ€ (i : Î¹), IsOpen (U i)\nhKU : âˆ€ (i : Î¹), HasSubset.Subset (K i) (U i)\nhfin : LocallyFinite K\nâŠ¢ Exists fun Î´ => And (âˆ€ (x : X), LT.lt 0 (Î´ x)) (âˆ€ (i : Î¹) (x : X), Membership.mem (K i) x â†’ HasSubset.Subset (EMetric.closedBall x (ENNReal.ofReal (Î´ x))) (U i))","decl":"/-- Let `X` be an extended metric space. Let `K : Î¹ â†’ Set X` be a locally finite family of closed\nsets, let `U : Î¹ â†’ Set X` be a family of open sets such that `K i âŠ† U i` for all `i`. Then there\nexists a positive continuous function `Î´ : C(X, â„)` such that for any `i` and `x âˆˆ K i`,\nwe have `EMetric.closedBall x (ENNReal.ofReal (Î´ x)) âŠ† U i`. -/\ntheorem exists_continuous_real_forall_closedBall_subset (hK : âˆ€ i, IsClosed (K i))\n    (hU : âˆ€ i, IsOpen (U i)) (hKU : âˆ€ i, K i âŠ† U i) (hfin : LocallyFinite K) :\n    âˆƒ Î´ : C(X, â„), (âˆ€ x, 0 < Î´ x) âˆ§\n      âˆ€ (i), âˆ€ x âˆˆ K i, closedBall x (ENNReal.ofReal <| Î´ x) âŠ† U i := by\n  simpa only [mem_inter_iff, forall_and, mem_preimage, mem_iInter, @forall_swap Î¹ X] using\n    exists_continuous_forall_mem_convex_of_local_const exists_forall_closedBall_subset_auxâ‚‚\n      (exists_forall_closedBall_subset_auxâ‚ hK hU hKU hfin)\n\n"}
{"name":"EMetric.exists_continuous_nnreal_forall_closedBall_subset","module":"Mathlib.Topology.MetricSpace.PartitionOfUnity","initialProofState":"Î¹ : Type u_1\nX : Type u_2\ninstâœ : EMetricSpace X\nK U : Î¹ â†’ Set X\nhK : âˆ€ (i : Î¹), IsClosed (K i)\nhU : âˆ€ (i : Î¹), IsOpen (U i)\nhKU : âˆ€ (i : Î¹), HasSubset.Subset (K i) (U i)\nhfin : LocallyFinite K\nâŠ¢ Exists fun Î´ => And (âˆ€ (x : X), LT.lt 0 (Î´ x)) (âˆ€ (i : Î¹) (x : X), Membership.mem (K i) x â†’ HasSubset.Subset (EMetric.closedBall x â†‘(Î´ x)) (U i))","decl":"/-- Let `X` be an extended metric space. Let `K : Î¹ â†’ Set X` be a locally finite family of closed\nsets, let `U : Î¹ â†’ Set X` be a family of open sets such that `K i âŠ† U i` for all `i`. Then there\nexists a positive continuous function `Î´ : C(X, â„â‰¥0)` such that for any `i` and `x âˆˆ K i`,\nwe have `EMetric.closedBall x (Î´ x) âŠ† U i`. -/\ntheorem exists_continuous_nnreal_forall_closedBall_subset (hK : âˆ€ i, IsClosed (K i))\n    (hU : âˆ€ i, IsOpen (U i)) (hKU : âˆ€ i, K i âŠ† U i) (hfin : LocallyFinite K) :\n    âˆƒ Î´ : C(X, â„â‰¥0), (âˆ€ x, 0 < Î´ x) âˆ§ âˆ€ (i), âˆ€ x âˆˆ K i, closedBall x (Î´ x) âŠ† U i := by\n  rcases exists_continuous_real_forall_closedBall_subset hK hU hKU hfin with âŸ¨Î´, hÎ´â‚€, hÎ´âŸ©\n  lift Î´ to C(X, â„â‰¥0) using fun x => (hÎ´â‚€ x).le\n  refine âŸ¨Î´, hÎ´â‚€, fun i x hi => ?_âŸ©\n  simpa only [â† ENNReal.ofReal_coe_nnreal] using hÎ´ i x hi\n\n"}
{"name":"EMetric.exists_continuous_eNNReal_forall_closedBall_subset","module":"Mathlib.Topology.MetricSpace.PartitionOfUnity","initialProofState":"Î¹ : Type u_1\nX : Type u_2\ninstâœ : EMetricSpace X\nK U : Î¹ â†’ Set X\nhK : âˆ€ (i : Î¹), IsClosed (K i)\nhU : âˆ€ (i : Î¹), IsOpen (U i)\nhKU : âˆ€ (i : Î¹), HasSubset.Subset (K i) (U i)\nhfin : LocallyFinite K\nâŠ¢ Exists fun Î´ => And (âˆ€ (x : X), LT.lt 0 (Î´ x)) (âˆ€ (i : Î¹) (x : X), Membership.mem (K i) x â†’ HasSubset.Subset (EMetric.closedBall x (Î´ x)) (U i))","decl":"/-- Let `X` be an extended metric space. Let `K : Î¹ â†’ Set X` be a locally finite family of closed\nsets, let `U : Î¹ â†’ Set X` be a family of open sets such that `K i âŠ† U i` for all `i`. Then there\nexists a positive continuous function `Î´ : C(X, â„â‰¥0âˆ)` such that for any `i` and `x âˆˆ K i`,\nwe have `EMetric.closedBall x (Î´ x) âŠ† U i`. -/\ntheorem exists_continuous_eNNReal_forall_closedBall_subset (hK : âˆ€ i, IsClosed (K i))\n    (hU : âˆ€ i, IsOpen (U i)) (hKU : âˆ€ i, K i âŠ† U i) (hfin : LocallyFinite K) :\n    âˆƒ Î´ : C(X, â„â‰¥0âˆ), (âˆ€ x, 0 < Î´ x) âˆ§ âˆ€ (i), âˆ€ x âˆˆ K i, closedBall x (Î´ x) âŠ† U i :=\n  let âŸ¨Î´, hÎ´â‚€, hÎ´âŸ© := exists_continuous_nnreal_forall_closedBall_subset hK hU hKU hfin\n  âŸ¨ContinuousMap.comp âŸ¨Coe.coe, ENNReal.continuous_coeâŸ© Î´, fun x => ENNReal.coe_pos.2 (hÎ´â‚€ x), hÎ´âŸ©\n\n"}
{"name":"Metric.exists_continuous_nnreal_forall_closedBall_subset","module":"Mathlib.Topology.MetricSpace.PartitionOfUnity","initialProofState":"Î¹ : Type u_1\nX : Type u_2\ninstâœ : MetricSpace X\nK U : Î¹ â†’ Set X\nhK : âˆ€ (i : Î¹), IsClosed (K i)\nhU : âˆ€ (i : Î¹), IsOpen (U i)\nhKU : âˆ€ (i : Î¹), HasSubset.Subset (K i) (U i)\nhfin : LocallyFinite K\nâŠ¢ Exists fun Î´ => And (âˆ€ (x : X), LT.lt 0 (Î´ x)) (âˆ€ (i : Î¹) (x : X), Membership.mem (K i) x â†’ HasSubset.Subset (Metric.closedBall x â†‘(Î´ x)) (U i))","decl":"/-- Let `X` be a metric space. Let `K : Î¹ â†’ Set X` be a locally finite family of closed sets, let\n`U : Î¹ â†’ Set X` be a family of open sets such that `K i âŠ† U i` for all `i`. Then there exists a\npositive continuous function `Î´ : C(X, â„â‰¥0)` such that for any `i` and `x âˆˆ K i`, we have\n`Metric.closedBall x (Î´ x) âŠ† U i`. -/\ntheorem exists_continuous_nnreal_forall_closedBall_subset (hK : âˆ€ i, IsClosed (K i))\n    (hU : âˆ€ i, IsOpen (U i)) (hKU : âˆ€ i, K i âŠ† U i) (hfin : LocallyFinite K) :\n    âˆƒ Î´ : C(X, â„â‰¥0), (âˆ€ x, 0 < Î´ x) âˆ§ âˆ€ (i), âˆ€ x âˆˆ K i, closedBall x (Î´ x) âŠ† U i := by\n  rcases EMetric.exists_continuous_nnreal_forall_closedBall_subset hK hU hKU hfin with âŸ¨Î´, hÎ´0, hÎ´âŸ©\n  refine âŸ¨Î´, hÎ´0, fun i x hx => ?_âŸ©\n  rw [â† emetric_closedBall_nnreal]\n  exact hÎ´ i x hx\n\n"}
{"name":"Metric.exists_continuous_real_forall_closedBall_subset","module":"Mathlib.Topology.MetricSpace.PartitionOfUnity","initialProofState":"Î¹ : Type u_1\nX : Type u_2\ninstâœ : MetricSpace X\nK U : Î¹ â†’ Set X\nhK : âˆ€ (i : Î¹), IsClosed (K i)\nhU : âˆ€ (i : Î¹), IsOpen (U i)\nhKU : âˆ€ (i : Î¹), HasSubset.Subset (K i) (U i)\nhfin : LocallyFinite K\nâŠ¢ Exists fun Î´ => And (âˆ€ (x : X), LT.lt 0 (Î´ x)) (âˆ€ (i : Î¹) (x : X), Membership.mem (K i) x â†’ HasSubset.Subset (Metric.closedBall x (Î´ x)) (U i))","decl":"/-- Let `X` be a metric space. Let `K : Î¹ â†’ Set X` be a locally finite family of closed sets, let\n`U : Î¹ â†’ Set X` be a family of open sets such that `K i âŠ† U i` for all `i`. Then there exists a\npositive continuous function `Î´ : C(X, â„)` such that for any `i` and `x âˆˆ K i`, we have\n`Metric.closedBall x (Î´ x) âŠ† U i`. -/\ntheorem exists_continuous_real_forall_closedBall_subset (hK : âˆ€ i, IsClosed (K i))\n    (hU : âˆ€ i, IsOpen (U i)) (hKU : âˆ€ i, K i âŠ† U i) (hfin : LocallyFinite K) :\n    âˆƒ Î´ : C(X, â„), (âˆ€ x, 0 < Î´ x) âˆ§ âˆ€ (i), âˆ€ x âˆˆ K i, closedBall x (Î´ x) âŠ† U i :=\n  let âŸ¨Î´, hÎ´â‚€, hÎ´âŸ© := exists_continuous_nnreal_forall_closedBall_subset hK hU hKU hfin\n  âŸ¨ContinuousMap.comp âŸ¨Coe.coe, NNReal.continuous_coeâŸ© Î´, hÎ´â‚€, hÎ´âŸ©\n\n"}
