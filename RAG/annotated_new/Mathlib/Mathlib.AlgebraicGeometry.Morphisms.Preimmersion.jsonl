{"name":"AlgebraicGeometry.IsPreimmersion.base_embedding","module":"Mathlib.AlgebraicGeometry.Morphisms.Preimmersion","initialProofState":"X Y : AlgebraicGeometry.Scheme\nf : Quiver.Hom X Y\nself : AlgebraicGeometry.IsPreimmersion f\n⊢ Topology.IsEmbedding ⇑f.base","decl":"/-- A morphism of schemes `f : X ⟶ Y` is a preimmersion if the underlying map of\ntopological spaces is an embedding and the induced morphisms of stalks are all surjective. -/\n@[mk_iff]\nclass IsPreimmersion {X Y : Scheme} (f : X ⟶ Y) extends SurjectiveOnStalks f : Prop where\n  base_embedding : IsEmbedding f.base\n\n"}
{"name":"AlgebraicGeometry.IsPreimmersion.toSurjectiveOnStalks","module":"Mathlib.AlgebraicGeometry.Morphisms.Preimmersion","initialProofState":"X Y : AlgebraicGeometry.Scheme\nf : Quiver.Hom X Y\nself : AlgebraicGeometry.IsPreimmersion f\n⊢ AlgebraicGeometry.SurjectiveOnStalks f","decl":"/-- A morphism of schemes `f : X ⟶ Y` is a preimmersion if the underlying map of\ntopological spaces is an embedding and the induced morphisms of stalks are all surjective. -/\n@[mk_iff]\nclass IsPreimmersion {X Y : Scheme} (f : X ⟶ Y) extends SurjectiveOnStalks f : Prop where\n  base_embedding : IsEmbedding f.base\n\n"}
{"name":"AlgebraicGeometry.isPreimmersion_iff","module":"Mathlib.AlgebraicGeometry.Morphisms.Preimmersion","initialProofState":"X Y : AlgebraicGeometry.Scheme\nf : Quiver.Hom X Y\n⊢ Iff (AlgebraicGeometry.IsPreimmersion f) (And (AlgebraicGeometry.SurjectiveOnStalks f) (Topology.IsEmbedding ⇑f.base))","decl":"/-- A morphism of schemes `f : X ⟶ Y` is a preimmersion if the underlying map of\ntopological spaces is an embedding and the induced morphisms of stalks are all surjective. -/\n@[mk_iff]\nclass IsPreimmersion {X Y : Scheme} (f : X ⟶ Y) extends SurjectiveOnStalks f : Prop where\n  base_embedding : IsEmbedding f.base\n\n"}
{"name":"AlgebraicGeometry.Scheme.Hom.isEmbedding","module":"Mathlib.AlgebraicGeometry.Morphisms.Preimmersion","initialProofState":"X Y : AlgebraicGeometry.Scheme\nf : X.Hom Y\ninst✝ : AlgebraicGeometry.IsPreimmersion f\n⊢ Topology.IsEmbedding ⇑f.base","decl":"lemma Scheme.Hom.isEmbedding {X Y : Scheme} (f : Hom X Y) [IsPreimmersion f] : IsEmbedding f.base :=\n  IsPreimmersion.base_embedding\n\n"}
{"name":"AlgebraicGeometry.Scheme.Hom.embedding","module":"Mathlib.AlgebraicGeometry.Morphisms.Preimmersion","initialProofState":"X Y : AlgebraicGeometry.Scheme\nf : X.Hom Y\ninst✝ : AlgebraicGeometry.IsPreimmersion f\n⊢ Topology.IsEmbedding ⇑f.base","decl":"@[deprecated (since := \"2024-10-26\")]\nalias Scheme.Hom.embedding := Scheme.Hom.isEmbedding\n\n"}
{"name":"AlgebraicGeometry.isPreimmersion_eq_inf","module":"Mathlib.AlgebraicGeometry.Morphisms.Preimmersion","initialProofState":"⊢ Eq (@AlgebraicGeometry.IsPreimmersion) (Min.min (@AlgebraicGeometry.SurjectiveOnStalks) (AlgebraicGeometry.topologically fun {α β} [TopologicalSpace α] [TopologicalSpace β] => Topology.IsEmbedding))","decl":"lemma isPreimmersion_eq_inf :\n    @IsPreimmersion = (@SurjectiveOnStalks ⊓ topologically IsEmbedding : MorphismProperty _) := by\n  ext\n  rw [isPreimmersion_iff]\n  rfl\n\n"}
{"name":"AlgebraicGeometry.IsPreimmersion.instIsLocalAtTarget","module":"Mathlib.AlgebraicGeometry.Morphisms.Preimmersion","initialProofState":"⊢ AlgebraicGeometry.IsLocalAtTarget @AlgebraicGeometry.IsPreimmersion","decl":"instance : IsLocalAtTarget @IsPreimmersion :=\n  isPreimmersion_eq_inf ▸ inferInstance\n\n"}
{"name":"AlgebraicGeometry.IsPreimmersion.instOfIsOpenImmersion","module":"Mathlib.AlgebraicGeometry.Morphisms.Preimmersion","initialProofState":"X Y : AlgebraicGeometry.Scheme\nf : Quiver.Hom X Y\ninst✝ : AlgebraicGeometry.IsOpenImmersion f\n⊢ AlgebraicGeometry.IsPreimmersion f","decl":"instance (priority := 900) {X Y : Scheme} (f : X ⟶ Y) [IsOpenImmersion f] : IsPreimmersion f where\n  base_embedding := f.isOpenEmbedding.isEmbedding\n  surj_on_stalks _ := (ConcreteCategory.bijective_of_isIso _).2\n\n"}
{"name":"AlgebraicGeometry.IsPreimmersion.instIsMultiplicativeScheme","module":"Mathlib.AlgebraicGeometry.Morphisms.Preimmersion","initialProofState":"⊢ CategoryTheory.MorphismProperty.IsMultiplicative @AlgebraicGeometry.IsPreimmersion","decl":"instance : MorphismProperty.IsMultiplicative @IsPreimmersion where\n  id_mem _ := inferInstance\n  comp_mem f g _ _ := ⟨g.isEmbedding.comp f.isEmbedding⟩\n\n"}
{"name":"AlgebraicGeometry.IsPreimmersion.comp","module":"Mathlib.AlgebraicGeometry.Morphisms.Preimmersion","initialProofState":"X Y Z : AlgebraicGeometry.Scheme\nf : Quiver.Hom X Y\ng : Quiver.Hom Y Z\ninst✝¹ : AlgebraicGeometry.IsPreimmersion f\ninst✝ : AlgebraicGeometry.IsPreimmersion g\n⊢ AlgebraicGeometry.IsPreimmersion (CategoryTheory.CategoryStruct.comp f g)","decl":"instance comp {X Y Z : Scheme} (f : X ⟶ Y) (g : Y ⟶ Z) [IsPreimmersion f]\n    [IsPreimmersion g] : IsPreimmersion (f ≫ g) :=\n  MorphismProperty.IsStableUnderComposition.comp_mem f g inferInstance inferInstance\n\n"}
{"name":"AlgebraicGeometry.IsPreimmersion.instMonoScheme","module":"Mathlib.AlgebraicGeometry.Morphisms.Preimmersion","initialProofState":"X Y : AlgebraicGeometry.Scheme\nf : Quiver.Hom X Y\ninst✝ : AlgebraicGeometry.IsPreimmersion f\n⊢ CategoryTheory.Mono f","decl":"instance (priority := 900) {X Y} (f : X ⟶ Y) [IsPreimmersion f] : Mono f := by\n  refine (Scheme.forgetToLocallyRingedSpace ⋙\n    LocallyRingedSpace.forgetToSheafedSpace).mono_of_mono_map ?_\n  apply SheafedSpace.mono_of_base_injective_of_stalk_epi\n  · exact f.isEmbedding.injective\n  · exact fun x ↦ ConcreteCategory.epi_of_surjective _ (f.stalkMap_surjective x)\n\n"}
{"name":"AlgebraicGeometry.IsPreimmersion.of_comp","module":"Mathlib.AlgebraicGeometry.Morphisms.Preimmersion","initialProofState":"X Y Z : AlgebraicGeometry.Scheme\nf : Quiver.Hom X Y\ng : Quiver.Hom Y Z\ninst✝¹ : AlgebraicGeometry.IsPreimmersion g\ninst✝ : AlgebraicGeometry.IsPreimmersion (CategoryTheory.CategoryStruct.comp f g)\n⊢ AlgebraicGeometry.IsPreimmersion f","decl":"theorem of_comp {X Y Z : Scheme} (f : X ⟶ Y) (g : Y ⟶ Z) [IsPreimmersion g]\n    [IsPreimmersion (f ≫ g)] : IsPreimmersion f where\n  base_embedding := by\n    have h := (f ≫ g).isEmbedding\n    rwa [← g.isEmbedding.of_comp_iff]\n  surj_on_stalks x := by\n    have h := (f ≫ g).stalkMap_surjective x\n    rw [Scheme.stalkMap_comp] at h\n    exact Function.Surjective.of_comp h\n\n"}
{"name":"AlgebraicGeometry.IsPreimmersion.comp_iff","module":"Mathlib.AlgebraicGeometry.Morphisms.Preimmersion","initialProofState":"X Y Z : AlgebraicGeometry.Scheme\nf : Quiver.Hom X Y\ng : Quiver.Hom Y Z\ninst✝ : AlgebraicGeometry.IsPreimmersion g\n⊢ Iff (AlgebraicGeometry.IsPreimmersion (CategoryTheory.CategoryStruct.comp f g)) (AlgebraicGeometry.IsPreimmersion f)","decl":"theorem comp_iff {X Y Z : Scheme} (f : X ⟶ Y) (g : Y ⟶ Z) [IsPreimmersion g] :\n    IsPreimmersion (f ≫ g) ↔ IsPreimmersion f :=\n  ⟨fun _ ↦ of_comp f g, fun _ ↦ inferInstance⟩\n\n"}
{"name":"AlgebraicGeometry.IsPreimmersion.Spec_map_iff","module":"Mathlib.AlgebraicGeometry.Morphisms.Preimmersion","initialProofState":"R S : CommRingCat\nf : Quiver.Hom R S\n⊢ Iff (AlgebraicGeometry.IsPreimmersion (AlgebraicGeometry.Spec.map f)) (And (Topology.IsEmbedding ⇑(PrimeSpectrum.comap (CommRingCat.Hom.hom f))) (CommRingCat.Hom.hom f).SurjectiveOnStalks)","decl":"lemma Spec_map_iff {R S : CommRingCat.{u}} (f : R ⟶ S) :\n    IsPreimmersion (Spec.map f) ↔ IsEmbedding (PrimeSpectrum.comap f.hom) ∧\n      f.hom.SurjectiveOnStalks := by\n  haveI : (RingHom.toMorphismProperty <| fun f ↦ Function.Surjective f).RespectsIso := by\n    rw [← RingHom.toMorphismProperty_respectsIso_iff]\n    exact RingHom.surjective_respectsIso\n  rw [← HasRingHomProperty.Spec_iff (P := @SurjectiveOnStalks), isPreimmersion_iff, and_comm]\n  rfl\n\n"}
{"name":"AlgebraicGeometry.IsPreimmersion.mk_Spec_map","module":"Mathlib.AlgebraicGeometry.Morphisms.Preimmersion","initialProofState":"R S : CommRingCat\nf : Quiver.Hom R S\nh₁ : Topology.IsEmbedding ⇑(PrimeSpectrum.comap (CommRingCat.Hom.hom f))\nh₂ : (CommRingCat.Hom.hom f).SurjectiveOnStalks\n⊢ AlgebraicGeometry.IsPreimmersion (AlgebraicGeometry.Spec.map f)","decl":"lemma mk_Spec_map {R S : CommRingCat.{u}} {f : R ⟶ S}\n    (h₁ : IsEmbedding (PrimeSpectrum.comap f.hom)) (h₂ : f.hom.SurjectiveOnStalks) :\n    IsPreimmersion (Spec.map f) :=\n  (Spec_map_iff f).mpr ⟨h₁, h₂⟩\n\n"}
{"name":"AlgebraicGeometry.IsPreimmersion.of_isLocalization","module":"Mathlib.AlgebraicGeometry.Morphisms.Preimmersion","initialProofState":"R S : Type u\ninst✝³ : CommRing R\nM : Submonoid R\ninst✝² : CommRing S\ninst✝¹ : Algebra R S\ninst✝ : IsLocalization M S\n⊢ AlgebraicGeometry.IsPreimmersion (AlgebraicGeometry.Spec.map (CommRingCat.ofHom (algebraMap R S)))","decl":"lemma of_isLocalization {R S : Type u} [CommRing R] (M : Submonoid R) [CommRing S]\n    [Algebra R S] [IsLocalization M S] :\n    IsPreimmersion (Spec.map (CommRingCat.ofHom <| algebraMap R S)) :=\n  IsPreimmersion.mk_Spec_map\n    (PrimeSpectrum.localization_comap_isEmbedding (R := R) S M)\n    (RingHom.surjectiveOnStalks_of_isLocalization (M := M) S)\n\n"}
{"name":"AlgebraicGeometry.IsPreimmersion.instIsStableUnderBaseChangeScheme","module":"Mathlib.AlgebraicGeometry.Morphisms.Preimmersion","initialProofState":"⊢ CategoryTheory.MorphismProperty.IsStableUnderBaseChange @AlgebraicGeometry.IsPreimmersion","decl":"open Limits MorphismProperty in\ninstance : IsStableUnderBaseChange @IsPreimmersion := by\n  refine .mk' fun X Y Z f g _ _ ↦ ?_\n  have := pullback_fst (P := @SurjectiveOnStalks) f g inferInstance\n  constructor\n  let L (x : (pullback f g :)) : { x : X × Y | f.base x.1 = g.base x.2 } :=\n    ⟨⟨(pullback.fst f g).base x, (pullback.snd f g).base x⟩,\n    by simp only [Set.mem_setOf, ← Scheme.comp_base_apply, pullback.condition]⟩\n  have : IsEmbedding L := IsEmbedding.of_comp (by fun_prop) continuous_subtype_val\n    (SurjectiveOnStalks.isEmbedding_pullback f g)\n  exact IsEmbedding.subtypeVal.comp ((TopCat.pullbackHomeoPreimage _ f.continuous _\n    g.isEmbedding).isEmbedding.comp this)\n\n"}
