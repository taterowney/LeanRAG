{"name":"AlgebraicGeometry.ProjIsoSpecTopComponent.ToSpec.mk_mem_carrier","module":"Mathlib.AlgebraicGeometry.ProjectiveSpectrum.Scheme","initialProofState":"R : Type u_1\nA : Type u_2\ninstâœÂ³ : CommRing R\ninstâœÂ² : CommRing A\ninstâœÂ¹ : Algebra R A\nğ’œ : Nat â†’ Submodule R A\ninstâœ : GradedAlgebra ğ’œ\nf : A\nx : â†‘((AlgebraicGeometry.Proj.toLocallyRingedSpace ğ’œ).restrict â‹¯).toTopCat\nz : HomogeneousLocalization.NumDenSameDeg ğ’œ (Submonoid.powers f)\nâŠ¢ Iff (Membership.mem (AlgebraicGeometry.ProjIsoSpecTopComponent.ToSpec.carrier x) (HomogeneousLocalization.mk z)) (Membership.mem (â†‘x).asHomogeneousIdeal â†‘z.num)","decl":"@[simp]\ntheorem mk_mem_carrier (z : HomogeneousLocalization.NumDenSameDeg ğ’œ (.powers f)) :\n    HomogeneousLocalization.mk z âˆˆ carrier x â†” z.num.1 âˆˆ x.1.asHomogeneousIdeal := by\n  rw [carrier, Ideal.mem_comap, HomogeneousLocalization.algebraMap_apply,\n    HomogeneousLocalization.val_mk, Localization.mk_eq_mk', IsLocalization.mk'_eq_mul_mk'_one,\n    mul_comm, Ideal.unit_mul_mem_iff_mem, â† Ideal.mem_comap,\n    IsLocalization.comap_map_of_isPrime_disjoint (.powers f)]\n  Â· rfl\n  Â· infer_instance\n  Â· exact (disjoint_powers_iff_not_mem _ (Ideal.IsPrime.isRadical inferInstance)).mpr x.2\n  Â· exact isUnit_of_invertible _\n\n"}
{"name":"AlgebraicGeometry.ProjIsoSpecTopComponent.ToSpec.isPrime_carrier","module":"Mathlib.AlgebraicGeometry.ProjectiveSpectrum.Scheme","initialProofState":"R : Type u_1\nA : Type u_2\ninstâœÂ³ : CommRing R\ninstâœÂ² : CommRing A\ninstâœÂ¹ : Algebra R A\nğ’œ : Nat â†’ Submodule R A\ninstâœ : GradedAlgebra ğ’œ\nf : A\nx : â†‘((AlgebraicGeometry.Proj.toLocallyRingedSpace ğ’œ).restrict â‹¯).toTopCat\nâŠ¢ (AlgebraicGeometry.ProjIsoSpecTopComponent.ToSpec.carrier x).IsPrime","decl":"theorem isPrime_carrier : Ideal.IsPrime (carrier x) := by\n  refine Ideal.IsPrime.comap _ (hK := ?_)\n  exact IsLocalization.isPrime_of_isPrime_disjoint\n    (Submonoid.powers f) _ _ inferInstance\n    ((disjoint_powers_iff_not_mem _ (Ideal.IsPrime.isRadical inferInstance)).mpr x.2)\n\n"}
{"name":"AlgebraicGeometry.ProjIsoSpecTopComponent.ToSpec.toFun_asIdeal","module":"Mathlib.AlgebraicGeometry.ProjectiveSpectrum.Scheme","initialProofState":"R : Type u_1\nA : Type u_2\ninstâœÂ³ : CommRing R\ninstâœÂ² : CommRing A\ninstâœÂ¹ : Algebra R A\nğ’œ : Nat â†’ Submodule R A\ninstâœ : GradedAlgebra ğ’œ\nf : A\nx : â†‘â†‘((AlgebraicGeometry.Proj.toLocallyRingedSpace ğ’œ).restrict â‹¯).toPresheafedSpace\nâŠ¢ Eq (AlgebraicGeometry.ProjIsoSpecTopComponent.ToSpec.toFun f x).asIdeal (AlgebraicGeometry.ProjIsoSpecTopComponent.ToSpec.carrier x)","decl":"/-- The function between the basic open set `D(f)` in `Proj` to the corresponding basic open set in\n`Spec Aâ°_f`. This is bundled into a continuous map in `TopComponent.forward`.\n-/\n@[simps (config := .lemmasOnly)]\ndef toFun (x : Proj.T| pbo f) : Spec.T Aâ°_ f :=\n  âŸ¨carrier x, isPrime_carrier xâŸ©\n\n/-\nThe preimage of basic open set `D(a/f^n)` in `Spec Aâ°_f` under the forward map from `Proj A` to\n`Spec Aâ°_f` is the basic open set `D(a) âˆ© D(f)` in `Proj A`. This lemma is used to prove that the\nforward map is continuous.\n-/\n"}
{"name":"AlgebraicGeometry.ProjIsoSpecTopComponent.ToSpec.preimage_basicOpen","module":"Mathlib.AlgebraicGeometry.ProjectiveSpectrum.Scheme","initialProofState":"R : Type u_1\nA : Type u_2\ninstâœÂ³ : CommRing R\ninstâœÂ² : CommRing A\ninstâœÂ¹ : Algebra R A\nğ’œ : Nat â†’ Submodule R A\ninstâœ : GradedAlgebra ğ’œ\nf : A\nz : HomogeneousLocalization.NumDenSameDeg ğ’œ (Submonoid.powers f)\nâŠ¢ Eq (Set.preimage (AlgebraicGeometry.ProjIsoSpecTopComponent.ToSpec.toFun f) â†‘(PrimeSpectrum.basicOpen (HomogeneousLocalization.mk z))) (Set.preimage Subtype.val â†‘(ProjectiveSpectrum.basicOpen ğ’œ â†‘z.num))","decl":"theorem preimage_basicOpen (z : HomogeneousLocalization.NumDenSameDeg ğ’œ (.powers f)) :\n    toFun f â»Â¹' (sbo (HomogeneousLocalization.mk z) : Set (PrimeSpectrum (Aâ°_ f))) =\n      Subtype.val â»Â¹' (pbo z.num.1 : Set (ProjectiveSpectrum ğ’œ)) :=\n  Set.ext fun y â†¦ (mk_mem_carrier y z).not\n\n"}
{"name":"AlgebraicGeometry.ProjIsoSpecTopComponent.toSpec_apply_asIdeal","module":"Mathlib.AlgebraicGeometry.ProjectiveSpectrum.Scheme","initialProofState":"R : Type u_1\nA : Type u_2\ninstâœÂ³ : CommRing R\ninstâœÂ² : CommRing A\ninstâœÂ¹ : Algebra R A\nğ’œ : Nat â†’ Submodule R A\ninstâœ : GradedAlgebra ğ’œ\nf : A\nx : â†‘â†‘((AlgebraicGeometry.Proj.toLocallyRingedSpace ğ’œ).restrict â‹¯).toPresheafedSpace\nâŠ¢ Eq ((AlgebraicGeometry.ProjIsoSpecTopComponent.toSpec ğ’œ f) x).asIdeal (AlgebraicGeometry.ProjIsoSpecTopComponent.ToSpec.carrier x)","decl":"/-- The continuous function from the basic open set `D(f)` in `Proj`\nto the corresponding basic open set in `Spec Aâ°_f`. -/\n@[simps! (config := .lemmasOnly) apply_asIdeal]\ndef toSpec (f : A) : (Proj.T| pbo f) âŸ¶ Spec.T Aâ°_ f where\n  toFun := ToSpec.toFun f\n  continuous_toFun := by\n    rw [PrimeSpectrum.isTopologicalBasis_basic_opens.continuous_iff]\n    rintro _ âŸ¨x, rflâŸ©\n    obtain âŸ¨x, rflâŸ© := Quotient.mk''_surjective x\n    rw [ToSpec.preimage_basicOpen]\n    exact (pbo x.num).2.preimage continuous_subtype_val\n\n"}
{"name":"AlgebraicGeometry.ProjIsoSpecTopComponent.toSpec_preimage_basicOpen","module":"Mathlib.AlgebraicGeometry.ProjectiveSpectrum.Scheme","initialProofState":"R : Type u_1\nA : Type u_2\ninstâœÂ³ : CommRing R\ninstâœÂ² : CommRing A\ninstâœÂ¹ : Algebra R A\nğ’œ : Nat â†’ Submodule R A\ninstâœ : GradedAlgebra ğ’œ\nf : A\nz : HomogeneousLocalization.NumDenSameDeg ğ’œ (Submonoid.powers f)\nâŠ¢ Eq (Set.preimage â‡‘(AlgebraicGeometry.ProjIsoSpecTopComponent.toSpec ğ’œ f) â†‘(PrimeSpectrum.basicOpen (HomogeneousLocalization.mk z))) (Set.preimage Subtype.val â†‘(ProjectiveSpectrum.basicOpen ğ’œ â†‘z.num))","decl":"variable {ğ’œ} in\nlemma toSpec_preimage_basicOpen {f} (z : HomogeneousLocalization.NumDenSameDeg ğ’œ (.powers f)) :\n    toSpec ğ’œ f â»Â¹' (sbo (HomogeneousLocalization.mk z) : Set (PrimeSpectrum (Aâ°_ f))) =\n      Subtype.val â»Â¹' (pbo z.num.1 : Set (ProjectiveSpectrum ğ’œ)) :=\n  ToSpec.preimage_basicOpen f z\n\n"}
{"name":"AlgebraicGeometry.ProjIsoSpecTopComponent.FromSpec.mem_carrier_iff","module":"Mathlib.AlgebraicGeometry.ProjectiveSpectrum.Scheme","initialProofState":"R : Type u_1\nA : Type u_2\ninstâœÂ³ : CommRing R\ninstâœÂ² : CommRing A\ninstâœÂ¹ : Algebra R A\nğ’œ : Nat â†’ Submodule R A\ninstâœ : GradedAlgebra ğ’œ\nf : A\nm : Nat\nf_deg : Membership.mem (ğ’œ m) f\nq : â†‘â†‘(AlgebraicGeometry.Spec.locallyRingedSpaceObj (CommRingCat.of (HomogeneousLocalization.Away ğ’œ f))).toPresheafedSpace\na : A\nâŠ¢ Iff (Membership.mem (AlgebraicGeometry.ProjIsoSpecTopComponent.FromSpec.carrier f_deg q) a) (âˆ€ (i : Nat), Membership.mem q.asIdeal (HomogeneousLocalization.mk { deg := HMul.hMul m i, num := âŸ¨HPow.hPow ((GradedAlgebra.proj ğ’œ i) a) m, â‹¯âŸ©, den := âŸ¨HPow.hPow f i, â‹¯âŸ©, den_mem := â‹¯ }))","decl":"theorem mem_carrier_iff (q : Spec.T Aâ°_ f) (a : A) :\n    a âˆˆ carrier f_deg q â†” âˆ€ i, (HomogeneousLocalization.mk âŸ¨m * i, âŸ¨proj ğ’œ i a ^ m, by\n      rw [â† smul_eq_mul]; mem_tacâŸ©,\n      âŸ¨f ^ i, by rw [mul_comm]; mem_tacâŸ©, âŸ¨_, rflâŸ©âŸ© : Aâ°_ f) âˆˆ q.1 :=\n  Iff.rfl\n\n"}
{"name":"AlgebraicGeometry.ProjIsoSpecTopComponent.FromSpec.mem_carrier_iff'","module":"Mathlib.AlgebraicGeometry.ProjectiveSpectrum.Scheme","initialProofState":"R : Type u_1\nA : Type u_2\ninstâœÂ³ : CommRing R\ninstâœÂ² : CommRing A\ninstâœÂ¹ : Algebra R A\nğ’œ : Nat â†’ Submodule R A\ninstâœ : GradedAlgebra ğ’œ\nf : A\nm : Nat\nf_deg : Membership.mem (ğ’œ m) f\nq : â†‘â†‘(AlgebraicGeometry.Spec.locallyRingedSpaceObj (CommRingCat.of (HomogeneousLocalization.Away ğ’œ f))).toPresheafedSpace\na : A\nâŠ¢ Iff (Membership.mem (AlgebraicGeometry.ProjIsoSpecTopComponent.FromSpec.carrier f_deg q) a) (âˆ€ (i : Nat), Membership.mem (Set.image (â‡‘(algebraMap (HomogeneousLocalization.Away ğ’œ f) (Localization.Away f))) (setOf fun s => Membership.mem q.asIdeal s)) (Localization.mk (HPow.hPow ((GradedAlgebra.proj ğ’œ i) a) m) âŸ¨HPow.hPow f i, â‹¯âŸ©))","decl":"theorem mem_carrier_iff' (q : Spec.T Aâ°_ f) (a : A) :\n    a âˆˆ carrier f_deg q â†”\n      âˆ€ i, (Localization.mk (proj ğ’œ i a ^ m) âŸ¨f ^ i, âŸ¨i, rflâŸ©âŸ© : Localization.Away f) âˆˆ\n          algebraMap (HomogeneousLocalization.Away ğ’œ f) (Localization.Away f) '' { s | s âˆˆ q.1 } :=\n  (mem_carrier_iff f_deg q a).trans\n    (by\n      constructor <;> intro h i <;> specialize h i\n      Â· rw [Set.mem_image]; refine âŸ¨_, h, rflâŸ©\n      Â· rw [Set.mem_image] at h; rcases h with âŸ¨x, h, hxâŸ©\n        change x âˆˆ q.asIdeal at h\n        convert h\n        rw [HomogeneousLocalization.ext_iff_val, HomogeneousLocalization.val_mk]\n        dsimp only [Subtype.coe_mk]; rw [â† hx]; rfl)\n\n"}
{"name":"AlgebraicGeometry.ProjIsoSpecTopComponent.FromSpec.mem_carrier_iff_of_mem","module":"Mathlib.AlgebraicGeometry.ProjectiveSpectrum.Scheme","initialProofState":"R : Type u_1\nA : Type u_2\ninstâœÂ³ : CommRing R\ninstâœÂ² : CommRing A\ninstâœÂ¹ : Algebra R A\nğ’œ : Nat â†’ Submodule R A\ninstâœ : GradedAlgebra ğ’œ\nf : A\nm : Nat\nf_deg : Membership.mem (ğ’œ m) f\nhm : LT.lt 0 m\nq : â†‘â†‘(AlgebraicGeometry.Spec.locallyRingedSpaceObj (CommRingCat.of (HomogeneousLocalization.Away ğ’œ f))).toPresheafedSpace\na : A\nn : Nat\nhn : Membership.mem (ğ’œ n) a\nâŠ¢ Iff (Membership.mem (AlgebraicGeometry.ProjIsoSpecTopComponent.FromSpec.carrier f_deg q) a) (Membership.mem q.asIdeal (HomogeneousLocalization.mk { deg := HMul.hMul m n, num := âŸ¨HPow.hPow a m, â‹¯âŸ©, den := âŸ¨HPow.hPow f n, â‹¯âŸ©, den_mem := â‹¯ }))","decl":"theorem mem_carrier_iff_of_mem (hm : 0 < m) (q : Spec.T Aâ°_ f) (a : A) {n} (hn : a âˆˆ ğ’œ n) :\n    a âˆˆ carrier f_deg q â†”\n      (HomogeneousLocalization.mk âŸ¨m * n, âŸ¨a ^ m, pow_mem_graded m hnâŸ©,\n        âŸ¨f ^ n, by rw [mul_comm]; mem_tacâŸ©, âŸ¨_, rflâŸ©âŸ© : Aâ°_ f) âˆˆ q.asIdeal := by\n  trans (HomogeneousLocalization.mk âŸ¨m * n, âŸ¨proj ğ’œ n a ^ m, by rw [â† smul_eq_mul]; mem_tacâŸ©,\n    âŸ¨f ^ n, by rw [mul_comm]; mem_tacâŸ©, âŸ¨_, rflâŸ©âŸ© : Aâ°_ f) âˆˆ q.asIdeal\n  Â· refine âŸ¨fun h â†¦ h n, fun h i â†¦ if hi : i = n then hi â–¸ h else ?_âŸ©\n    convert zero_mem q.asIdeal\n    apply HomogeneousLocalization.val_injective\n    simp only [proj_apply, decompose_of_mem_ne _ hn (Ne.symm hi), zero_pow hm.ne',\n      HomogeneousLocalization.val_mk, Localization.mk_zero, HomogeneousLocalization.val_zero]\n  Â· simp only [proj_apply, decompose_of_mem_same _ hn]\n\n"}
{"name":"AlgebraicGeometry.ProjIsoSpecTopComponent.FromSpec.mem_carrier_iff_of_mem_mul","module":"Mathlib.AlgebraicGeometry.ProjectiveSpectrum.Scheme","initialProofState":"R : Type u_1\nA : Type u_2\ninstâœÂ³ : CommRing R\ninstâœÂ² : CommRing A\ninstâœÂ¹ : Algebra R A\nğ’œ : Nat â†’ Submodule R A\ninstâœ : GradedAlgebra ğ’œ\nf : A\nm : Nat\nf_deg : Membership.mem (ğ’œ m) f\nhm : LT.lt 0 m\nq : â†‘â†‘(AlgebraicGeometry.Spec.locallyRingedSpaceObj (CommRingCat.of (HomogeneousLocalization.Away ğ’œ f))).toPresheafedSpace\na : A\nn : Nat\nhn : Membership.mem (ğ’œ (HMul.hMul n m)) a\nâŠ¢ Iff (Membership.mem (AlgebraicGeometry.ProjIsoSpecTopComponent.FromSpec.carrier f_deg q) a) (Membership.mem q.asIdeal (HomogeneousLocalization.mk { deg := HMul.hMul m n, num := âŸ¨a, â‹¯âŸ©, den := âŸ¨HPow.hPow f n, â‹¯âŸ©, den_mem := â‹¯ }))","decl":"theorem mem_carrier_iff_of_mem_mul (hm : 0 < m)\n    (q : Spec.T Aâ°_ f) (a : A) {n} (hn : a âˆˆ ğ’œ (n * m)) :\n    a âˆˆ carrier f_deg q â†” (HomogeneousLocalization.mk âŸ¨m * n, âŸ¨a, mul_comm n m â–¸ hnâŸ©,\n        âŸ¨f ^ n, by rw [mul_comm]; mem_tacâŸ©, âŸ¨_, rflâŸ©âŸ© : Aâ°_ f) âˆˆ q.asIdeal := by\n  rw [mem_carrier_iff_of_mem f_deg hm q a hn, iff_iff_eq, eq_comm,\n    â† Ideal.IsPrime.pow_mem_iff_mem (Î± := Aâ°_ f) inferInstance m hm]\n  congr 1\n  apply HomogeneousLocalization.val_injective\n  simp only [HomogeneousLocalization.val_mk, HomogeneousLocalization.val_pow,\n    Localization.mk_pow, pow_mul]\n  rfl\n\n"}
{"name":"AlgebraicGeometry.ProjIsoSpecTopComponent.FromSpec.num_mem_carrier_iff","module":"Mathlib.AlgebraicGeometry.ProjectiveSpectrum.Scheme","initialProofState":"R : Type u_1\nA : Type u_2\ninstâœÂ³ : CommRing R\ninstâœÂ² : CommRing A\ninstâœÂ¹ : Algebra R A\nğ’œ : Nat â†’ Submodule R A\ninstâœ : GradedAlgebra ğ’œ\nf : A\nm : Nat\nf_deg : Membership.mem (ğ’œ m) f\nhm : LT.lt 0 m\nq : â†‘â†‘(AlgebraicGeometry.Spec.locallyRingedSpaceObj (CommRingCat.of (HomogeneousLocalization.Away ğ’œ f))).toPresheafedSpace\nz : HomogeneousLocalization.NumDenSameDeg ğ’œ (Submonoid.powers f)\nâŠ¢ Iff (Membership.mem (AlgebraicGeometry.ProjIsoSpecTopComponent.FromSpec.carrier f_deg q) â†‘z.num) (Membership.mem q.asIdeal (HomogeneousLocalization.mk z))","decl":"theorem num_mem_carrier_iff (hm : 0 < m) (q : Spec.T Aâ°_ f)\n    (z : HomogeneousLocalization.NumDenSameDeg ğ’œ (.powers f)) :\n    z.num.1 âˆˆ carrier f_deg q â†” HomogeneousLocalization.mk z âˆˆ q.asIdeal := by\n  obtain âŸ¨n, hn : f ^ n = _âŸ© := z.den_mem\n  have : f ^ n â‰  0 := fun e â†¦ by\n    have := HomogeneousLocalization.subsingleton ğ’œ (x := .powers f) âŸ¨n, eâŸ©\n    exact IsEmpty.elim (inferInstanceAs (IsEmpty (PrimeSpectrum (Aâ°_ f)))) q\n  convert mem_carrier_iff_of_mem_mul f_deg hm q z.num.1 (n := n) ?_ using 2\n  Â· apply HomogeneousLocalization.val_injective; simp only [hn, HomogeneousLocalization.val_mk]\n  Â· have := degree_eq_of_mem_mem ğ’œ (SetLike.pow_mem_graded n f_deg) (hn.symm â–¸ z.den.2) this\n    rw [â† smul_eq_mul, this]; exact z.num.2\n\n"}
{"name":"AlgebraicGeometry.ProjIsoSpecTopComponent.FromSpec.carrier.add_mem","module":"Mathlib.AlgebraicGeometry.ProjectiveSpectrum.Scheme","initialProofState":"R : Type u_1\nA : Type u_2\ninstâœÂ³ : CommRing R\ninstâœÂ² : CommRing A\ninstâœÂ¹ : Algebra R A\nğ’œ : Nat â†’ Submodule R A\ninstâœ : GradedAlgebra ğ’œ\nf : A\nm : Nat\nf_deg : Membership.mem (ğ’œ m) f\nq : â†‘â†‘(AlgebraicGeometry.Spec.locallyRingedSpaceObj (CommRingCat.of (HomogeneousLocalization.Away ğ’œ f))).toPresheafedSpace\na b : A\nha : Membership.mem (AlgebraicGeometry.ProjIsoSpecTopComponent.FromSpec.carrier f_deg q) a\nhb : Membership.mem (AlgebraicGeometry.ProjIsoSpecTopComponent.FromSpec.carrier f_deg q) b\nâŠ¢ Membership.mem (AlgebraicGeometry.ProjIsoSpecTopComponent.FromSpec.carrier f_deg q) (HAdd.hAdd a b)","decl":"theorem carrier.add_mem (q : Spec.T Aâ°_ f) {a b : A} (ha : a âˆˆ carrier f_deg q)\n    (hb : b âˆˆ carrier f_deg q) : a + b âˆˆ carrier f_deg q := by\n  refine fun i => (q.2.mem_or_mem ?_).elim id id\n  change (HomogeneousLocalization.mk âŸ¨_, _, _, _âŸ© : Aâ°_ f) âˆˆ q.1; dsimp only [Subtype.coe_mk]\n  simp_rw [â† pow_add, map_add, add_pow, mul_comm, â† nsmul_eq_mul]\n  let g : â„• â†’ Aâ°_ f := fun j => (m + m).choose j â€¢\n      if h2 : m + m < j then (0 : Aâ°_ f)\n      else\n        -- Porting note: inlining `l`, `r` causes a \"can't synth HMul Aâ°_ f Aâ°_ f ?\" error\n        if h1 : j â‰¤ m then\n          letI l : Aâ°_ f := HomogeneousLocalization.mk\n            âŸ¨m * i, âŸ¨proj ğ’œ i a ^ j * proj ğ’œ i b ^ (m - j), ?_âŸ©,\n              âŸ¨_, by rw [mul_comm]; mem_tacâŸ©, âŸ¨i, rflâŸ©âŸ©\n          letI r : Aâ°_ f := HomogeneousLocalization.mk\n            âŸ¨m * i, âŸ¨proj ğ’œ i b ^ m, by rw [â† smul_eq_mul]; mem_tacâŸ©,\n              âŸ¨_, by rw [mul_comm]; mem_tacâŸ©, âŸ¨i, rflâŸ©âŸ©\n          l * r\n        else\n          letI l : Aâ°_ f := HomogeneousLocalization.mk\n            âŸ¨m * i, âŸ¨proj ğ’œ i a ^ m, by rw [â† smul_eq_mul]; mem_tacâŸ©,\n              âŸ¨_, by rw [mul_comm]; mem_tacâŸ©, âŸ¨i, rflâŸ©âŸ©\n          letI r : Aâ°_ f := HomogeneousLocalization.mk\n            âŸ¨m * i, âŸ¨proj ğ’œ i a ^ (j - m) * proj ğ’œ i b ^ (m + m - j), ?_âŸ©,\n              âŸ¨_, by rw [mul_comm]; mem_tacâŸ©, âŸ¨i, rflâŸ©âŸ©\n          l * r\n  rotate_left\n  Â· rw [(_ : m * i = _)]\n    -- Porting note: it seems unification with mul_mem is more fiddly reducing value of mem_tac\n    apply GradedMonoid.toGradedMul.mul_mem (i := j â€¢ i) (j := (m - j) â€¢ i) <;> mem_tac_aux\n    rw [â† add_smul, Nat.add_sub_of_le h1]; rfl\n  Â· rw [(_ : m * i = _)]\n    apply GradedMonoid.toGradedMul.mul_mem (i := (j-m) â€¢ i) (j := (m + m - j) â€¢ i) <;> mem_tac_aux\n    rw [â† add_smul]; congr; zify [le_of_not_lt h2, le_of_not_le h1]; abel\n  convert_to âˆ‘ i âˆˆ range (m + m + 1), g i âˆˆ q.1; swap\n  Â· refine q.1.sum_mem fun j _ => nsmul_mem ?_ _; split_ifs\n    exacts [q.1.zero_mem, q.1.mul_mem_left _ (hb i), q.1.mul_mem_right _ (ha i)]\n  rw [HomogeneousLocalization.ext_iff_val, HomogeneousLocalization.val_mk]\n  change _ = (algebraMap (HomogeneousLocalization.Away ğ’œ f) (Localization.Away f)) _\n  dsimp only [Subtype.coe_mk]; rw [map_sum, mk_sum]\n  apply Finset.sum_congr rfl fun j hj => _\n  intro j hj\n  change _ = HomogeneousLocalization.val _\n  rw [HomogeneousLocalization.val_smul]\n  split_ifs with h2 h1\n  Â· exact ((Finset.mem_range.1 hj).not_le h2).elim\n  all_goals simp only [HomogeneousLocalization.val_mul, HomogeneousLocalization.val_zero,\n    HomogeneousLocalization.val_mk, Subtype.coe_mk, Localization.mk_mul, â† smul_mk]; congr 2\n  Â· dsimp; rw [mul_assoc, â† pow_add, add_comm (m - j), Nat.add_sub_assoc h1]\n  Â· simp_rw [pow_add]; rfl\n  Â· dsimp; rw [â† mul_assoc, â† pow_add, Nat.add_sub_of_le (le_of_not_le h1)]\n  Â· simp_rw [pow_add]; rfl\n\n"}
{"name":"AlgebraicGeometry.ProjIsoSpecTopComponent.FromSpec.carrier.zero_mem","module":"Mathlib.AlgebraicGeometry.ProjectiveSpectrum.Scheme","initialProofState":"R : Type u_1\nA : Type u_2\ninstâœÂ³ : CommRing R\ninstâœÂ² : CommRing A\ninstâœÂ¹ : Algebra R A\nğ’œ : Nat â†’ Submodule R A\ninstâœ : GradedAlgebra ğ’œ\nf : A\nm : Nat\nf_deg : Membership.mem (ğ’œ m) f\nhm : LT.lt 0 m\nq : â†‘â†‘(AlgebraicGeometry.Spec.locallyRingedSpaceObj (CommRingCat.of (HomogeneousLocalization.Away ğ’œ f))).toPresheafedSpace\nâŠ¢ Membership.mem (AlgebraicGeometry.ProjIsoSpecTopComponent.FromSpec.carrier f_deg q) 0","decl":"theorem carrier.zero_mem : (0 : A) âˆˆ carrier f_deg q := fun i => by\n  convert Submodule.zero_mem q.1 using 1\n  rw [HomogeneousLocalization.ext_iff_val, HomogeneousLocalization.val_mk,\n    HomogeneousLocalization.val_zero]; simp_rw [map_zero, zero_pow hm.ne']\n  convert Localization.mk_zero (S := Submonoid.powers f) _ using 1\n\n"}
{"name":"AlgebraicGeometry.ProjIsoSpecTopComponent.FromSpec.carrier.smul_mem","module":"Mathlib.AlgebraicGeometry.ProjectiveSpectrum.Scheme","initialProofState":"R : Type u_1\nA : Type u_2\ninstâœÂ³ : CommRing R\ninstâœÂ² : CommRing A\ninstâœÂ¹ : Algebra R A\nğ’œ : Nat â†’ Submodule R A\ninstâœ : GradedAlgebra ğ’œ\nf : A\nm : Nat\nf_deg : Membership.mem (ğ’œ m) f\nhm : LT.lt 0 m\nq : â†‘â†‘(AlgebraicGeometry.Spec.locallyRingedSpaceObj (CommRingCat.of (HomogeneousLocalization.Away ğ’œ f))).toPresheafedSpace\nc x : A\nhx : Membership.mem (AlgebraicGeometry.ProjIsoSpecTopComponent.FromSpec.carrier f_deg q) x\nâŠ¢ Membership.mem (AlgebraicGeometry.ProjIsoSpecTopComponent.FromSpec.carrier f_deg q) (HSMul.hSMul c x)","decl":"theorem carrier.smul_mem (c x : A) (hx : x âˆˆ carrier f_deg q) : c â€¢ x âˆˆ carrier f_deg q := by\n  revert c\n  refine DirectSum.Decomposition.inductionOn ğ’œ ?_ ?_ ?_\n  Â· rw [zero_smul]; exact carrier.zero_mem f_deg hm _\n  Â· rintro n âŸ¨a, haâŸ© i\n    simp_rw [proj_apply, smul_eq_mul, coe_decompose_mul_of_left_mem ğ’œ i ha]\n    -- Porting note: having trouble with Mul instance\n    let product : Aâ°_ f :=\n      Mul.mul (HomogeneousLocalization.mk âŸ¨_, âŸ¨a ^ m, pow_mem_graded m haâŸ©, âŸ¨_, ?_âŸ©, âŸ¨n, rflâŸ©âŸ©)\n        (HomogeneousLocalization.mk âŸ¨_, âŸ¨proj ğ’œ (i - n) x ^ m, by mem_tacâŸ©, âŸ¨_, ?_âŸ©, âŸ¨i - n, rflâŸ©âŸ©)\n    Â· split_ifs with h\n      Â· convert_to product âˆˆ q.1\n        Â· dsimp [product]\n          erw [HomogeneousLocalization.ext_iff_val, HomogeneousLocalization.val_mk,\n            HomogeneousLocalization.val_mul, HomogeneousLocalization.val_mk,\n            HomogeneousLocalization.val_mk]\n          Â· simp_rw [mul_pow]; rw [Localization.mk_mul]\n            Â· congr; rw [â† pow_add, Nat.add_sub_of_le h]\n        Â· apply Ideal.mul_mem_left (Î± := Aâ°_ f) _ _ (hx _)\n          rw [(_ : m â€¢ n = _)]\n          Â· mem_tac\n          Â· simp only [smul_eq_mul, mul_comm]\n      Â· simpa only [map_zero, zero_pow hm.ne'] using zero_mem f_deg hm q i\n    rw [(_ : m â€¢ (i - n) = _)]\n    Â· mem_tac\n    Â· simp only [smul_eq_mul, mul_comm]\n  Â· simp_rw [add_smul]; exact fun _ _ => carrier.add_mem f_deg q\n\n"}
{"name":"AlgebraicGeometry.ProjIsoSpecTopComponent.FromSpec.carrier.asIdeal.homogeneous","module":"Mathlib.AlgebraicGeometry.ProjectiveSpectrum.Scheme","initialProofState":"R : Type u_1\nA : Type u_2\ninstâœÂ³ : CommRing R\ninstâœÂ² : CommRing A\ninstâœÂ¹ : Algebra R A\nğ’œ : Nat â†’ Submodule R A\ninstâœ : GradedAlgebra ğ’œ\nf : A\nm : Nat\nf_deg : Membership.mem (ğ’œ m) f\nhm : LT.lt 0 m\nq : â†‘â†‘(AlgebraicGeometry.Spec.locallyRingedSpaceObj (CommRingCat.of (HomogeneousLocalization.Away ğ’œ f))).toPresheafedSpace\nâŠ¢ Ideal.IsHomogeneous ğ’œ (AlgebraicGeometry.ProjIsoSpecTopComponent.FromSpec.carrier.asIdeal f_deg hm q)","decl":"theorem carrier.asIdeal.homogeneous : (carrier.asIdeal f_deg hm q).IsHomogeneous ğ’œ :=\n  fun i a ha j =>\n  (em (i = j)).elim (fun h => h â–¸ by simpa only [proj_apply, decompose_coe, of_eq_same] using ha _)\n    fun h => by\n    simpa only [proj_apply, decompose_of_mem_ne ğ’œ (Submodule.coe_mem (decompose ğ’œ a i)) h,\n      zero_pow hm.ne', map_zero] using carrier.zero_mem f_deg hm q j\n\n"}
{"name":"AlgebraicGeometry.ProjIsoSpecTopComponent.FromSpec.carrier.denom_not_mem","module":"Mathlib.AlgebraicGeometry.ProjectiveSpectrum.Scheme","initialProofState":"R : Type u_1\nA : Type u_2\ninstâœÂ³ : CommRing R\ninstâœÂ² : CommRing A\ninstâœÂ¹ : Algebra R A\nğ’œ : Nat â†’ Submodule R A\ninstâœ : GradedAlgebra ğ’œ\nf : A\nm : Nat\nf_deg : Membership.mem (ğ’œ m) f\nhm : LT.lt 0 m\nq : â†‘â†‘(AlgebraicGeometry.Spec.locallyRingedSpaceObj (CommRingCat.of (HomogeneousLocalization.Away ğ’œ f))).toPresheafedSpace\nâŠ¢ Not (Membership.mem (AlgebraicGeometry.ProjIsoSpecTopComponent.FromSpec.carrier.asIdeal f_deg hm q) f)","decl":"theorem carrier.denom_not_mem : f âˆ‰ carrier.asIdeal f_deg hm q := fun rid =>\n  q.isPrime.ne_top <|\n    (Ideal.eq_top_iff_one _).mpr\n      (by\n        convert rid m\n        rw [HomogeneousLocalization.ext_iff_val, HomogeneousLocalization.val_one,\n          HomogeneousLocalization.val_mk]\n        dsimp\n        simp_rw [decompose_of_mem_same _ f_deg]\n        simp only [mk_eq_monoidOf_mk', Submonoid.LocalizationMap.mk'_self])\n\n"}
{"name":"AlgebraicGeometry.ProjIsoSpecTopComponent.FromSpec.carrier.relevant","module":"Mathlib.AlgebraicGeometry.ProjectiveSpectrum.Scheme","initialProofState":"R : Type u_1\nA : Type u_2\ninstâœÂ³ : CommRing R\ninstâœÂ² : CommRing A\ninstâœÂ¹ : Algebra R A\nğ’œ : Nat â†’ Submodule R A\ninstâœ : GradedAlgebra ğ’œ\nf : A\nm : Nat\nf_deg : Membership.mem (ğ’œ m) f\nhm : LT.lt 0 m\nq : â†‘â†‘(AlgebraicGeometry.Spec.locallyRingedSpaceObj (CommRingCat.of (HomogeneousLocalization.Away ğ’œ f))).toPresheafedSpace\nâŠ¢ Not (LE.le (HomogeneousIdeal.irrelevant ğ’œ) (AlgebraicGeometry.ProjIsoSpecTopComponent.FromSpec.carrier.asHomogeneousIdeal f_deg hm q))","decl":"theorem carrier.relevant : Â¬HomogeneousIdeal.irrelevant ğ’œ â‰¤ carrier.asHomogeneousIdeal f_deg hm q :=\n  fun rid => carrier.denom_not_mem f_deg hm q <| rid <| DirectSum.decompose_of_mem_ne ğ’œ f_deg hm.ne'\n\n"}
{"name":"AlgebraicGeometry.ProjIsoSpecTopComponent.FromSpec.carrier.asIdeal.ne_top","module":"Mathlib.AlgebraicGeometry.ProjectiveSpectrum.Scheme","initialProofState":"R : Type u_1\nA : Type u_2\ninstâœÂ³ : CommRing R\ninstâœÂ² : CommRing A\ninstâœÂ¹ : Algebra R A\nğ’œ : Nat â†’ Submodule R A\ninstâœ : GradedAlgebra ğ’œ\nf : A\nm : Nat\nf_deg : Membership.mem (ğ’œ m) f\nhm : LT.lt 0 m\nq : â†‘â†‘(AlgebraicGeometry.Spec.locallyRingedSpaceObj (CommRingCat.of (HomogeneousLocalization.Away ğ’œ f))).toPresheafedSpace\nâŠ¢ Ne (AlgebraicGeometry.ProjIsoSpecTopComponent.FromSpec.carrier.asIdeal f_deg hm q) Top.top","decl":"theorem carrier.asIdeal.ne_top : carrier.asIdeal f_deg hm q â‰  âŠ¤ := fun rid =>\n  carrier.denom_not_mem f_deg hm q (rid.symm â–¸ Submodule.mem_top)\n\n"}
{"name":"AlgebraicGeometry.ProjIsoSpecTopComponent.FromSpec.carrier.asIdeal.prime","module":"Mathlib.AlgebraicGeometry.ProjectiveSpectrum.Scheme","initialProofState":"R : Type u_1\nA : Type u_2\ninstâœÂ³ : CommRing R\ninstâœÂ² : CommRing A\ninstâœÂ¹ : Algebra R A\nğ’œ : Nat â†’ Submodule R A\ninstâœ : GradedAlgebra ğ’œ\nf : A\nm : Nat\nf_deg : Membership.mem (ğ’œ m) f\nhm : LT.lt 0 m\nq : â†‘â†‘(AlgebraicGeometry.Spec.locallyRingedSpaceObj (CommRingCat.of (HomogeneousLocalization.Away ğ’œ f))).toPresheafedSpace\nâŠ¢ (AlgebraicGeometry.ProjIsoSpecTopComponent.FromSpec.carrier.asIdeal f_deg hm q).IsPrime","decl":"theorem carrier.asIdeal.prime : (carrier.asIdeal f_deg hm q).IsPrime :=\n  (carrier.asIdeal.homogeneous f_deg hm q).isPrime_of_homogeneous_mem_or_mem\n    (carrier.asIdeal.ne_top f_deg hm q) fun {x y} âŸ¨nx, hnxâŸ© âŸ¨ny, hnyâŸ© hxy =>\n    show (âˆ€ _, _ âˆˆ _) âˆ¨ âˆ€ _, _ âˆˆ _ by\n      rw [â† and_forall_ne nx, and_iff_left, â† and_forall_ne ny, and_iff_left]\n      Â· apply q.2.mem_or_mem; convert hxy (nx + ny) using 1\n        dsimp\n        simp_rw [decompose_of_mem_same ğ’œ hnx, decompose_of_mem_same ğ’œ hny,\n          decompose_of_mem_same ğ’œ (SetLike.GradedMonoid.toGradedMul.mul_mem hnx hny),\n          mul_pow, pow_add]\n        simp only [HomogeneousLocalization.ext_iff_val, HomogeneousLocalization.val_mk,\n          HomogeneousLocalization.val_mul, Localization.mk_mul]\n        simp only [Submonoid.mk_mul_mk, mk_eq_monoidOf_mk']\n      all_goals\n        intro n hn; convert q.1.zero_mem using 1\n        rw [HomogeneousLocalization.ext_iff_val, HomogeneousLocalization.val_mk,\n          HomogeneousLocalization.val_zero]; simp_rw [proj_apply]\n        convert mk_zero (S := Submonoid.powers f) _\n        rw [decompose_of_mem_ne ğ’œ _ hn.symm, zero_pow hm.ne']\n        Â· first | exact hnx | exact hny\n\n"}
{"name":"AlgebraicGeometry.ProjIsoSpecTopComponent.toSpec_fromSpec","module":"Mathlib.AlgebraicGeometry.ProjectiveSpectrum.Scheme","initialProofState":"R : Type u_1\nA : Type u_2\ninstâœÂ³ : CommRing R\ninstâœÂ² : CommRing A\ninstâœÂ¹ : Algebra R A\nğ’œ : Nat â†’ Submodule R A\ninstâœ : GradedAlgebra ğ’œ\nf : A\nm : Nat\nf_deg : Membership.mem (ğ’œ m) f\nhm : LT.lt 0 m\nx : â†‘â†‘(AlgebraicGeometry.Spec.locallyRingedSpaceObj (CommRingCat.of (HomogeneousLocalization.Away ğ’œ f))).toPresheafedSpace\nâŠ¢ Eq ((AlgebraicGeometry.ProjIsoSpecTopComponent.toSpec ğ’œ f) (AlgebraicGeometry.ProjIsoSpecTopComponent.FromSpec.toFun f_deg hm x)) x","decl":"lemma toSpec_fromSpec {f : A} {m : â„•} (f_deg : f âˆˆ ğ’œ m) (hm : 0 < m) (x : Spec.T (Aâ°_ f)) :\n    toSpec ğ’œ f (FromSpec.toFun f_deg hm x) = x := by\n  apply PrimeSpectrum.ext\n  ext z\n  obtain âŸ¨z, rflâŸ© := HomogeneousLocalization.mk_surjective z\n  rw [â† FromSpec.num_mem_carrier_iff f_deg hm x]\n  exact ToSpec.mk_mem_carrier _ z\n\n\n"}
{"name":"AlgebraicGeometry.ProjIsoSpecTopComponent.fromSpec_toSpec","module":"Mathlib.AlgebraicGeometry.ProjectiveSpectrum.Scheme","initialProofState":"R : Type u_1\nA : Type u_2\ninstâœÂ³ : CommRing R\ninstâœÂ² : CommRing A\ninstâœÂ¹ : Algebra R A\nğ’œ : Nat â†’ Submodule R A\ninstâœ : GradedAlgebra ğ’œ\nf : A\nm : Nat\nf_deg : Membership.mem (ğ’œ m) f\nhm : LT.lt 0 m\nx : â†‘â†‘((AlgebraicGeometry.Proj.toLocallyRingedSpace ğ’œ).restrict â‹¯).toPresheafedSpace\nâŠ¢ Eq (AlgebraicGeometry.ProjIsoSpecTopComponent.FromSpec.toFun f_deg hm ((AlgebraicGeometry.ProjIsoSpecTopComponent.toSpec ğ’œ f) x)) x","decl":"lemma fromSpec_toSpec {f : A} {m : â„•} (f_deg : f âˆˆ ğ’œ m) (hm : 0 < m) (x : Proj.T| pbo f) :\n    FromSpec.toFun f_deg hm (toSpec ğ’œ f x) = x := by\n  refine Subtype.ext <| ProjectiveSpectrum.ext <| HomogeneousIdeal.ext' ?_\n  intros i z hzi\n  refine (FromSpec.mem_carrier_iff_of_mem f_deg hm _ _ hzi).trans ?_\n  exact (ToSpec.mk_mem_carrier _ _).trans (x.1.2.pow_mem_iff_mem m hm)\n\n"}
{"name":"AlgebraicGeometry.ProjIsoSpecTopComponent.toSpec_injective","module":"Mathlib.AlgebraicGeometry.ProjectiveSpectrum.Scheme","initialProofState":"R : Type u_1\nA : Type u_2\ninstâœÂ³ : CommRing R\ninstâœÂ² : CommRing A\ninstâœÂ¹ : Algebra R A\nğ’œ : Nat â†’ Submodule R A\ninstâœ : GradedAlgebra ğ’œ\nf : A\nm : Nat\nf_deg : Membership.mem (ğ’œ m) f\nhm : LT.lt 0 m\nâŠ¢ Function.Injective â‡‘(AlgebraicGeometry.ProjIsoSpecTopComponent.toSpec ğ’œ f)","decl":"lemma toSpec_injective {f : A} {m : â„•} (f_deg : f âˆˆ ğ’œ m) (hm : 0 < m) :\n    Function.Injective (toSpec ğ’œ f) := by\n  intro xâ‚ xâ‚‚ h\n  have := congr_arg (FromSpec.toFun f_deg hm) h\n  rwa [fromSpec_toSpec, fromSpec_toSpec] at this\n\n"}
{"name":"AlgebraicGeometry.ProjIsoSpecTopComponent.toSpec_surjective","module":"Mathlib.AlgebraicGeometry.ProjectiveSpectrum.Scheme","initialProofState":"R : Type u_1\nA : Type u_2\ninstâœÂ³ : CommRing R\ninstâœÂ² : CommRing A\ninstâœÂ¹ : Algebra R A\nğ’œ : Nat â†’ Submodule R A\ninstâœ : GradedAlgebra ğ’œ\nf : A\nm : Nat\nf_deg : Membership.mem (ğ’œ m) f\nhm : LT.lt 0 m\nâŠ¢ Function.Surjective â‡‘(AlgebraicGeometry.ProjIsoSpecTopComponent.toSpec ğ’œ f)","decl":"lemma toSpec_surjective {f : A} {m : â„•} (f_deg : f âˆˆ ğ’œ m) (hm : 0 < m) :\n    Function.Surjective (toSpec ğ’œ f) :=\n  Function.surjective_iff_hasRightInverse |>.mpr\n    âŸ¨FromSpec.toFun f_deg hm, toSpec_fromSpec ğ’œ f_deg hmâŸ©\n\n"}
{"name":"AlgebraicGeometry.ProjIsoSpecTopComponent.toSpec_bijective","module":"Mathlib.AlgebraicGeometry.ProjectiveSpectrum.Scheme","initialProofState":"R : Type u_1\nA : Type u_2\ninstâœÂ³ : CommRing R\ninstâœÂ² : CommRing A\ninstâœÂ¹ : Algebra R A\nğ’œ : Nat â†’ Submodule R A\ninstâœ : GradedAlgebra ğ’œ\nf : A\nm : Nat\nf_deg : Membership.mem (ğ’œ m) f\nhm : LT.lt 0 m\nâŠ¢ Function.Bijective â‡‘(AlgebraicGeometry.ProjIsoSpecTopComponent.toSpec ğ’œ f)","decl":"lemma toSpec_bijective {f : A} {m : â„•} (f_deg : f âˆˆ ğ’œ m) (hm : 0 < m) :\n    Function.Bijective (toSpec (ğ’œ := ğ’œ) (f := f)) :=\n  âŸ¨toSpec_injective ğ’œ f_deg hm, toSpec_surjective ğ’œ f_deg hmâŸ©\n\n"}
{"name":"AlgebraicGeometry.ProjIsoSpecTopComponent.toSpec.image_basicOpen_eq_basicOpen","module":"Mathlib.AlgebraicGeometry.ProjectiveSpectrum.Scheme","initialProofState":"R : Type u_1\nA : Type u_2\ninstâœÂ³ : CommRing R\ninstâœÂ² : CommRing A\ninstâœÂ¹ : Algebra R A\nğ’œ : Nat â†’ Submodule R A\ninstâœ : GradedAlgebra ğ’œ\nf : A\nm : Nat\nf_deg : Membership.mem (ğ’œ m) f\nhm : LT.lt 0 m\na : A\ni : Nat\nâŠ¢ Eq (Set.image (â‡‘(AlgebraicGeometry.ProjIsoSpecTopComponent.toSpec ğ’œ f)) (Set.preimage Subtype.val â†‘(ProjectiveSpectrum.basicOpen ğ’œ â†‘(((DirectSum.decompose ğ’œ) a) i)))) (PrimeSpectrum.basicOpen (HomogeneousLocalization.mk { deg := HMul.hMul m i, num := âŸ¨HPow.hPow (â†‘(((DirectSum.decompose ğ’œ) a) i)) m, â‹¯âŸ©, den := âŸ¨HPow.hPow f i, â‹¯âŸ©, den_mem := â‹¯ })).carrier","decl":"variable {ğ’œ} in\nlemma image_basicOpen_eq_basicOpen (a : A) (i : â„•) :\n    toSpec ğ’œ f '' (Subtype.val â»Â¹' (pbo (decompose ğ’œ a i) : Set (ProjectiveSpectrum ğ’œ))) =\n    (PrimeSpectrum.basicOpen (R := Aâ°_ f) <|\n      HomogeneousLocalization.mk\n        âŸ¨m * i, âŸ¨decompose ğ’œ a i ^ m,\n          (smul_eq_mul â„•) â–¸ SetLike.pow_mem_graded _ (Submodule.coe_mem _)âŸ©,\n          âŸ¨f^i, by rw [mul_comm]; exact SetLike.pow_mem_graded _ f_degâŸ©, âŸ¨i, rflâŸ©âŸ©).1 :=\n  Set.preimage_injective.mpr (toSpec_surjective ğ’œ f_deg hm) <|\n    Set.preimage_image_eq _ (toSpec_injective ğ’œ f_deg hm) â–¸ by\n  rw [Opens.carrier_eq_coe, toSpec_preimage_basicOpen, ProjectiveSpectrum.basicOpen_pow ğ’œ _ m hm]\n\n"}
{"name":"AlgebraicGeometry.ProjectiveSpectrum.Proj.awayToSection_germ","module":"Mathlib.AlgebraicGeometry.ProjectiveSpectrum.Scheme","initialProofState":"R : Type u_1\nA : Type u_2\ninstâœÂ³ : CommRing R\ninstâœÂ² : CommRing A\ninstâœÂ¹ : Algebra R A\nğ’œ : Nat â†’ Submodule R A\ninstâœ : GradedAlgebra ğ’œ\nf : A\nx : â†‘(ProjectiveSpectrum.top ğ’œ)\nhx : Membership.mem (ProjectiveSpectrum.basicOpen ğ’œ f) x\nâŠ¢ Eq (CategoryTheory.CategoryStruct.comp (AlgebraicGeometry.ProjectiveSpectrum.Proj.awayToSection ğ’œ f) ((AlgebraicGeometry.ProjectiveSpectrum.Proj.structureSheaf ğ’œ).presheaf.germ (ProjectiveSpectrum.basicOpen ğ’œ f) x hx)) (CategoryTheory.CategoryStruct.comp (CommRingCat.ofHom (HomogeneousLocalization.mapId ğ’œ â‹¯)) (AlgebraicGeometry.Proj.stalkIso' ğ’œ x).toCommRingCatIso.inv)","decl":"lemma awayToSection_germ (f x hx) :\n    awayToSection ğ’œ f â‰« (structureSheaf ğ’œ).presheaf.germ _ x hx =\n      CommRingCat.ofHom (HomogeneousLocalization.mapId ğ’œ (Submonoid.powers_le.mpr hx)) â‰«\n        (Proj.stalkIso' ğ’œ x).toCommRingCatIso.inv := by\n  ext z\n  apply (Proj.stalkIso' ğ’œ x).eq_symm_apply.mpr\n  apply Proj.stalkIso'_germ\n\n"}
{"name":"AlgebraicGeometry.ProjectiveSpectrum.Proj.awayToSection_apply","module":"Mathlib.AlgebraicGeometry.ProjectiveSpectrum.Scheme","initialProofState":"R : Type u_1\nA : Type u_2\ninstâœÂ³ : CommRing R\ninstâœÂ² : CommRing A\ninstâœÂ¹ : Algebra R A\nğ’œ : Nat â†’ Submodule R A\ninstâœ : GradedAlgebra ğ’œ\nf : A\nx : â†‘(CommRingCat.of (HomogeneousLocalization.Away ğ’œ f))\np : Subtype fun x => Membership.mem (Opposite.unop { unop := ProjectiveSpectrum.basicOpen ğ’œ f }) x\nâŠ¢ Eq (HomogeneousLocalization.val (â†‘((AlgebraicGeometry.ProjectiveSpectrum.Proj.awayToSection ğ’œ f).hom' x) p)) ((IsLocalization.map (Localization (â†‘p).asHomogeneousIdeal.toIdeal.primeCompl) (RingHom.id A) â‹¯) (HomogeneousLocalization.val x))","decl":"lemma awayToSection_apply (f : A) (x p) :\n    (((ProjectiveSpectrum.Proj.awayToSection ğ’œ f).1 x).val p).val =\n      IsLocalization.map (M := Submonoid.powers f) (T := p.1.1.toIdeal.primeCompl) _\n        (RingHom.id _) (Submonoid.powers_le.mpr p.2) x.val := by\n  obtain âŸ¨x, rflâŸ© := HomogeneousLocalization.mk_surjective x\n  show (HomogeneousLocalization.mapId ğ’œ _ _).val = _\n  dsimp [HomogeneousLocalization.mapId, HomogeneousLocalization.map]\n  rw [Localization.mk_eq_mk', Localization.mk_eq_mk', IsLocalization.map_mk']\n  rfl\n\n"}
{"name":"AlgebraicGeometry.ProjectiveSpectrum.Proj.awayToÎ“_Î“ToStalk","module":"Mathlib.AlgebraicGeometry.ProjectiveSpectrum.Scheme","initialProofState":"R : Type u_1\nA : Type u_2\ninstâœÂ³ : CommRing R\ninstâœÂ² : CommRing A\ninstâœÂ¹ : Algebra R A\nğ’œ : Nat â†’ Submodule R A\ninstâœ : GradedAlgebra ğ’œ\nf : A\nx : â†‘â†‘((AlgebraicGeometry.Proj.toLocallyRingedSpace ğ’œ).restrict â‹¯).toPresheafedSpace\nâŠ¢ Eq (CategoryTheory.CategoryStruct.comp (AlgebraicGeometry.ProjectiveSpectrum.Proj.awayToÎ“ ğ’œ f) (((AlgebraicGeometry.Proj.toLocallyRingedSpace ğ’œ).restrict â‹¯).presheaf.Î“germ x)) (CategoryTheory.CategoryStruct.comp (CommRingCat.ofHom (HomogeneousLocalization.mapId ğ’œ â‹¯)) (CategoryTheory.CategoryStruct.comp (AlgebraicGeometry.Proj.stalkIso' ğ’œ â†‘x).toCommRingCatIso.inv ((AlgebraicGeometry.Proj.toLocallyRingedSpace ğ’œ).restrictStalkIso â‹¯ x).inv))","decl":"lemma awayToÎ“_Î“ToStalk (f) (x) :\n    awayToÎ“ ğ’œ f â‰« (Proj| pbo f).presheaf.Î“germ x =\n      CommRingCat.ofHom (HomogeneousLocalization.mapId ğ’œ (Submonoid.powers_le.mpr x.2)) â‰«\n      (Proj.stalkIso' ğ’œ x.1).toCommRingCatIso.inv â‰«\n      ((Proj.toLocallyRingedSpace ğ’œ).restrictStalkIso (Opens.isOpenEmbedding _) x).inv := by\n  rw [awayToÎ“, Category.assoc, â† Category.assoc _ (Iso.inv _),\n    Iso.eq_comp_inv, Category.assoc, Category.assoc, Presheaf.Î“germ]\n  rw [LocallyRingedSpace.restrictStalkIso_hom_eq_germ]\n  simp only [Proj.toLocallyRingedSpace, Proj.toSheafedSpace]\n  rw [Presheaf.germ_res, awayToSection_germ]\n  rfl\n\n"}
{"name":"AlgebraicGeometry.ProjectiveSpectrum.Proj.toSpec_base_apply_eq_comap","module":"Mathlib.AlgebraicGeometry.ProjectiveSpectrum.Scheme","initialProofState":"R : Type u_1\nA : Type u_2\ninstâœÂ³ : CommRing R\ninstâœÂ² : CommRing A\ninstâœÂ¹ : Algebra R A\nğ’œ : Nat â†’ Submodule R A\ninstâœ : GradedAlgebra ğ’œ\nf : A\nx : â†‘((AlgebraicGeometry.Proj.toLocallyRingedSpace ğ’œ).restrict â‹¯).toTopCat\nâŠ¢ Eq ((AlgebraicGeometry.ProjectiveSpectrum.Proj.toSpec ğ’œ f).base x) ((PrimeSpectrum.comap (HomogeneousLocalization.mapId ğ’œ â‹¯)) (IsLocalRing.closedPoint (HomogeneousLocalization.AtPrime ğ’œ (â†‘x).asHomogeneousIdeal.toIdeal)))","decl":"lemma toSpec_base_apply_eq_comap {f} (x : Proj| pbo f) :\n    (toSpec ğ’œ f).base x = PrimeSpectrum.comap (mapId ğ’œ (Submonoid.powers_le.mpr x.2))\n      (closedPoint (AtPrime ğ’œ x.1.asHomogeneousIdeal.toIdeal)) := by\n  show PrimeSpectrum.comap (awayToÎ“ ğ’œ f â‰« (Proj| pbo f).presheaf.Î“germ x).hom\n        (IsLocalRing.closedPoint ((Proj| pbo f).presheaf.stalk x)) = _\n  rw [awayToÎ“_Î“ToStalk, CommRingCat.hom_comp, PrimeSpectrum.comap_comp]\n  exact congr(PrimeSpectrum.comap _ $(@IsLocalRing.comap_closedPoint\n    (HomogeneousLocalization.AtPrime ğ’œ x.1.asHomogeneousIdeal.toIdeal) _ _\n    ((Proj| pbo f).presheaf.stalk x) _ _ _ (isLocalHom_of_isIso _)))\n\n"}
{"name":"AlgebraicGeometry.ProjectiveSpectrum.Proj.toSpec_base_apply_eq","module":"Mathlib.AlgebraicGeometry.ProjectiveSpectrum.Scheme","initialProofState":"R : Type u_1\nA : Type u_2\ninstâœÂ³ : CommRing R\ninstâœÂ² : CommRing A\ninstâœÂ¹ : Algebra R A\nğ’œ : Nat â†’ Submodule R A\ninstâœ : GradedAlgebra ğ’œ\nf : A\nx : â†‘((AlgebraicGeometry.Proj.toLocallyRingedSpace ğ’œ).restrict â‹¯).toTopCat\nâŠ¢ Eq ((AlgebraicGeometry.ProjectiveSpectrum.Proj.toSpec ğ’œ f).base x) ((AlgebraicGeometry.ProjIsoSpecTopComponent.toSpec ğ’œ f) x)","decl":"lemma toSpec_base_apply_eq {f} (x : Proj| pbo f) :\n    (toSpec ğ’œ f).base x = ProjIsoSpecTopComponent.toSpec ğ’œ f x :=\n  toSpec_base_apply_eq_comap ğ’œ x |>.trans <| PrimeSpectrum.ext <| Ideal.ext fun z =>\n  show Â¬ IsUnit _ â†” z âˆˆ ProjIsoSpecTopComponent.ToSpec.carrier _ by\n  obtain âŸ¨z, rflâŸ© := z.mk_surjective\n  rw [â† HomogeneousLocalization.isUnit_iff_isUnit_val,\n    ProjIsoSpecTopComponent.ToSpec.mk_mem_carrier, HomogeneousLocalization.map_mk,\n    HomogeneousLocalization.val_mk, Localization.mk_eq_mk',\n    IsLocalization.AtPrime.isUnit_mk'_iff]\n  exact not_not\n\n"}
{"name":"AlgebraicGeometry.ProjectiveSpectrum.Proj.toSpec_base_isIso","module":"Mathlib.AlgebraicGeometry.ProjectiveSpectrum.Scheme","initialProofState":"R : Type u_1\nA : Type u_2\ninstâœÂ³ : CommRing R\ninstâœÂ² : CommRing A\ninstâœÂ¹ : Algebra R A\nğ’œ : Nat â†’ Submodule R A\ninstâœ : GradedAlgebra ğ’œ\nf : A\nm : Nat\nf_deg : Membership.mem (ğ’œ m) f\nhm : LT.lt 0 m\nâŠ¢ CategoryTheory.IsIso (AlgebraicGeometry.ProjectiveSpectrum.Proj.toSpec ğ’œ f).base","decl":"lemma toSpec_base_isIso {f} {m} (f_deg : f âˆˆ ğ’œ m) (hm : 0 < m) :\n    IsIso (toSpec ğ’œ f).base := by\n  convert (projIsoSpecTopComponent f_deg hm).isIso_hom\n  exact DFunLike.ext _ _ <| toSpec_base_apply_eq ğ’œ\n\n"}
{"name":"AlgebraicGeometry.ProjectiveSpectrum.Proj.mk_mem_toSpec_base_apply","module":"Mathlib.AlgebraicGeometry.ProjectiveSpectrum.Scheme","initialProofState":"R : Type u_1\nA : Type u_2\ninstâœÂ³ : CommRing R\ninstâœÂ² : CommRing A\ninstâœÂ¹ : Algebra R A\nğ’œ : Nat â†’ Submodule R A\ninstâœ : GradedAlgebra ğ’œ\nf : A\nx : â†‘((AlgebraicGeometry.Proj.toLocallyRingedSpace ğ’œ).restrict â‹¯).toTopCat\nz : HomogeneousLocalization.NumDenSameDeg ğ’œ (Submonoid.powers f)\nâŠ¢ Iff (Membership.mem ((AlgebraicGeometry.ProjectiveSpectrum.Proj.toSpec ğ’œ f).base x).asIdeal (HomogeneousLocalization.mk z)) (Membership.mem (â†‘x).asHomogeneousIdeal â†‘z.num)","decl":"lemma mk_mem_toSpec_base_apply {f} (x : Proj| pbo f)\n    (z : NumDenSameDeg ğ’œ (.powers f)) :\n    HomogeneousLocalization.mk z âˆˆ ((toSpec ğ’œ f).base x).asIdeal â†”\n      z.num.1 âˆˆ x.1.asHomogeneousIdeal :=\n  (toSpec_base_apply_eq ğ’œ x).symm â–¸ ProjIsoSpecTopComponent.ToSpec.mk_mem_carrier _ _\n\n"}
{"name":"AlgebraicGeometry.ProjectiveSpectrum.Proj.toSpec_preimage_basicOpen","module":"Mathlib.AlgebraicGeometry.ProjectiveSpectrum.Scheme","initialProofState":"R : Type u_1\nA : Type u_2\ninstâœÂ³ : CommRing R\ninstâœÂ² : CommRing A\ninstâœÂ¹ : Algebra R A\nğ’œ : Nat â†’ Submodule R A\ninstâœ : GradedAlgebra ğ’œ\nf : A\nt : HomogeneousLocalization.NumDenSameDeg ğ’œ (Submonoid.powers f)\nâŠ¢ Eq ((TopologicalSpace.Opens.map (AlgebraicGeometry.ProjectiveSpectrum.Proj.toSpec ğ’œ f).base).obj (PrimeSpectrum.basicOpen (HomogeneousLocalization.mk t))) ((TopologicalSpace.Opens.comap { toFun := Subtype.val, continuous_toFun := â‹¯ }) (ProjectiveSpectrum.basicOpen ğ’œ â†‘t.num))","decl":"lemma toSpec_preimage_basicOpen {f}\n    (t : NumDenSameDeg ğ’œ (.powers f)) :\n    (Opens.map (toSpec ğ’œ f).base).obj (sbo (HomogeneousLocalization.mk t)) =\n      Opens.comap âŸ¨_, continuous_subtype_valâŸ© (pbo t.num.1) :=\n  Opens.ext <| Opens.map_coe _ _ â–¸ by\n  convert (ProjIsoSpecTopComponent.ToSpec.preimage_basicOpen f t)\n  exact funext fun _ => toSpec_base_apply_eq _ _\n\n"}
{"name":"AlgebraicGeometry.ProjectiveSpectrum.Proj.toOpen_toSpec_val_c_app_assoc","module":"Mathlib.AlgebraicGeometry.ProjectiveSpectrum.Scheme","initialProofState":"R : Type u_1\nA : Type u_2\ninstâœÂ³ : CommRing R\ninstâœÂ² : CommRing A\ninstâœÂ¹ : Algebra R A\nğ’œ : Nat â†’ Submodule R A\ninstâœ : GradedAlgebra ğ’œ\nf : A\nU : Opposite (TopologicalSpace.Opens â†‘â†‘(AlgebraicGeometry.Spec.locallyRingedSpaceObj (CommRingCat.of (HomogeneousLocalization.Away ğ’œ f))).toPresheafedSpace)\nZ : CommRingCat\nh : Quiver.Hom (((TopCat.Presheaf.pushforward CommRingCat (AlgebraicGeometry.ProjectiveSpectrum.Proj.toSpec ğ’œ f).base).obj ((AlgebraicGeometry.Proj.toLocallyRingedSpace ğ’œ).restrict â‹¯).presheaf).obj U) Z\nâŠ¢ Eq (CategoryTheory.CategoryStruct.comp (AlgebraicGeometry.StructureSheaf.toOpen (HomogeneousLocalization.Away ğ’œ f) (Opposite.unop U)) (CategoryTheory.CategoryStruct.comp ((AlgebraicGeometry.ProjectiveSpectrum.Proj.toSpec ğ’œ f).c.app U) h)) (CategoryTheory.CategoryStruct.comp (AlgebraicGeometry.ProjectiveSpectrum.Proj.awayToÎ“ ğ’œ f) (CategoryTheory.CategoryStruct.comp (((AlgebraicGeometry.Proj.toLocallyRingedSpace ğ’œ).restrict â‹¯).presheaf.map (CategoryTheory.homOfLE â‹¯).op) h))","decl":"@[reassoc]\nlemma toOpen_toSpec_val_c_app (f) (U) :\n    StructureSheaf.toOpen (Aâ°_ f) U.unop â‰« (toSpec ğ’œ f).c.app U =\n      awayToÎ“ ğ’œ f â‰« (Proj| pbo f).presheaf.map (homOfLE le_top).op :=\n  Eq.trans (by congr) <| Î“Spec.toOpen_comp_locallyRingedSpaceAdjunction_homEquiv_app _ U\n\n"}
{"name":"AlgebraicGeometry.ProjectiveSpectrum.Proj.toOpen_toSpec_val_c_app","module":"Mathlib.AlgebraicGeometry.ProjectiveSpectrum.Scheme","initialProofState":"R : Type u_1\nA : Type u_2\ninstâœÂ³ : CommRing R\ninstâœÂ² : CommRing A\ninstâœÂ¹ : Algebra R A\nğ’œ : Nat â†’ Submodule R A\ninstâœ : GradedAlgebra ğ’œ\nf : A\nU : Opposite (TopologicalSpace.Opens â†‘â†‘(AlgebraicGeometry.Spec.locallyRingedSpaceObj (CommRingCat.of (HomogeneousLocalization.Away ğ’œ f))).toPresheafedSpace)\nâŠ¢ Eq (CategoryTheory.CategoryStruct.comp (AlgebraicGeometry.StructureSheaf.toOpen (HomogeneousLocalization.Away ğ’œ f) (Opposite.unop U)) ((AlgebraicGeometry.ProjectiveSpectrum.Proj.toSpec ğ’œ f).c.app U)) (CategoryTheory.CategoryStruct.comp (AlgebraicGeometry.ProjectiveSpectrum.Proj.awayToÎ“ ğ’œ f) (((AlgebraicGeometry.Proj.toLocallyRingedSpace ğ’œ).restrict â‹¯).presheaf.map (CategoryTheory.homOfLE â‹¯).op))","decl":"@[reassoc]\nlemma toOpen_toSpec_val_c_app (f) (U) :\n    StructureSheaf.toOpen (Aâ°_ f) U.unop â‰« (toSpec ğ’œ f).c.app U =\n      awayToÎ“ ğ’œ f â‰« (Proj| pbo f).presheaf.map (homOfLE le_top).op :=\n  Eq.trans (by congr) <| Î“Spec.toOpen_comp_locallyRingedSpaceAdjunction_homEquiv_app _ U\n\n"}
{"name":"AlgebraicGeometry.ProjectiveSpectrum.Proj.toStalk_stalkMap_toSpec","module":"Mathlib.AlgebraicGeometry.ProjectiveSpectrum.Scheme","initialProofState":"R : Type u_1\nA : Type u_2\ninstâœÂ³ : CommRing R\ninstâœÂ² : CommRing A\ninstâœÂ¹ : Algebra R A\nğ’œ : Nat â†’ Submodule R A\ninstâœ : GradedAlgebra ğ’œ\nf : A\nx : â†‘((AlgebraicGeometry.Proj.toLocallyRingedSpace ğ’œ).restrict â‹¯).toTopCat\nâŠ¢ Eq (CategoryTheory.CategoryStruct.comp (AlgebraicGeometry.StructureSheaf.toStalk (â†‘(CommRingCat.of (HomogeneousLocalization.Away ğ’œ f))) ((AlgebraicGeometry.ProjectiveSpectrum.Proj.toSpec ğ’œ f).base x)) (AlgebraicGeometry.LocallyRingedSpace.Hom.stalkMap (AlgebraicGeometry.ProjectiveSpectrum.Proj.toSpec ğ’œ f) x)) (CategoryTheory.CategoryStruct.comp (AlgebraicGeometry.ProjectiveSpectrum.Proj.awayToÎ“ ğ’œ f) (((AlgebraicGeometry.Proj.toLocallyRingedSpace ğ’œ).restrict â‹¯).presheaf.Î“germ x))","decl":"@[reassoc]\nlemma toStalk_stalkMap_toSpec (f) (x) :\n    StructureSheaf.toStalk _ _ â‰« (toSpec ğ’œ f).stalkMap x =\n      awayToÎ“ ğ’œ f â‰« (Proj| pbo f).presheaf.Î“germ x := by\n  rw [StructureSheaf.toStalk, Category.assoc]\n  simp_rw [â† Spec.locallyRingedSpaceObj_presheaf']\n  rw [LocallyRingedSpace.stalkMap_germ (toSpec ğ’œ f),\n    toOpen_toSpec_val_c_app_assoc, Presheaf.germ_res]\n  rfl\n\n"}
{"name":"AlgebraicGeometry.ProjectiveSpectrum.Proj.toStalk_stalkMap_toSpec_assoc","module":"Mathlib.AlgebraicGeometry.ProjectiveSpectrum.Scheme","initialProofState":"R : Type u_1\nA : Type u_2\ninstâœÂ³ : CommRing R\ninstâœÂ² : CommRing A\ninstâœÂ¹ : Algebra R A\nğ’œ : Nat â†’ Submodule R A\ninstâœ : GradedAlgebra ğ’œ\nf : A\nx : â†‘((AlgebraicGeometry.Proj.toLocallyRingedSpace ğ’œ).restrict â‹¯).toTopCat\nZ : CommRingCat\nh : Quiver.Hom (((AlgebraicGeometry.Proj.toLocallyRingedSpace ğ’œ).restrict â‹¯).presheaf.stalk x) Z\nâŠ¢ Eq (CategoryTheory.CategoryStruct.comp (AlgebraicGeometry.StructureSheaf.toStalk (HomogeneousLocalization.Away ğ’œ f) ((AlgebraicGeometry.ProjectiveSpectrum.Proj.toSpec ğ’œ f).base x)) (CategoryTheory.CategoryStruct.comp (AlgebraicGeometry.LocallyRingedSpace.Hom.stalkMap (AlgebraicGeometry.ProjectiveSpectrum.Proj.toSpec ğ’œ f) x) h)) (CategoryTheory.CategoryStruct.comp (AlgebraicGeometry.ProjectiveSpectrum.Proj.awayToÎ“ ğ’œ f) (CategoryTheory.CategoryStruct.comp (((AlgebraicGeometry.Proj.toLocallyRingedSpace ğ’œ).restrict â‹¯).presheaf.Î“germ x) h))","decl":"@[reassoc]\nlemma toStalk_stalkMap_toSpec (f) (x) :\n    StructureSheaf.toStalk _ _ â‰« (toSpec ğ’œ f).stalkMap x =\n      awayToÎ“ ğ’œ f â‰« (Proj| pbo f).presheaf.Î“germ x := by\n  rw [StructureSheaf.toStalk, Category.assoc]\n  simp_rw [â† Spec.locallyRingedSpaceObj_presheaf']\n  rw [LocallyRingedSpace.stalkMap_germ (toSpec ğ’œ f),\n    toOpen_toSpec_val_c_app_assoc, Presheaf.germ_res]\n  rfl\n\n"}
{"name":"AlgebraicGeometry.ProjectiveSpectrum.Proj.isLocalization_atPrime","module":"Mathlib.AlgebraicGeometry.ProjectiveSpectrum.Scheme","initialProofState":"R : Type u_1\nA : Type u_2\ninstâœÂ³ : CommRing R\ninstâœÂ² : CommRing A\ninstâœÂ¹ : Algebra R A\nğ’œ : Nat â†’ Submodule R A\ninstâœ : GradedAlgebra ğ’œ\nf : A\nx : Subtype fun x => Membership.mem (ProjectiveSpectrum.basicOpen ğ’œ f) x\nm : Nat\nf_deg : Membership.mem (ğ’œ m) f\nhm : LT.lt 0 m\nâŠ¢ IsLocalization ((AlgebraicGeometry.ProjectiveSpectrum.Proj.toSpec ğ’œ f).base x).asIdeal.primeCompl (HomogeneousLocalization.AtPrime ğ’œ (â†‘x).asHomogeneousIdeal.toIdeal)","decl":"/--\nIf `x` is a point in the basic open set `D(f)` where `f` is a homogeneous element of positive\ndegree, then the homogeneously localized ring `Aâ°â‚“` has the universal property of the localization\nof `Aâ°_f` at `Ï†(x)` where `Ï† : Proj|D(f) âŸ¶ Spec Aâ°_f` is the morphism of locally ringed space\nconstructed as above.\n-/\nlemma isLocalization_atPrime (f) (x : pbo f) {m} (f_deg : f âˆˆ ğ’œ m) (hm : 0 < m) :\n    @IsLocalization (Away ğ’œ f) _ ((toSpec ğ’œ f).base x).asIdeal.primeCompl\n      (AtPrime ğ’œ x.1.asHomogeneousIdeal.toIdeal) _\n      (mapId ğ’œ (Submonoid.powers_le.mpr x.2)).toAlgebra := by\n  letI : Algebra (Away ğ’œ f) (AtPrime ğ’œ x.1.asHomogeneousIdeal.toIdeal) :=\n    (mapId ğ’œ (Submonoid.powers_le.mpr x.2)).toAlgebra\n  constructor\n  Â· rintro âŸ¨y, hyâŸ©\n    obtain âŸ¨y, rflâŸ© := HomogeneousLocalization.mk_surjective y\n    refine isUnit_of_mul_eq_one _\n      (.mk âŸ¨y.deg, y.den, y.num, (mk_mem_toSpec_base_apply _ _ _).not.mp hyâŸ©) <| val_injective _ ?_\n    simp only [RingHom.algebraMap_toAlgebra, map_mk, RingHom.id_apply, val_mul, val_mk, mk_eq_mk',\n      val_one, IsLocalization.mk'_mul_mk'_eq_one']\n  Â· intro z\n    obtain âŸ¨âŸ¨i, a, âŸ¨b, hbâŸ©, (hb' : b âˆ‰ x.1.1)âŸ©, rflâŸ© := z.mk_surjective\n    refine âŸ¨âŸ¨HomogeneousLocalization.mk âŸ¨i * m, âŸ¨a * b ^ (m - 1), ?_âŸ©,\n        âŸ¨f ^ i, SetLike.pow_mem_graded _ f_degâŸ©, âŸ¨_, rflâŸ©âŸ©,\n      âŸ¨HomogeneousLocalization.mk âŸ¨i * m, âŸ¨b ^ m, mul_comm m i â–¸ SetLike.pow_mem_graded _ hbâŸ©,\n        âŸ¨f ^ i, SetLike.pow_mem_graded _ f_degâŸ©, âŸ¨_, rflâŸ©âŸ©,\n        (mk_mem_toSpec_base_apply _ _ _).not.mpr <| x.1.1.toIdeal.primeCompl.pow_mem hb' mâŸ©âŸ©,\n        val_injective _ ?_âŸ©\n    Â· convert SetLike.mul_mem_graded a.2 (SetLike.pow_mem_graded (m - 1) hb) using 2\n      rw [â† succ_nsmul', tsub_add_cancel_of_le (by omega), mul_comm, smul_eq_mul]\n    Â· simp only [RingHom.algebraMap_toAlgebra, map_mk, RingHom.id_apply, val_mul, val_mk,\n        mk_eq_mk', â† IsLocalization.mk'_mul, Submonoid.mk_mul_mk, IsLocalization.mk'_eq_iff_eq]\n      rw [mul_comm b, mul_mul_mul_comm, â† pow_succ', mul_assoc, tsub_add_cancel_of_le (by omega)]\n  Â· intros y z e\n    obtain âŸ¨y, rflâŸ© := HomogeneousLocalization.mk_surjective y\n    obtain âŸ¨z, rflâŸ© := HomogeneousLocalization.mk_surjective z\n    obtain âŸ¨i, c, hc, hc', eâŸ© : âˆƒ i, âˆƒ c âˆˆ ğ’œ i, c âˆ‰ x.1.asHomogeneousIdeal âˆ§\n        c * (z.den.1 * y.num.1) = c * (y.den.1 * z.num.1) := by\n      apply_fun HomogeneousLocalization.val at e\n      simp only [RingHom.algebraMap_toAlgebra, map_mk, RingHom.id_apply, val_mk, mk_eq_mk',\n        IsLocalization.mk'_eq_iff_eq] at e\n      obtain âŸ¨âŸ¨c, hcxâŸ©, hcâŸ© := IsLocalization.exists_of_eq (M := x.1.1.toIdeal.primeCompl) e\n      obtain âŸ¨i, hiâŸ© := not_forall.mp ((x.1.1.isHomogeneous.mem_iff _).not.mp hcx)\n      refine âŸ¨i, _, (decompose ğ’œ c i).2, hi, ?_âŸ©\n      apply_fun fun x â†¦ (decompose ğ’œ x (i + z.deg + y.deg)).1 at hc\n      conv_rhs at hc => rw [add_right_comm]\n      rwa [â† mul_assoc, coe_decompose_mul_add_of_right_mem, coe_decompose_mul_add_of_right_mem,\n        â† mul_assoc, coe_decompose_mul_add_of_right_mem, coe_decompose_mul_add_of_right_mem,\n        mul_assoc, mul_assoc] at hc\n      exacts [y.den.2, z.num.2, z.den.2, y.num.2]\n\n    refine âŸ¨âŸ¨HomogeneousLocalization.mk âŸ¨m * i, âŸ¨c ^ m, SetLike.pow_mem_graded _ hcâŸ©,\n      âŸ¨f ^ i, mul_comm m i â–¸ SetLike.pow_mem_graded _ f_degâŸ©, âŸ¨_, rflâŸ©âŸ©,\n      (mk_mem_toSpec_base_apply _ _ _).not.mpr <| x.1.1.toIdeal.primeCompl.pow_mem hc' _âŸ©,\n      val_injective _ ?_âŸ©\n    simp only [val_mul, val_mk, mk_eq_mk', â† IsLocalization.mk'_mul, Submonoid.mk_mul_mk,\n      IsLocalization.mk'_eq_iff_eq, mul_assoc]\n    congr 2\n    rw [mul_left_comm, mul_left_comm y.den.1, â† tsub_add_cancel_of_le (show 1 â‰¤ m from hm),\n      pow_succ, mul_assoc, mul_assoc, e]\n\n"}
{"name":"AlgebraicGeometry.ProjectiveSpectrum.Proj.toStalk_specStalkEquiv","module":"Mathlib.AlgebraicGeometry.ProjectiveSpectrum.Scheme","initialProofState":"R : Type u_1\nA : Type u_2\ninstâœÂ³ : CommRing R\ninstâœÂ² : CommRing A\ninstâœÂ¹ : Algebra R A\nğ’œ : Nat â†’ Submodule R A\ninstâœ : GradedAlgebra ğ’œ\nf : A\nx : Subtype fun x => Membership.mem (ProjectiveSpectrum.basicOpen ğ’œ f) x\nm : Nat\nf_deg : Membership.mem (ğ’œ m) f\nhm : LT.lt 0 m\nâŠ¢ Eq (CategoryTheory.CategoryStruct.comp (AlgebraicGeometry.StructureSheaf.toStalk (HomogeneousLocalization.Away ğ’œ f) ((AlgebraicGeometry.ProjectiveSpectrum.Proj.toSpec ğ’œ f).base x)) (AlgebraicGeometry.ProjectiveSpectrum.Proj.specStalkEquiv ğ’œ f x f_deg hm).hom) (CommRingCat.ofHom (HomogeneousLocalization.mapId ğ’œ â‹¯))","decl":"lemma toStalk_specStalkEquiv (f) (x : pbo f) {m} (f_deg : f âˆˆ ğ’œ m) (hm : 0 < m) :\n    StructureSheaf.toStalk (Aâ°_ f) ((toSpec ğ’œ f).base x) â‰« (specStalkEquiv ğ’œ f x f_deg hm).hom =\n      CommRingCat.ofHom (mapId _ <| Submonoid.powers_le.mpr x.2) :=\n  letI : Algebra (Away ğ’œ f) (AtPrime ğ’œ x.1.asHomogeneousIdeal.toIdeal) :=\n    (mapId ğ’œ (Submonoid.powers_le.mpr x.2)).toAlgebra\n  letI := isLocalization_atPrime ğ’œ f x f_deg hm\n  CommRingCat.hom_ext (IsLocalization.algEquiv\n    (R := Aâ°_ f)\n    (M := ((toSpec ğ’œ f).base x).asIdeal.primeCompl)\n    (S := (Spec.structureSheaf (Aâ°_ f)).presheaf.stalk ((toSpec ğ’œ f).base x))\n    (Q := AtPrime ğ’œ x.1.asHomogeneousIdeal.toIdeal)).toAlgHom.comp_algebraMap\n\n"}
{"name":"AlgebraicGeometry.ProjectiveSpectrum.Proj.stalkMap_toSpec","module":"Mathlib.AlgebraicGeometry.ProjectiveSpectrum.Scheme","initialProofState":"R : Type u_1\nA : Type u_2\ninstâœÂ³ : CommRing R\ninstâœÂ² : CommRing A\ninstâœÂ¹ : Algebra R A\nğ’œ : Nat â†’ Submodule R A\ninstâœ : GradedAlgebra ğ’œ\nf : A\nx : Subtype fun x => Membership.mem (ProjectiveSpectrum.basicOpen ğ’œ f) x\nm : Nat\nf_deg : Membership.mem (ğ’œ m) f\nhm : LT.lt 0 m\nâŠ¢ Eq (AlgebraicGeometry.LocallyRingedSpace.Hom.stalkMap (AlgebraicGeometry.ProjectiveSpectrum.Proj.toSpec ğ’œ f) x) (CategoryTheory.CategoryStruct.comp (AlgebraicGeometry.ProjectiveSpectrum.Proj.specStalkEquiv ğ’œ f x f_deg hm).hom (CategoryTheory.CategoryStruct.comp (AlgebraicGeometry.Proj.stalkIso' ğ’œ â†‘x).toCommRingCatIso.inv ((AlgebraicGeometry.Proj.toLocallyRingedSpace ğ’œ).restrictStalkIso â‹¯ x).inv))","decl":"lemma stalkMap_toSpec (f) (x : pbo f) {m} (f_deg : f âˆˆ ğ’œ m) (hm : 0 < m) :\n    (toSpec ğ’œ f).stalkMap x =\n      (specStalkEquiv ğ’œ f x f_deg hm).hom â‰« (Proj.stalkIso' ğ’œ x.1).toCommRingCatIso.inv â‰«\n      ((Proj.toLocallyRingedSpace ğ’œ).restrictStalkIso (Opens.isOpenEmbedding _) x).inv :=\n  CommRingCat.hom_ext <|\n    IsLocalization.ringHom_ext (R := Aâ°_ f) ((toSpec ğ’œ f).base x).asIdeal.primeCompl\n      (S := (Spec.structureSheaf (Aâ°_ f)).presheaf.stalk ((toSpec ğ’œ f).base x)) <|\n      CommRingCat.hom_ext_iff.mp <|\n        (toStalk_stalkMap_toSpec _ _ _).trans <| by\n        rw [awayToÎ“_Î“ToStalk, â† toStalk_specStalkEquiv, Category.assoc]; rfl\n\n"}
{"name":"AlgebraicGeometry.ProjectiveSpectrum.Proj.isIso_toSpec","module":"Mathlib.AlgebraicGeometry.ProjectiveSpectrum.Scheme","initialProofState":"R : Type u_1\nA : Type u_2\ninstâœÂ³ : CommRing R\ninstâœÂ² : CommRing A\ninstâœÂ¹ : Algebra R A\nğ’œ : Nat â†’ Submodule R A\ninstâœ : GradedAlgebra ğ’œ\nf : A\nm : Nat\nf_deg : Membership.mem (ğ’œ m) f\nhm : LT.lt 0 m\nâŠ¢ CategoryTheory.IsIso (AlgebraicGeometry.ProjectiveSpectrum.Proj.toSpec ğ’œ f)","decl":"lemma isIso_toSpec (f) {m} (f_deg : f âˆˆ ğ’œ m) (hm : 0 < m) :\n    IsIso (toSpec ğ’œ f) := by\n  haveI : IsIso (toSpec ğ’œ f).base := toSpec_base_isIso ğ’œ f_deg hm\n  haveI (x) : IsIso ((toSpec ğ’œ f).stalkMap x) := by\n    rw [stalkMap_toSpec ğ’œ f x f_deg hm]; infer_instance\n  haveI : LocallyRingedSpace.IsOpenImmersion (toSpec ğ’œ f) :=\n    LocallyRingedSpace.IsOpenImmersion.of_stalk_iso (toSpec ğ’œ f)\n      (TopCat.homeoOfIso (asIso <| (toSpec ğ’œ f).base)).isOpenEmbedding\n  exact LocallyRingedSpace.IsOpenImmersion.to_iso _\n\n"}
